(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[14,4],{1481:function(e,t,a){e.exports=a.p+"static/media/add-listing.e8bf09b1.jpg"},1482:function(e,t,a){e.exports=a.p+"static/media/children.ac34203f.svg"},1483:function(e,t,a){e.exports=a.p+"static/media/developer.349c8038.svg"},1635:function(e,t,a){"use strict";var n=a(3),r=a(1),i=a(0),o=(a(5),a(4)),s=a(20),c=a(7),l=a(293),u=a(97),d=Object(u.a)(i.createElement("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),m=Object(u.a)(i.createElement("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),f=Object(u.a)(i.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),p=Object(u.a)(i.createElement("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),v=Object(u.a)(i.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),g=a(611),h=a(10),_={success:i.createElement(d,{fontSize:"inherit"}),warning:i.createElement(m,{fontSize:"inherit"}),error:i.createElement(f,{fontSize:"inherit"}),info:i.createElement(p,{fontSize:"inherit"})},b=i.createElement(v,{fontSize:"small"}),y=i.forwardRef(function(e,t){var a=e.action,s=e.children,c=e.classes,u=e.className,d=e.closeText,m=void 0===d?"Close":d,f=e.color,p=e.icon,v=e.iconMapping,y=void 0===v?_:v,A=e.onClose,w=e.role,E=void 0===w?"alert":w,N=e.severity,x=void 0===N?"success":N,U=e.variant,O=void 0===U?"standard":U,k=Object(n.a)(e,["action","children","classes","className","closeText","color","icon","iconMapping","onClose","role","severity","variant"]);return i.createElement(l.a,Object(r.a)({role:E,square:!0,elevation:0,className:Object(o.default)(c.root,c["".concat(O).concat(Object(h.a)(f||x))],u),ref:t},k),!1!==p?i.createElement("div",{className:c.icon},p||y[x]||_[x]):null,i.createElement("div",{className:c.message},s),null!=a?i.createElement("div",{className:c.action},a):null,null==a&&A?i.createElement("div",{className:c.action},i.createElement(g.a,{size:"small","aria-label":m,title:m,color:"inherit",onClick:A},b)):null)});t.a=Object(c.a)(function(e){var t="light"===e.palette.type?s.a:s.d,a="light"===e.palette.type?s.d:s.a;return{root:Object(r.a)({},e.typography.body2,{borderRadius:e.shape.borderRadius,backgroundColor:"transparent",display:"flex",padding:"6px 16px"}),standardSuccess:{color:t(e.palette.success.main,.6),backgroundColor:a(e.palette.success.main,.9),"& $icon":{color:e.palette.success.main}},standardInfo:{color:t(e.palette.info.main,.6),backgroundColor:a(e.palette.info.main,.9),"& $icon":{color:e.palette.info.main}},standardWarning:{color:t(e.palette.warning.main,.6),backgroundColor:a(e.palette.warning.main,.9),"& $icon":{color:e.palette.warning.main}},standardError:{color:t(e.palette.error.main,.6),backgroundColor:a(e.palette.error.main,.9),"& $icon":{color:e.palette.error.main}},outlinedSuccess:{color:t(e.palette.success.main,.6),border:"1px solid ".concat(e.palette.success.main),"& $icon":{color:e.palette.success.main}},outlinedInfo:{color:t(e.palette.info.main,.6),border:"1px solid ".concat(e.palette.info.main),"& $icon":{color:e.palette.info.main}},outlinedWarning:{color:t(e.palette.warning.main,.6),border:"1px solid ".concat(e.palette.warning.main),"& $icon":{color:e.palette.warning.main}},outlinedError:{color:t(e.palette.error.main,.6),border:"1px solid ".concat(e.palette.error.main),"& $icon":{color:e.palette.error.main}},filledSuccess:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.success.main},filledInfo:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.info.main},filledWarning:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.warning.main},filledError:{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.error.main},icon:{marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9},message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}},{name:"MuiAlert"})(y)},380:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(182),i=a(93),o=a(94),s=a(189),c=a(95),l=a(96),u=a(1635),d=a(649),m=a.n(d),f=a(180),p=a.n(f),v=a(0),g=a.n(v),h=a(192),_=a.n(h),b=a(751),y=a(51),A=a(57),w=a(626),E=a.n(w),N=a(1481),x=a.n(N),U=a(1482),O=a.n(U),k=a(1483),I=a.n(k),P=a(624),S=a.n(P),j=a(625),C=a(181),D=a(964),F=a.n(D),M=a(966),Y=a(64);function T(e){var t=e.url,a=void 0===t?[]:t,n=e.handleChangeImages,i=Object(v.useState)(a),o=Object(C.a)(i,2),s=o[0],c=o[1],l=function(){var e=Object(j.a)(S.a.mark(function e(t,a){var i;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c(t),i=[],e.next=4,Promise.all(t.map(function(){var e=Object(j.a)(S.a.mark(function e(t){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=4;break}i=[].concat(Object(r.a)(i),[t]),e.next=8;break;case 4:return e.next=6,Object(M.a)(t.file,{initialQuality:.6,maxWidthOrHeight:800});case 6:a=e.sent,i=[].concat(Object(r.a)(i),[a]);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 4:n(i);case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}();return Object(v.useEffect)(function(){(null===s||void 0===s?void 0:s.length)!==(null===a||void 0===a?void 0:a.length)&&c(a)},[a.length]),g.a.createElement("div",null,g.a.createElement(F.a,{multiple:!0,value:s,onChange:l,maxNumber:69,dataURLKey:"data_url"},function(e){var t=e.imageList,a=e.onImageUpload,n=e.onImageRemoveAll,r=e.onImageUpdate,i=e.onImageRemove,o=e.isDragging,s=e.dragProps;return g.a.createElement("div",{className:"upload__image-wrapper"},g.a.createElement("button",Object.assign({className:"btn btn btn-outline-success cu-radius mb-10",style:o?{color:"red"}:null,onClick:a},s),g.a.createElement(Y.b,{text:"click_drop_here"})),"\xa0",g.a.createElement("button",{className:"btn btn-outline-primary m-right-10 mb-10",onClick:n},g.a.createElement(Y.b,{text:"remove_all_images"})),t.map(function(e,t){return g.a.createElement("div",{key:t,className:"image-item"},g.a.createElement("img",{src:"string"===typeof e?e:e.data_url,alt:"",className:"preview-images"}),g.a.createElement("div",{className:"image-item__btn-wrapper"},g.a.createElement("button",{onClick:function(){return r(t)},className:"icon-button icon-update",title:"Update Image"},g.a.createElement("i",{className:"la la-refresh"})),g.a.createElement("br",null),g.a.createElement("button",{onClick:function(){return i(t)},className:"icon-button icon-remove",title:"Remove Image"},g.a.createElement("i",{className:"la la-remove"}))))}))}))}var G=a(632),H=a(812),R=a(677),L=a(174),B=a(636),W=a(644),Z={category_list:[],term_flag:!1,prevAddress:{},ad_title:"",ad_description:"",category_id:"",category_name:"All",address:"",remaing_availability:20,price:50,availability:20,start_time:"09:00",end_time:"18:00",start_date:p()().format("YYYY-MM-DD"),end_date:p()().format("YYYY-MM-DD"),sessions:[],is_feature_day_remaining:0,is_feature_plan:"",is_feature:"1",picture:[],id:"",status:"1",remember_bring:"",timestamp:"",video:"",date:"",ad_click:0,ad_view:0,camp_type:1,age_group_list:[],group_name:"All",option_field1_title:"",option_field2_title:"",custom_terms:"",virtual_link:"",covid_precautions:""},z=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).reset=function(){n.setState(Z)},n.setStateFromInput=function(e){var t={};t[e.target.name]=e.target.value,n.setState(t)},n.addDate=function(){var e=n.state.sessions,t={start_time:n.state.start_time,end_date:n.state.end_date,start_date:n.state.start_date,end_time:n.state.end_time,camp_type:n.state.camp_type,price:100,availability:50,remaing_availability:50,session_description:"",session_title:"",virtual_link:n.state.virtual_link};e=[].concat(Object(r.a)(e),[t]),n.setState({sessions:e})},n.deleteDate=function(e){var t=n.state.sessions;t.splice(e,1),n.setState({sessions:t})},n.updateDate=function(e,t,a){var i=n.state.sessions,o=[];i.forEach(function(n,i){if(i===e)switch(a){case"pr":n.price=t;break;case"ti":n.session_title=t;break;case"att":n.availability=t,n.remaing_availability=t;break;case"des":n.session_description=t;break;case"sd":n.start_date=p()(t).format("YYYY-MM-DD");break;case"ed":n.end_date=p()(t).format("YYYY-MM-DD");break;case"st":n.start_time=t;break;default:n.end_time=t}o=[].concat(Object(r.a)(o),[n])}),n.setState({sessions:o})},n.addActivity=function(e){e.preventDefault();var t=JSON.parse(sessionStorage.getItem("user"));if(p()(n.state.start_date).unix()>p()(n.state.end_date).unix())return E.a.info("Please check sessions. The end date must be behind the start date!"),!1;if(n.state.sessions.length>0){var a=!0;if(n.state.sessions.forEach(function(e){p()(e.start_date).unix()>p()(e.end_date).unix()&&(E.a.info("Please check sessions. The end date must be behind the start date!"),a=!1)}),!a)return!1}if(t.holdon_account)return E.a.info("Your account is currently blocked to add new Camps, please contact the Administrator"),!1;if(2===n.state.camp_type&&""===n.state.virtual_link)return E.a.info("Please check virtual field again!"),!1;if(""===n.state.ad_title||""===n.state.ad_description||""===n.state.address)return E.a.info("Please check field again!"),!1;if("All"===n.state.category_name||"All"===n.state.group_name)return E.a.info("Please check category and age group!"),!1;if(0!==n.state.picture.length){if(!n.state.term_flag)return E.a.info("Please check term & conditions"),!1;n.props.firebaseUpload(n.state,n.props.history),m()("#normal-submit").addClass("hidden"),m()("#uploading").removeClass("hidden")}else E.a.info("You must upload the at least one image!")},n.setImageList=function(e){n.setState({picture:e})},n.state=Z,n.setStateFromInput=n.setStateFromInput.bind(Object(s.a)(n)),n.addActivity=n.addActivity.bind(Object(s.a)(n)),n.handlePlaceSelect=n.handlePlaceSelect.bind(Object(s.a)(n)),n.autocomplete=null,n}return Object(o.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=JSON.parse(sessionStorage.getItem("role"));this.props.getBannerImage("/add-activity"),e?"user"===e&&this.props.history.push("/"):this.props.history.push("/")}},{key:"componentDidMount",value:function(){var e=document.createElement("script");e.src="./assets/js/bundle-0c6e0e19e1.js",e.async=!0,document.body.appendChild(e),this.props.getCategories();var t=window.google;this.autocomplete=new t.maps.places.Autocomplete(document.getElementById("autocomplete"),{types:["geocode"]}),this.autocomplete.addListener("place_changed",this.handlePlaceSelect)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,a,n,r,i,o=null!==(t=null===e||void 0===e?void 0:null===(a=e.location)||void 0===a?void 0:null===(n=a.state)||void 0===n?void 0:n.list)&&void 0!==t?t:{},s=[];(null!==(r=null===o||void 0===o?void 0:o.sessions)&&void 0!==r?r:[]).length>0&&(s=o.sessions.map(function(e){var t,a,n,r,i,o,s,c,l=p()(1e3*(null===e||void 0===e?void 0:null===(t=e.start_date)||void 0===t?void 0:t.seconds)).format("YYYY-MM-DD"),u=p()(1e3*(null===e||void 0===e?void 0:null===(a=e.end_date)||void 0===a?void 0:a.seconds)).format("YYYY-MM-DD");return{availability:(null===e||void 0===e?void 0:e.availability)||50,camp_type:null!==(n=null===e||void 0===e?void 0:e.camp_type)&&void 0!==n?n:1,end_date:u,end_time:e.end_time,price:e.price,remaing_availability:null!==(r=null===e||void 0===e?void 0:e.remaing_availability)&&void 0!==r?r:"",session_description:null!==(i=null===e||void 0===e?void 0:e.session_description)&&void 0!==i?i:"",session_title:null!==(o=null===e||void 0===e?void 0:e.session_title)&&void 0!==o?o:"",start_date:l,start_time:null!==(s=null===e||void 0===e?void 0:e.start_time)&&void 0!==s?s:"",virtual_link:null!==(c=null===e||void 0===e?void 0:e.virtual_link)&&void 0!==c?c:""}})),this.setState({category_list:e.categories,age_group_list:e.groupData,term_flag:!0,ad_title:o.ad_title,ad_description:o.ad_description,category_name:o.category_name,prevAddress:o.address?o.address:this.state.address,address:o.address?"".concat(o.address.street,", ").concat(o.address.city,", ").concat(o.address.state,", ").concat(o.address.country):"",start_date:Boolean(null===o||void 0===o?void 0:o.start_date)?p()(1e3*o.start_date.seconds).format("YYYY-MM-DD"):this.state.start_date,end_date:Boolean(null===o||void 0===o?void 0:o.end_date)?p()(1e3*o.end_date.seconds).format("YYYY-MM-DD"):this.state.end_date,end_time:(null===o||void 0===o?void 0:o.end_time)||this.state.end_time,start_time:(null===o||void 0===o?void 0:o.start_time)||this.state.start_time,picture:(null===o||void 0===o?void 0:o.picture)||this.state.picture,remember_bring:(null===o||void 0===o?void 0:o.remember_bring)||this.state.remember_bring,video:"",sessions:s,option_field2_title:(null===o||void 0===o?void 0:o.option_field2_title)||this.state.option_field2_title,option_field1_title:(null===o||void 0===o?void 0:o.option_field1_title)||this.state.option_field1_title,custom_terms:(null===o||void 0===o?void 0:o.custom_terms)||this.state.custom_terms,price:(null===o||void 0===o?void 0:o.displayPrice)||this.state.price,group_name:(null===o||void 0===o?void 0:null===(i=o.age_group)||void 0===i?void 0:i.name)||this.state.group_name,availability:(null===o||void 0===o?void 0:o.availability)||this.state.availability,camp_type:(null===o||void 0===o?void 0:o.camp_type)||this.state.camp_type,status:(null===o||void 0===o?void 0:o.status)||this.state.status,virtual_link:(null===o||void 0===o?void 0:o.virtual_link)||this.state.virtual_link})}},{key:"componentDidUpdate",value:function(){m()(".bg_image_holder").each(function(){var e=m()(this).children().attr("src");m()(this).css({"background-image":"url('"+e+"')",opacity:"1"}).children()})}},{key:"handlePlaceSelect",value:function(){var e=this.autocomplete.getPlace().address_components;if(!e)return E.a.info("Select location correctly!"),!1;var t={street_number:"short_name",route:"long_name",sublocality:"long_name",locality:"long_name",administrative_area_level_1:"short_name",administrative_area_level_2:"short_name",country:"short_name",postal_code:"short_name"};e.forEach(function(e){var a=e.types[0];t[a]=e[t[a]]}),"short_name"===t.street_number&&(t.street_number=""),"long_name"===t.route&&(t.route="");var a={street:t.street_number+" "+t.route,city:"long_name"===t.locality?"":t.locality,state:"short_name"===t.administrative_area_level_1?"":t.administrative_area_level_1,country:"short_name"===t.country?"":t.country,postal_code:"short_name"===t.postal_code?"":t.postal_code};this.setState({address:a})}},{key:"render",value:function(){var e,t,a,r,i,o,s=this,c=this.props.logo[0].light,l=this.props.t;return g.a.createElement(v.Fragment,null,g.a.createElement("section",{className:"header-breadcrumb bgimage"},g.a.createElement("div",{className:"bg_image_holder"},g.a.createElement("img",{src:""!==this.props.heroImage?this.props.heroImage:x.a,alt:""})),g.a.createElement("div",{className:"mainmenu-wrapper"},g.a.createElement(W.a,{logo:c,className:"menu--light",history:this.props.history})),g.a.createElement(R.d,{title:l("add_activity")})),g.a.createElement("section",{className:"add-listing-wrapper border-bottom section-bg section-padding-strict"},g.a.createElement("div",{className:"container"},g.a.createElement("div",{className:"row"},g.a.createElement("div",{className:"col-lg-10 offset-lg-1"},g.a.createElement("div",{className:"atbd_content_module cu-radius"},g.a.createElement("div",{className:"atbd_content_module__tittle_area"},g.a.createElement("div",{className:"atbd_area_title"},g.a.createElement("h4",null,g.a.createElement("span",{className:"la la-user"}),g.a.createElement(Y.b,{text:"general_info"})))),g.a.createElement("div",{className:"atbdb_content_module_contents"},g.a.createElement("h5",null,g.a.createElement(Y.b,{text:"camp_type"})),g.a.createElement("div",{className:"p-left-20 p-top-10"},g.a.createElement("div",{className:"camp-type-div"},g.a.createElement("div",{className:"form-check",style:{top:"25%"}},g.a.createElement("input",{className:"form-check-input radio-btn p-bottom-10",type:"radio",name:"inperson",id:"inperson",checked:1===this.state.camp_type,onChange:function(e){return s.setState({camp_type:1})}}),g.a.createElement("label",{className:"form-label radio-label",htmlFor:"inperson"},g.a.createElement(Y.b,{text:"in_person_provider"}))),g.a.createElement("img",{className:"virtual-img m-bottom-10",src:O.a,alt:""})),g.a.createElement("div",{className:"camp-type-div"},g.a.createElement("div",{className:"form-check",style:{top:"25%"}},g.a.createElement("input",{className:"form-check-input radio-btn",type:"radio",name:"virtual",id:"virtual",checked:2===this.state.camp_type,onChange:function(e){return s.setState({camp_type:2})}}),g.a.createElement("label",{className:"form-label radio-label",htmlFor:"virtual"},g.a.createElement(Y.b,{text:"virtual"}))),g.a.createElement("img",{className:"virtual-img m-bottom-10",src:I.a,alt:""}))),2===this.state.camp_type&&g.a.createElement("div",null,g.a.createElement("input",{type:"text",name:"virtual-link",className:"form-control",id:"virtual-link",value:this.state.virtual_link,placeholder:l("camp_link_googlemeet_zoom"),onChange:function(e){return s.setState({virtual_link:e.target.value})},required:!0}),g.a.createElement("p",{className:"p-top-15 p-left-15"},g.a.createElement(Y.b,{text:"this_link_will_only"}),g.a.createElement("br",null),g.a.createElement(Y.b,{text:"access_control_must"}))),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{htmlFor:"title",className:"form-label"},g.a.createElement(Y.b,{text:"activity"})," ",g.a.createElement(Y.b,{text:"name"})),g.a.createElement("input",{type:"text",name:"ad_title",className:"form-control",id:"title",value:null!==(e=null===this||void 0===this?void 0:null===(t=this.state)||void 0===t?void 0:t.ad_title)&&void 0!==e?e:"",placeholder:"".concat(l("activity")," ").concat(l("name")),onChange:this.setStateFromInput,required:!0})),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{htmlFor:"desc",className:"form-label"},g.a.createElement(Y.b,{text:"activity"})," ",g.a.createElement(Y.b,{text:"description"})),g.a.createElement("textarea",{id:"desc",name:"ad_description",rows:"8",value:this.state.ad_description,className:"form-control",placeholder:l("description"),onChange:this.setStateFromInput})),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{htmlFor:"custom-field",className:"form-label"},g.a.createElement(Y.b,{text:"category"})),g.a.createElement("div",{className:"select-basic"},g.a.createElement("select",{className:"form-control",value:this.state.category_name,onChange:function(e){s.setState({category_name:e.target.value})}},g.a.createElement("option",{value:"All"},l("select_category_list")),Object.values(this.props.categories).map(function(e,t){return g.a.createElement("option",{key:t,value:e.category},e.category)})))),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{htmlFor:"custom-field",className:"form-label"},g.a.createElement(Y.b,{text:"age_group"})),g.a.createElement("div",{className:"select-basic"},g.a.createElement("select",{className:"form-control",value:this.state.group_name,onChange:function(e){s.setState({group_name:e.target.value})}},g.a.createElement("option",{value:"All"},l("select_age_group")),this.props.groupData.map(function(e,t){return g.a.createElement("option",{key:t,value:e.name},e.name)})))),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{htmlFor:"short_desc",className:"form-label"},g.a.createElement(Y.b,{text:"remember_to_bring"})),g.a.createElement("textarea",{id:"short_desc",name:"remember_bring",rows:"5",className:"form-control",placeholder:l("if_participants_need"),value:this.state.remember_bring,onChange:this.setStateFromInput})),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{htmlFor:"question1",className:"form-label"},g.a.createElement(Y.b,{text:"custom_field"})," 1 (",g.a.createElement(Y.b,{text:"optional"}),")"),g.a.createElement("input",{type:"text",id:"question1",className:"form-control",value:this.state.option_field1_title||"",onChange:function(e){return s.setState({option_field1_title:e.target.value})}})),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{htmlFor:"question2",className:"form-label"},g.a.createElement(Y.b,{text:"custom_field"})," 2 (",g.a.createElement(Y.b,{text:"optional"}),")"),g.a.createElement("input",{type:"text",id:"question2",className:"form-control",value:this.state.option_field2_title||"",onChange:function(e){return s.setState({option_field2_title:e.target.value})}})),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{htmlFor:"custom_terms",className:"form-label"},g.a.createElement(Y.b,{text:"custom_terms"})," (",g.a.createElement(Y.b,{text:"optional"}),")"),g.a.createElement("textarea",{id:"custom_terms",name:"custom_terms",className:"form-control",rows:"5",placeholder:l("this_terms_will_be_included"),value:this.state.custom_terms,onChange:this.setStateFromInput})),1===this.state.camp_type&&g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{htmlFor:"covid-19",className:"form-label"},g.a.createElement(Y.b,{text:"covid_precautions"})),g.a.createElement("textarea",{name:"covid_precautions",id:"covid_precautions",className:"form-control",cols:"30",rows:"3",value:this.state.covid_precautions||l("covid_desc"),onChange:this.setStateFromInput})),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{htmlFor:"location",className:"form-label"},g.a.createElement(Y.b,{text:"address"})),g.a.createElement("input",{id:"autocomplete",className:"form-control",defaultValue:this.state.address,ref:"input",type:"text",placeholder:l("address")}))))),g.a.createElement("div",{className:"col-lg-10 offset-lg-1"},g.a.createElement("div",{className:"atbd_content_module cu-radius"},g.a.createElement("div",{className:"atbd_content_module__tittle_area"},g.a.createElement("div",{className:"atbd_area_title"},g.a.createElement("h4",null,g.a.createElement("span",{className:"la la-calendar"}),g.a.createElement(Y.b,{text:"sessions"})))),g.a.createElement("div",{className:"atbdb_content_module_contents",style:{paddingBottom:0,paddingTop:"5px"}},g.a.createElement("h6",{className:"p-top-10 p-bottom-10"},g.a.createElement(Y.b,{text:"main_session"})," :"),g.a.createElement("div",{className:"directorist row atbdp_faqs_wrapper cu-input-padding m-left-10",id:"faqsID-0"},g.a.createElement("div",{className:"col-md-6 col-sm-12 mb-20"},g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{htmlFor:"title",className:"form-label"},g.a.createElement(Y.b,{text:"pricing"})," ","(".concat((null===(a=JSON.parse(sessionStorage.getItem("store")))||void 0===a?void 0:null===(r=a.currency)||void 0===r?void 0:r.value)||"USD",")")),g.a.createElement("input",{type:"number",name:"price",value:this.state.price,onChange:function(e){return s.setState({price:e.target.value})},className:"form-control",placeholder:l("pricing"),required:!0}))),g.a.createElement("div",{className:"col-md-6 col-sm-12 mb-20"},g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"form-label"},g.a.createElement(Y.b,{text:"attendees"})),g.a.createElement("input",{type:"number",name:"attendees",className:"form-control",value:this.state.availability,onChange:function(e){return s.setState({availability:e.target.value,remaing_availability:e.target.value})},placeholder:l("enter_attendees_num"),required:!0}))),g.a.createElement("div",{className:"col-md-6 col-sm-12"},g.a.createElement("div",{className:"row"},g.a.createElement("div",{className:"col-sm-7 d-flex justify-content-center align-items-center"},g.a.createElement("div",{className:"form-group"},g.a.createElement(L.a,{date:this.state.start_date,handleSetDate:function(e){return s.setState({start_date:e})}}))),g.a.createElement("div",{className:"col-sm-5 d-flex justify-content-center align-items-center"},g.a.createElement("div",{className:"form-group"},g.a.createElement("input",{type:"time",placeholder:"Start",onChange:function(e){return s.setState({start_time:e.target.value})},name:"",value:this.state.start_time,className:"form-control atbdp_faqs_quez"}))))),g.a.createElement("div",{className:"col-md-6 col-sm-12"},g.a.createElement("div",{className:"row"},g.a.createElement("div",{className:"col-sm-7 d-flex justify-content-center align-items-center"},g.a.createElement("div",{className:"form-group"},g.a.createElement(L.a,{date:this.state.end_date,handleSetDate:function(e){return s.setState({end_date:e})}}))),g.a.createElement("div",{className:"col-sm-5 d-flex justify-content-center align-items-center"},g.a.createElement("div",{className:"form-group"},g.a.createElement("input",{type:"time",value:this.state.end_time,onChange:function(e){return s.setState({end_time:e.target.value})},placeholder:"Start",className:"form-control atbdp_faqs_quez"}))))))),g.a.createElement("div",{className:"atbdb_content_module_contents",style:{paddingTop:0}},g.a.createElement("h6",{className:"p-top-10 p-bottom-10"},g.a.createElement(Y.b,{text:"extra_session"})," :"),this.state.sessions.length>0?g.a.createElement(Y.h,{sessions:this.state.sessions,onUpdate:this.updateDate,onDelete:this.deleteDate,price:this.state.price}):g.a.createElement(u.a,{className:"m-bottom-15",variant:"filled",severity:"info"},g.a.createElement(Y.b,{text:"you_can_add_extra_session"})),g.a.createElement("button",{type:"button",className:"cu-hover extra-sesson-btn",onClick:this.addDate},g.a.createElement("span",{className:"plus-sign"},"+"),g.a.createElement(Y.b,{text:"add_extra_session"})))))),g.a.createElement("div",{className:"col-lg-10 offset-lg-1 p-0"},g.a.createElement("div",{className:"atbd_content_module cu-radius"},g.a.createElement("div",{className:"atbd_content_module__tittle_area"},g.a.createElement("div",{className:"atbd_area_title"},g.a.createElement("h4",null,g.a.createElement("span",{className:"la la-calendar-check-o"})," ",g.a.createElement(Y.b,{text:"images_video"})))),g.a.createElement("div",{className:"atbdb_content_module_contents"},g.a.createElement(T,{url:null!==(i=null===this||void 0===this?void 0:null===(o=this.state)||void 0===o?void 0:o.picture)&&void 0!==i?i:[],handleChangeImages:this.setImageList}),g.a.createElement("div",{className:"form-group m-top-30"},g.a.createElement("label",{htmlFor:"videourl",className:"not_empty form-label"},g.a.createElement(Y.b,{text:"video_url"})),g.a.createElement("input",{type:"text",id:"videourl",name:"video",onChange:this.setStateFromInput,value:this.state.video,className:"form-control directory_field",placeholder:l("youtube_video_url")}))))),g.a.createElement("div",{className:"col-lg-10 offset-lg-1 text-center"},g.a.createElement("div",{className:"atbd_term_and_condition_area custom-control custom-checkbox checkbox-outline checkbox-outline-primary",onClick:function(e){s.setState(function(e){return Object(n.a)(Object(n.a)({},e),{},{term_flag:!s.state.term_flag})})},style:{cursor:"pointer",display:"-webkit-inline-box",alignItems:"center"}},g.a.createElement("div",{className:"form-check"},g.a.createElement("input",{type:"checkbox",name:"listing_t",checked:this.state.term_flag||!1,onChange:function(e){s.setState(function(e){return Object(n.a)(Object(n.a)({},e),{},{term_flag:!s.state.term_flag})})},id:"listing_t"}),g.a.createElement("label",{onClick:function(e){s.setState(function(e){return Object(n.a)(Object(n.a)({},e),{},{term_flag:!s.state.term_flag})})},htmlFor:"listing_t",className:"ml-2"},g.a.createElement(Y.b,{text:"i_agree_with_all"})," \xa0")),g.a.createElement("a",{href:"https://www.activities.app/provider-terms-conditions",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"}},g.a.createElement(Y.b,{text:"activity_terms_conditions"}))),g.a.createElement("div",{className:"btn_wrap list_submit m-top-25"},g.a.createElement("button",{className:"btn btn-primary btn-lg listing_submit_btn",onClick:this.addActivity},g.a.createElement("span",{id:"normal-submit"},g.a.createElement(Y.b,{text:"submit_activity"})),g.a.createElement("span",{id:"uploading",className:"hidden"},g.a.createElement(_.a,{name:"spinner",className:"loading-icon",spin:!0}),g.a.createElement(Y.b,{text:"upLoading"}))))))),g.a.createElement(B.a,null))}}]),a}(v.Component);t.default=Object(A.compose)(Object(b.a)(),Object(y.b)(function(e){return{logo:e.logo,categories:e.category.categories,heroImage:e.category.hero_image,groupData:e.category.groupData,list:e.list.advListing}},function(e){return{getCategories:function(){return e(Object(G.c)())},firebaseUpload:function(t,a){return e(Object(H.a)(t,a))},getBannerImage:function(t){return e(Object(G.a)(t))}}}))(z)},627:function(e,t,a){"use strict";a.d(t,"d",function(){return i}),a.d(t,"e",function(){return o}),a.d(t,"c",function(){return s}),a.d(t,"b",function(){return c}),a.d(t,"a",function(){return l});var n=a(637),r=a.n(n),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:console.log("no dispatch"),t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e({type:"SET_APP",payload:{isLoading:null!==t&&void 0!==t&&t}})},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:console.log("no dispatch"),t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e({type:"SET_PAGE_LOADING",payload:{isPageLoading:null!==t&&void 0!==t&&t}})},s=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:console.log("no dispatch"))({type:"SET_CURRENCY",payload:{currency:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}})},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"USD",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",a=arguments.length>2?arguments[2]:void 0;arguments.length>3&&arguments[3];if(e.toUpperCase()!==t.toUpperCase()){var n={method:"get",url:"https://fixer-fixer-currency-v1.p.rapidapi.com/convert?from=USD&to=EUR&amount=120",headers:{"x-rapidapi-key":"3c0631026bmsh2edcdb75bfc4c61p1a87dbjsn8ec559ca56be","x-rapidapi-host":"fixer-fixer-currency-v1.p.rapidapi.com",useQueryString:"true"},params:{from:e,to:t.toUpperCase(),amount:a}};return new Promise(function(e,t){r()(n).then(function(t){t.data.success?e(Number(parseFloat(t.data.result).toFixed(1))):e(Number(a))}).catch(function(t){e(Number(a))})})}return Number(a)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];arguments.length>1&&arguments[1];return e.sort(function(e,t){return e.field-t.field}),e}},628:function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoGBhANDxAQDxAQEBAQEBAQEBAQECMQGw4QKiQsKyokKSkvHyohLxsmMykpIjQjKCstMDAwLSE2OjUuOiovMC0BCgsLEQ8RIBISGy0xITEtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLf/CABEIAOEA4AMBIgACEQEDEQH/xAAaAAEAAwEBAQAAAAAAAAAAAAAAAwQFBgIB/9oACAEBAAAAAO7AAAAAAAAAAAAAAAB7nQeAAABLs3PpSx4QAAJ+gkB45+uAADo7ACDmwAAub4AwaQAA2NMAZuMAAN66AKeAAAOmlAEfMAADqvoAcr8AAOjsACDmwABqa4AycoAAeun9APnMeAAA3bwClggAAs9EA56qAABp7AMnKAAASdODmYgAAGhtgxs0AACfflBHz8AAAsad/wCgPlDNrAAualsABVyqYCXauAAAqYsIWN+QAAB4wKx66OYAAARc35amuAAADJynRWQAAAQc26ScAAAEfMf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oACAECEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//8QAMxAAAgECAwYEBAYDAQAAAAAAAQIDBBEABSESMDFAQVEgIjJxEFJhchNCYoGhsTNgc9H/2gAIAQEAAT8A/wBgigd/SrN7DC5RMfy29zhsomH5b+xxLTunqVl9xy9LRvKbKPcnFLk8aakbbd2wNPiRiqyiOTUDYbuuKuieE2YadGHXlKGjMzbI0A1Y4hhWNQqiwHjmhV1KsLg4r6Iwtbip9J7j/wB5IC+MvpBEgX8x1Y7mupRKhXrxU9jhhY2PEaH35HJ4NuUE8E827zmDYluODi/78jkEdkdu7W3efR3RW+VrftyOTLaFfqWO7zdbwt9LHkAL4pYBGiqOg3dRCJFZTwYWw2hI7G2/U2IPY3wpuAd2TiTUk9zfkMtl24kPYWO7r5diJz+mw5HIan1Rn7l3efVPpjH3NyMMpRlYcVN8I4YAjgRcblmsCTwAucVExkZmPEm/tyWS1G1Fs9UNtznE+xER1fyjk8tq/wAJwT6To2AdxmlZ+K+npXReUynM7Wjc6cFbt482zPjGh+jMP65Wlj2pEHdvHWR7Mjjs3K5HT7Tl+iDT7vHntPZw44MLH7uUpKJ5jZRp1Y4pqdY1CrwHjqIFkUq3A/xisoXhOouvRh15Gmy6STgth8zYpsjRdXO2e3TCqALAAAdBuWUEWIBB6HFTkiNqnkP8YqMtkj1K3Hddd7S5TJJqfIvc4psrjj6bR7tv6nLI5OI2T8y6Yqsnkj1HnXuOm5paR5TZR7nFHlaRanzN8x5OsyxJdfS3zDriqo3iNmHsRwPioKIzNbgo9TYggWNQqiwHKzQq4KsLg4r6Awt3U+k+CKIuwUcSbDFLTCJAo6cTy9TTiVSrdeuJoSjFTxBt8chpr7Uh6eVeZz6m9Mg+1vjlkezCn1G1zOYR7UTj9N/jQ/4o/wDmn9czUeh/tbAx/8QAFBEBAAAAAAAAAAAAAAAAAAAAcP/aAAgBAgEBPwBS/8QAFBEBAAAAAAAAAAAAAAAAAAAAcP/aAAgBAwEBPwBS/9k="},630:function(e,t,a){"use strict";a.d(t,"i",function(){return _}),a.d(t,"h",function(){return b}),a.d(t,"j",function(){return y}),a.d(t,"g",function(){return A}),a.d(t,"b",function(){return w}),a.d(t,"d",function(){return E}),a.d(t,"k",function(){return N}),a.d(t,"e",function(){return x}),a.d(t,"f",function(){return k}),a.d(t,"a",function(){return I}),a.d(t,"c",function(){return P});var n=a(2),r=a(624),i=a.n(r),o=a(625),s=a(134),c=a(676),l=a(180),u=a.n(l),d=a(645),m=a.n(d),f=a(626),p=a.n(f),v=a(179),g=a(647),h={},_=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return function(){var l=Object(o.a)(i.a.mark(function o(l){var d,f,g,_,b,y,A;return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,d="91.218.96.148",i.next=4,m.a.v4();case 4:return f=i.sent,f.includes("188.43")||(d=f),i.next=9,v.a.signInWithPopup(v.e);case 9:if(g=i.sent,""===n){i.next=20;break}return _={id:g.user.uid,name:g.additionalUserInfo.profile.name,profile_picture:g.additionalUserInfo.profile.picture,email:g.additionalUserInfo.profile.email,timestamp:Object(s.a)(),site_credit:0,status:"0",allow_account:!0,holdon_account:!1,rating:0,business_type:a,login_type:"2",date:u()().format("MM/DD/YYYY"),stripe_id:"",registered:!0,ip:d,subscription_plan:""},i.next=14,v.b.collection("advertiser").doc(g.user.uid).set(_,{merge:!0});case 14:sessionStorage.setItem("role",JSON.stringify(e)),sessionStorage.setItem("user",JSON.stringify(_)),t.push("/business-profile"),p.a.success("Sign in successfully with advertiser"),i.next=51;break;case 20:if(!g.additionalUserInfo.isNewUser){i.next=42;break}if("user"!==e){i.next=32;break}return b={id:g.user.uid,name:g.additionalUserInfo.profile.name,profile_picture:g.additionalUserInfo.profile.picture,login_type:"2",status:"0",phone_number:"",email:g.additionalUserInfo.profile.email,timestamp:Object(s.a)(),ip:d},i.next=25,v.b.collection("user").doc(g.user.uid).set(b,{merge:!0});case 25:U(g.user.id),sessionStorage.setItem("role",JSON.stringify(e)),sessionStorage.setItem("user",JSON.stringify(b)),t.push("/"),p.a.success("Sign in successfully with user"),i.next=40;break;case 32:return y={id:g.user.uid,name:g.additionalUserInfo.profile.name,profile_picture:g.additionalUserInfo.profile.picture,email:g.additionalUserInfo.profile.email,timestamp:Object(s.a)(),site_credit:0,status:"0",allow_account:!0,holdon_account:!1,rating:0,registered:!0,business_type:a,login_type:"2",date:u()().format("MM/DD/YYYY"),stripe_id:"",ip:d,subscription_plan:""},i.next=35,v.b.collection("advertiser").doc(g.user.uid).set(y,{merge:!0});case 35:sessionStorage.setItem("role",JSON.stringify(e)),sessionStorage.setItem("user",JSON.stringify(y)),Object(c.isEmpty)(r)||S(r,g.user.uid),t.push("/business-profile"),p.a.success("Sign in successfully with advertiser");case 40:i.next=51;break;case 42:return i.next=44,v.b.collection(e).doc(g.user.uid).get();case 44:if(A=i.sent,console.log(A,e,g,"hello----"),h=A.data()){i.next=50;break}return p.a.warning("You are not registered as "+e),i.abrupt("return",!1);case 50:O(e,t,h);case 51:i.next=57;break;case 53:return i.prev=53,i.t0=i.catch(0),p.a.warning(i.t0.message),i.abrupt("return");case 57:case"end":return i.stop()}},o,null,[[0,53]])}));return function(e){return l.apply(this,arguments)}}()},b=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return function(){var l=Object(o.a)(i.a.mark(function o(l){var d,f,_,b,y,A;return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,m.a.v4();case 3:return d=i.sent,i.next=6,v.a.signInWithPopup(v.d);case 6:if(f=i.sent,""===n){i.next=18;break}return _={id:f.user.uid,name:f.additionalUserInfo.profile.name,profile_picture:f.additionalUserInfo.profile.picture,email:f.additionalUserInfo.profile.email,timestamp:Object(s.a)(),site_credit:0,status:"0",rating:0,registered:!0,allow_account:!0,holdon_account:!1,business_type:a,login_type:"1",date:u()().format("MM/DD/YYYY"),stripe_id:"",ip:d,subscription_plan:""},i.next=11,v.b.collection("advertiser").doc(f.user.uid).set(_,{merge:!0});case 11:sessionStorage.setItem("user",JSON.stringify("user")),sessionStorage.setItem("role",JSON.stringify(e)),Object(g.c)(null===_||void 0===_?void 0:_.email,null===_||void 0===_?void 0:_.name),t.push("/business-profile"),p.a.success("Sign in successfully with advertiser"),i.next=49;break;case 18:if(!f.additionalUserInfo.isNewUser){i.next=41;break}if("user"!==e){i.next=30;break}return b={id:f.user.uid,name:f.additionalUserInfo.profile.name,profile_picture:f.additionalUserInfo.profile.picture,login_type:"0",status:"0",phone_number:"",email:f.additionalUserInfo.profile.email,timestamp:Object(s.a)(),ip:d},i.next=23,v.b.collection("user").doc(f.user.uid).set(b,{merge:!0});case 23:U(f.user.id),sessionStorage.setItem("role",JSON.stringify(e)),sessionStorage.setItem("user",JSON.stringify(b)),t.push("/"),p.a.success("Sign in successfully with user"),i.next=39;break;case 30:return y={id:f.user.uid,name:f.additionalUserInfo.profile.name,profile_picture:f.additionalUserInfo.profile.picture,email:f.additionalUserInfo.profile.email,timestamp:Object(s.a)(),site_credit:0,status:"0",rating:0,registered:!0,allow_account:!0,holdon_account:!1,business_type:a,login_type:"1",date:u()().format("MM/DD/YYYY"),stripe_id:"",ip:d,subscription_plan:""},i.next=33,v.b.collection("advertiser").doc(f.user.uid).set(y,{merge:!0});case 33:sessionStorage.setItem("user",JSON.stringify("user")),sessionStorage.setItem("role",JSON.stringify(e)),Object(c.isEmpty)(r)||S(r,f.user.uid),Object(g.c)(null===y||void 0===y?void 0:y.email,null===y||void 0===y?void 0:y.name),t.push("/business-profile"),p.a.success("Sign in successfully with advertiser");case 39:i.next=49;break;case 41:return i.next=43,v.b.collection(e).doc(f.user.uid).get();case 43:if(A=i.sent,h=A.data()){i.next=48;break}return p.a.warning("You are not registered as "+e),i.abrupt("return",!1);case 48:O(e,t,h);case 49:i.next=55;break;case 51:return i.prev=51,i.t0=i.catch(0),p.a.warning(i.t0.message),i.abrupt("return");case 55:return i.abrupt("return",e);case 56:case"end":return i.stop()}},o,null,[[0,51]])}));return function(e){return l.apply(this,arguments)}}()},y=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return function(){var d=Object(o.a)(i.a.mark(function o(d){var f,h,_,b,y,A;return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,m.a.v4();case 3:if(f=i.sent,h=null,""===r){i.next=11;break}return i.next=8,v.a.signInWithEmailAndPassword(e.email,e.password);case 8:h=i.sent,i.next=14;break;case 11:return i.next=13,v.a.createUserWithEmailAndPassword(e.email,e.password);case 13:h=i.sent;case 14:if("user"!==a){i.next=21;break}return _={id:h.user.uid,name:e.name,profile_picture:"",login_type:"0",email:e.email,status:"0",phone_number:e.phone,timestamp:Object(s.a)(),ip:f},i.next=18,v.b.collection(a).doc(h.user.uid).set(_);case 18:U(h.user.uid),i.next=29;break;case 21:return A={timestamp:Object(s.a)(),site_credit:0,rating:0,login_type:"0",status:"0",date:u()().format("MM/DD/YYYY"),id:h.user.uid,allow_account:!0,holdon_account:!1,stripe_id:"",subscription_plan:"",registered:!0,profile_picture:"",ip:f},delete(e=Object(n.a)(Object(n.a)({},e),A)).password,i.next=26,v.b.collection(a).doc(h.user.uid).set(e);case 26:Object(c.isEmpty)(l)||S(l,h.user.uid),e.sign_type="password",Object(g.c)(null===(b=e)||void 0===b?void 0:b.email,null===(y=e)||void 0===y?void 0:y.name);case 29:t.push({pathname:"/verify-email-check",state:{email:h.user.email,verifyStatus:h.user.emailVerified,type:a,userData:e}}),i.next=36;break;case 32:return i.prev=32,i.t0=i.catch(0),p.a.warning(i.t0.message),i.abrupt("return");case 36:return i.abrupt("return",!0);case 37:case"end":return i.stop()}},o,null,[[0,32]])}));return function(e){return d.apply(this,arguments)}}()},A=function(e,t){return function(){var a=Object(o.a)(i.a.mark(function a(n){var r,o,s,c,l,u,d,m;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,v.a.signInWithEmailAndPassword(e.email,e.password);case 3:return o=a.sent,a.next=6,v.b.collection(e.userType).doc(o.user.uid).get();case 6:if((s=a.sent).exists){a.next=10;break}return p.a.warning("You are not registered as "+e.userType),a.abrupt("return",!1);case 10:if(!((null===s||void 0===s?void 0:null===(r=s.data())||void 0===r?void 0:r.email)||!1)){a.next=27;break}if(u=null!==(c=null===(l=s.data())||void 0===l?void 0:l.phone_verificated)&&void 0!==c&&c,!o.user.emailVerified&&!u){a.next=24;break}return a.next=16,v.b.collection(e.userType).doc(o.user.uid).get();case 16:if(d=a.sent,m=d.data()){a.next=21;break}return p.a.warning("You are not registered as "+e.userType),a.abrupt("return",!1);case 21:O(e.userType,t,m),a.next=25;break;case 24:t.push({pathname:"/verify-email-check",state:{email:o.user.email,type:e.userType}});case 25:a.next=28;break;case 27:"advertiser"===e.userType&&t.push("/confirm-provider-information");case 28:a.next=34;break;case 30:return a.prev=30,a.t0=a.catch(0),p.a.warning(a.t0.message),a.abrupt("return");case 34:return a.abrupt("return",!0);case 35:case"end":return a.stop()}},a,null,[[0,30]])}));return function(e){return a.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(o.a)(i.a.mark(function t(a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:v.a.sendPasswordResetEmail(e).then(function(e){p.a.success("Please check your mail box!")}).catch(function(e){p.a.warning(e.message)});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},E=function(){return function(){var e=Object(o.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{v.a.signOut().then(function(){sessionStorage.clear(),window.location.href="/"})}catch(t){}case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},N=function(e){return function(){var t=Object(o.a)(i.a.mark(function t(a){var n,r,o,c,l,u,d,m,f;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,console.log(e,"userDatae"),r=JSON.parse(sessionStorage.getItem("user")),o=JSON.parse(sessionStorage.getItem("role")),c=r.sign_type,delete e.avatar,delete e.compressedAvatar,n=r,"string"===typeof e.displayAvatar){t.next=23;break}if(!("string"!==typeof e.displayAvatar[0]&&e.displayAvatar.length>0)){t.next=22;break}return l=v.f.ref(),u="user_"+Object(s.a)().toISOString().slice(0,10)+"_"+e.displayAvatar[0].name,d="advertiser_profile_picture/".concat(u),"user"===o&&(d="profile_picture/".concat(u)),t.next=16,l.child(d).put(e.displayAvatar[0]);case 16:return m=t.sent,t.next=19,m.ref.getDownloadURL();case 19:n.profile_picture=t.sent,t.next=23;break;case 22:0===e.displayAvatar.length&&(n.profile_picture="");case 23:if("user"===o?(n.city=e.city,n.address=e.address):"string"===typeof e.address?n.address=e.prevAddress:n.address=e.address,n.name=e.name,n.phone_number=e.phone_number,n.timestamp=Object(s.a)(),delete n.sign_type,""===e.curpassword||""===e.newpassword){t.next=34;break}return t.next=31,v.a.signInWithEmailAndPassword(e.email,e.curpassword);case 31:return f=v.a.currentUser,t.next=34,f.updatePassword(e.newpassword);case 34:return t.next=36,v.b.collection(o).doc(r.id).update(n);case 36:n.sign_type=c,sessionStorage.setItem("user",JSON.stringify(n)),p.a.success("Update successfully!"),window.location.href="/edit-account",t.next=45;break;case 42:t.prev=42,t.t0=t.catch(0),p.a.warning(t.t0.message);case 45:case"end":return t.stop()}},t,null,[[0,42]])}));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(o.a)(i.a.mark(function t(a){var r,o,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=JSON.parse(sessionStorage.getItem("user")),t.next=3,v.b.collection("advertiser").doc(r.id).get();case 3:return o=t.sent,s=o.data(),delete e.name,delete e.avatar,delete e.phone_number,s=Object(n.a)(Object(n.a)({},s),e),t.next=11,v.b.collection("advertiser").doc(r.id).set(s);case 11:p.a.success("Business information is added successfully!"),sessionStorage.setItem("user",JSON.stringify(s));case 13:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},U=function(){var e=Object(o.a)(i.a.mark(function e(t){var a,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(sessionStorage.getItem("bookingData")),e.next=3,m.a.v4();case 3:if(r=e.sent,!(a&&a.length>0)){e.next=8;break}return e.next=7,Promise.all(a.map(function(){var e=Object(o.a)(i.a.mark(function e(a){var o,s,c,l,d,m,f,p,g;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.b.collection("advertiser").doc(a.listingData.advertiser_id).get();case 2:if(o=e.sent,s=o.data(),c=12.9,!s.booking_fees_id){e.next=12;break}if(l=u()().unix(),!(s.booking_fees_limit_date.seconds>l)){e.next=12;break}return e.next=10,v.b.collection("booking_fees").doc(s.booking_fees_id).get();case 10:d=e.sent,c=d.data().fees;case 12:return m=void 0===s.insurance_file?"":s.insurance_file,f={ad_id:a.listingData.listing_id,advertiser_id:a.listingData.advertiser_id,cancel_transaction_id:"",insurance_file:m,child_dob:u()(a.child_dob).format("MM/DD/YYYY"),coupon_code:"",qr_code:"",status:"1",price:a.price,fee:c,child_image:"",ip:r,timestamp:v.c.firestore.FieldValue.serverTimestamp(),transaction_id:"",user_id:t,date:u()().format("MM/DD/YYYY"),address:a.address,child_allergy:a.child_allergy,child_gender:a.child_allergy,child_medication:a.child_allergy,child_name:a.child_name,extra_session_id:"main"===a.extra_session_id?"":a.extra_session_id,extra_session_title:a.extra_session_title,emergency_contact_number_1:a.emergency_contact_number_1,emergency_contact_number_2:a.emergency_contact_number_2,option_field1_title:a.option_field1_title,option_field2_title:a.option_field2_title,guardians:a.guardians,surname:a.surname},e.next=16,v.b.collection("booking").where("ad_id","==",a.listingData.listing_id).where("user_id","==",t).where("status","==","1").get();case 16:if(p=e.sent,!((g=p.docs.map(function(e){return Object(n.a)(Object(n.a)({},e.data()),{},{id:e.id})})).length>0)){e.next=23;break}return e.next=21,v.b.collection("booking").doc(g[0].id).set(f);case 21:e.next=25;break;case 23:return e.next=25,v.b.collection("booking").add(f);case 25:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 7:case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),O=function(e,t,a){var n=JSON.parse(sessionStorage.getItem("url")),r=JSON.parse(sessionStorage.getItem("activityId"));if(a.sign_type="password","user"===e)sessionStorage.setItem("user",JSON.stringify(a)),sessionStorage.setItem("role",JSON.stringify(e)),U(a.id),n?r?t.push({pathname:n,state:{params:{listing_id:r}}}):"manage-plan"===n?t.push("/"):t.push(n):t.push("/"),p.a.success("Sign in successfully with user!");else{if(!1===a.allow_account)return t.push("/"),p.a.warning("This account is temporarily blocked, contact your system administrator."),!1;sessionStorage.setItem("user",JSON.stringify(a)),sessionStorage.setItem("role",JSON.stringify(e)),n?t.push(n):(p.a.success("Sign in successfully with advertiser!"),t.push("/advertiser-dashboard"))}},k=function(e,t,a){return function(){var n=Object(o.a)(i.a.mark(function n(r){var o,s,c,l,d,m;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.b.collection("advertiser").doc(e.id).get();case 2:if(!(o=n.sent).exists){n.next=21;break}return s="insurance_"+e.id+"_"+u()().format("YYYY-MM-DD hh:mm:ss")+"_"+t.name,n.next=7,v.f.ref().child("insurances/".concat(s)).put(t);case 7:return c=n.sent,n.next=10,c.ref.getDownloadURL();case 10:return l=n.sent,d={insuranceUrl:l,date:u()().format("ddd, MM/DD/YYYY hh:mm:ss A")},m=[],void 0===o.data().insurances||0===o.data().insurances.length?m.push(d):(m=o.data().insurances).push(d),e.insurances=m,sessionStorage.setItem("user",JSON.stringify(e)),n.next=18,v.b.collection("advertiser").doc(e.id).update({insurances:m});case 18:return a.push("/insurance-info"),p.a.success("Your insurance information send successfully!"),n.abrupt("return",m);case 21:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},I=function(e,t){return function(){var a=Object(o.a)(i.a.mark(function a(n){var r,o;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=JSON.parse(sessionStorage.getItem("user")),a.next=4,v.b.collection("advertiser").doc(r.id).get();case 4:if(!a.sent.exists){a.next=20;break}if(o=decodeURIComponent(t.insuranceUrl.split("/").pop().split("?").shift()),!Boolean(o)){a.next=10;break}return a.next=10,v.c.storage().ref().child(null!==o&&void 0!==o?o:"").delete();case 10:if(1!==r.insurances.length){a.next=16;break}return a.next=13,v.b.collection("advertiser").doc(r.id).update({insurances:v.c.firestore.FieldValue.delete()});case 13:delete r.insurances,a.next=19;break;case 16:return r.insurances=e,a.next=19,v.b.collection("advertiser").doc(r.id).update({insurances:e});case 19:sessionStorage.setItem("user",JSON.stringify(r));case 20:a.next=27;break;case 22:return a.prev=22,a.t0=a.catch(0),console.log(a.t0),p.a.warning(a.t0.message),a.abrupt("return",!1);case 27:return a.abrupt("return",!0);case 28:case"end":return a.stop()}},a,null,[[0,22]])}));return function(e){return a.apply(this,arguments)}}()},P=function(){return function(){var e=Object(o.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=v.c.auth().currentUser,(n=JSON.parse(sessionStorage.getItem("role")))&&a&&v.b.collection(n).onSnapshot(function(e){var n=e.docs.map(function(e){return e.data()});if(h){var r=n.filter(function(e){return(null===e||void 0===e?void 0:e.id)===(null===a||void 0===a?void 0:a.uid)});r.length>0&&(t({type:"SET_CURRENT_USER",payload:r[0]}),sessionStorage.setItem("user",JSON.stringify(r[0])))}});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},S=function(){var e=Object(o.a)(i.a.mark(function e(t,a){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.b.collection("ad_listing").add({address:null===t||void 0===t?void 0:t.address,ad_title:null===t||void 0===t?void 0:t.company,ad_description:null===t||void 0===t?void 0:t.description,camp_type:1,category_name:null===t||void 0===t?void 0:t.category,date:u()().format("MM/DD/YYYY"),timestamp:Object(s.a)(),status:"6",is_feature_day_remaining:0,is_feature_plan:"",is_feature:"1",advertiser_id:a,ad_click:0,ad_view:0,company:null!==(n=null===t||void 0===t?void 0:t.company)&&void 0!==n?n:""});case 3:return r=e.sent,e.next=6,v.b.collection("ad_listing").doc(r.id).update({id:r.id});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0,"signup claim");case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,a){return e.apply(this,arguments)}}()},631:function(e,t,a){"use strict";a.d(t,"d",function(){return A}),a.d(t,"g",function(){return w}),a.d(t,"c",function(){return E}),a.d(t,"a",function(){return N}),a.d(t,"f",function(){return x}),a.d(t,"i",function(){return U}),a.d(t,"h",function(){return O}),a.d(t,"b",function(){return k}),a.d(t,"e",function(){return I});var n=a(624),r=a.n(n),i=a(182),o=a(2),s=a(625),c=a(186),l=a(654),u=a.n(l),d=a(134),m=a(180),f=a.n(m),p=a(627),v=a(626),g=a.n(v),h=a(628),_=a.n(h),b=a(179),y=a(41),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"USD";return function(){var t=Object(s.a)(r.a.mark(function t(a){var n,l,d,m,v,h,A;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=[],l=1,d=JSON.parse(sessionStorage.getItem("user")),t.next=5,b.b.collection("favourites_ad").get();case 5:return m=t.sent,v=m.docs.map(function(e){return e.data()}),d&&(n=v.filter(function(e){return e.user_id===d.id})),t.next=10,b.b.collection("reviews").get();case 10:return h=t.sent,A=h.docs.map(function(e){return e.data()}),t.next=14,b.b.collection("ad_listing").where("status","in",["0","6"]).onSnapshot(function(){var t=Object(s.a)(r.a.mark(function t(d){var m,v,g,h,w,E,N;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return m=[],v=f()().unix(),g=d.docs.map(function(e){return e.data()}),h=g.filter(function(e){return""!==e.advertiser_id&&"0"===(null===e||void 0===e?void 0:e.status)}),t.next=6,Promise.all(h.map(function(){var t=Object(s.a)(r.a.mark(function t(a,s){var c,u,d,g,h,y,w,E,N,x,U,O,k,I,S,j,C,D,F,M,Y,T,G,H,R;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.b.collection("ad_listing").doc(a.id).collection("sessions").orderBy("start_date","asc").get();case 2:if(N=t.sent,!((x=N.docs.map(function(e){return Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id})})).length>0)){t.next=9;break}return t.next=7,P(x,a.price_currency,e);case 7:U=t.sent,x=U.newSessions;case 9:return O=(O=[{start_date:f()(1e3*(a.start_date.seconds+a.start_date.nanoseconds/1e9)).format("MM/DD/YYYY HH:mm"),end_date:f()(1e3*(a.end_date.seconds+a.end_date.nanoseconds/1e9)).format("MM/DD/YYYY HH:mm"),start_time:a.start_time,end_time:a.end_time}].concat(Object(i.a)(x))).sort(function(e,t){return f()(e.start_date).unix()-f()(t.start_date).unix()}),k=!1,t.next=14,b.b.collection("advertiser").doc(a.advertiser_id).get();case 14:if(I=t.sent,void 0===(S=I.data()).booking_fees_limit_date){t.next=20;break}if(!(S.booking_fees_limit_date.seconds<v)){t.next=20;break}return t.next=20,b.b.collection("advertiser").doc(a.advertiser_id).update({booking_fees_id:b.c.firestore.FieldValue.delete(),booking_fees_limit_date:b.c.firestore.FieldValue.delete()});case 20:return j=A.filter(function(e){return e.id_listing===a.id}),C=j.length>0?j.map(function(e){return e.rating}).reduce(function(e,t){return e+t}):0,D=C>0?(C/j.length).toFixed(1):0,n.length>0&&(F=n.filter(function(e){return e.ad_id===a.id}),k=F.length>0),E=(null===S||void 0===S?void 0:S.profile_picture)||_.a,t.next=27,b.b.collection("coupon").where("ad_listing_id","==",a.id).where("type_coupon","==","advertiser").where("status","==","1").get();case 27:return M=t.sent,Y=[],M.empty||M.docs.map(function(e){return Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id})}).forEach(function(e){e.limit_date.seconds>f()().unix()&&e.used!==e.availability&&(Y=[].concat(Object(i.a)(Y),[e]))}),T="/listing-details/".concat((null===a||void 0===a?void 0:null===(c=a.address)||void 0===c?void 0:c.city)||"city","/").concat((null===a||void 0===a?void 0:a.category_name)||"category","/").concat((null===S||void 0===S?void 0:S.name)||"name","/").concat(a.ad_title||"activity","/").concat(null!==(u=a.id)&&void 0!==u?u:""),G=((null===a||void 0===a?void 0:null===(d=a.address)||void 0===d?void 0:d.street)?a.address.street+", ":"")+((null===a||void 0===a?void 0:null===(g=a.address)||void 0===g?void 0:g.city)?a.address.city+", ":"")+((null===a||void 0===a?void 0:null===(h=a.address)||void 0===h?void 0:h.state)?a.address.state+", ":"")+((null===a||void 0===a?void 0:null===(y=a.address)||void 0===y?void 0:y.country)?a.address.country:""),t.next=34,Object(p.b)((null===a||void 0===a?void 0:a.price_currency)||"USD",e,Number(a.price));case 34:H=t.sent,R={img:a.picture,user:E,ad_description:a.ad_description,listing_id:a.id,id:l++,title:a.ad_title,rating:D,boost_date_limit:void 0===a.boost_date_limit?"":a.boost_date_limit,price:a.price,priceCurrency:(null===a||void 0===a?void 0:a.price_currency)||"usd",displayPrice:H,author:(null===S||void 0===S?void 0:S.name)||"",couponList:Y,location:G,phone:(null===S||void 0===S?void 0:S.phone)||"",category:a.category_name,icon:"futbol",start_time:a.start_time,availability:a.availability,remaing_availability:a.remaing_availability,end_time:a.end_time,favFlag:k,start_date:f()(1e3*(a.start_date.seconds+a.start_date.nanoseconds/1e9)).format("MM/DD/YYYY HH:mm"),end_date:f()(1e3*(a.end_date.seconds+a.end_date.nanoseconds/1e9)).format("MM/DD/YYYY HH:mm"),adver_name:(null===S||void 0===S?void 0:S.name)||"",adver_email:(null===S||void 0===S?void 0:S.email)||"",adver_phone:(null===S||void 0===S?void 0:S.phone_number)||"",advertiser_id:a.advertiser_id,adver_address:(null===S||void 0===S?void 0:S.address)||"",posted_date:a.date,extraSessions:x,sessions:O,selSessionKey:0,company:null!==(w=null===a||void 0===a?void 0:a.company)&&void 0!==w?w:"",option_field1_title:(null===a||void 0===a?void 0:a.option_field1_title)||"",option_field2_title:(null===a||void 0===a?void 0:a.option_field2_title)||"",custom_terms:(null===a||void 0===a?void 0:a.custom_terms)||"",url:T.replace(/ /g,"-"),virtual_link:(null===a||void 0===a?void 0:a.virtual_link)||"",camp_type:(null===a||void 0===a?void 0:a.camp_type)||"",video_url:a.video,covid_precautions:a.covid_precautions},m=[].concat(Object(i.a)(m),[R]);case 37:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()));case 6:return w=[],t.next=9,b.b.collection("csv_files").where("status","==","0").get();case 9:if(E=t.sent,d.empty){t.next=16;break}return N=E.docs.map(function(e){return e.data()}),console.log(N,"csvFilseUrls"),t.next=15,Promise.all(N.map(function(){var e=Object(s.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,a){u()("".concat(c.c).concat(t.url)).then(function(t){return e(t)}).catch(function(t){return e([])})});case 2:n=e.sent,console.log(t.url,"index :",a),m=[].concat(Object(i.a)(m),Object(i.a)(n));case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()));case 15:m.forEach(function(e){if(Boolean(null===e||void 0===e?void 0:e.listing_id))w=[].concat(Object(i.a)(w),[e]);else{var t,a,n=(null===g||void 0===g?void 0:null===(t=g.filter(function(t){var a;return t.category_name===e.category&&(null!==(a=null===t||void 0===t?void 0:t.company)&&void 0!==a?a:"").includes(e.company)}))||void 0===t?void 0:t.length)>0;if(Boolean(e.images)&&Number(null===e||void 0===e?void 0:null===(a=e.images)||void 0===a?void 0:a.length)>0&&!n){var r,s,c,l,u=(null===e||void 0===e?void 0:e.category)?null===e||void 0===e?void 0:null===(r=e.category)||void 0===r?void 0:r.replace(/\//g,"").replace(/&/g,"").replace(/-/g,""):"category",d=(null===e||void 0===e?void 0:e.company)?null===e||void 0===e?void 0:e.company.replace(/\//g,"").replace(/&/g,"").replace(/-/g,""):"company",m=(null===e||void 0===e?void 0:e.city)?null===e||void 0===e?void 0:e.city.replace(/\//g,"").replace(/&/g,"").replace(/-/g,""):"city",f="/listing-details/".concat(null!==m&&void 0!==m?m:"city","/").concat(null!==u&&void 0!==u?u:"category","/").concat(null!==d&&void 0!==d?d:"company");w=[].concat(Object(i.a)(w),[Object(o.a)(Object(o.a)({},e),{},{activityType:"claim",location:e.address,img:null!==(s=null===e||void 0===e?void 0:null===(c=e.images)||void 0===c?void 0:null===(l=c.split(","))||void 0===l?void 0:l.slice(0,3))&&void 0!==s?s:[],title:e.company,url:f.replace(/ /g,"-")})])}}});case 16:a({type:y.b,payload:w});case 17:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),g.a.warning(t.t0.message);case 19:case"end":return t.stop()}},t,null,[[0,16]])}));return function(e){return t.apply(this,arguments)}}()},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return function(){var a=Object(s.a)(r.a.mark(function a(n){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,b.b.collection("ad_listing").where("advertiser_id","==",e).onSnapshot(function(){var e=Object(s.a)(r.a.mark(function e(a){var c,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=a.docs.map(function(e){return e.data()}).filter(function(e){return""!==e.id}),l=[],e.t0=c.length>0,!e.t0){e.next=6;break}return e.next=6,Promise.all(c.map(function(){var e=Object(s.a)(r.a.mark(function e(a){var n,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===a.id){e.next=12;break}return e.next=3,b.b.collection("ad_listing/".concat(a.id,"/sessions")).orderBy("start_date","asc").get();case 3:return n=e.sent,s=n.docs.map(function(e){return Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id})}),a.sessions=s,e.next=8,Object(p.b)((null===a||void 0===a?void 0:a.price_currency)||"USD",t,a.price);case 8:a.displayPrice=e.sent,l=[].concat(Object(i.a)(l),[a]),e.next=13;break;case 12:l.push(a);case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 6:n({type:"SET_MYLISTING",payload:Object(p.a)(l.filter(function(e){return"5"!==e.status}),"timestamp")}),Object(p.e)(n,!1);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:a.next=8;break;case 5:a.prev=5,a.t0=a.catch(0),console.log(a.t0.message);case 8:case"end":return a.stop()}},a,null,[[0,5]])}));return function(e){return a.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(s.a)(r.a.mark(function t(a){var n,i,s,c,l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(e,"id"),t.next=4,b.b.collection("ad_listing").get();case 4:if((n=t.sent).empty){t.next=16;break}if(i=n.docs.map(function(e){return e.data()}),!((s=i.filter(function(t){return t.id===e})).length>0)){t.next=14;break}return t.next=11,b.b.collection("ad_listing").doc(s[0].id).collection("sessions").get();case 11:c=t.sent,l=c.docs.map(function(e){return Object(o.a)({id:e.id},e.data())}),s[0].sessions=l;case 14:console.log(e,"filter"),a({type:"GET_ACTIVITY_LISTING",payload:s});case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),g.a.info(t.t0.message);case 21:case"end":return t.stop()}},t,null,[[0,18]])}));return function(e){return t.apply(this,arguments)}}()},N=function(e){return function(){var t=Object(s.a)(r.a.mark(function t(a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.b.collection("ad_listing").doc(e).update({status:"5"});case 3:g.a.success("Activity deleted successfully!"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),g.a.warning(t.t0.message);case 9:case"end":return t.stop()}},t,null,[[0,6]])}));return function(e){return t.apply(this,arguments)}}()},x=function(){return function(){var e=Object(s.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.b.collection("ad_listing").where("status","==","0").onSnapshot(function(){var e=Object(s.a)(r.a.mark(function e(a){var n,i,o,c,l,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.docs.map(function(e){return e.data()}),i="",o="",c="",l="",u="",!(n.length>0)){e.next=7;break}return e.next=5,Promise.all(n.map(function(){var e=Object(s.a)(r.a.mark(function e(t){var a,n,s,d,m;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.b.collection("advertiser").doc(t.advertiser_id).get();case 2:a=e.sent,n=a.data(),s="","string"===typeof t.address&&""!==t.address?((m=t.address.split(",")).forEach(function(e){s=s+e+","}),d="https://www.activities.app/".concat(m[0],"/").concat(t.category_name,"/").concat(n.name,"/").concat(t.ad_title)):"object"===t.address&&(s=t.address.city+","+t.address.street+","+t.address.state+","+t.address.country+","+t.address.postal_code+",",d="https://www.activities.app/".concat(t.address.city,"/").concat(t.category_name,"/").concat(n.name,"/").concat(t.ad_title)),s=s+t.category_name+","+t.remember_bring,i=i+t.ad_title+",",o=o+t.ad_description+",",c=c+d+",",l=l+s+",",u=u+(t.picture.length>0&&t.picture[0])+",";case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 5:t({type:"SET_META_DATA",payload:{title:i,description:o,url:c,keywords:l,img:u}});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},U=function(e){return function(){var t=Object(s.a)(r.a.mark(function t(a){var n,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.b.collection("ad_listing").doc(e).get();case 2:return n=t.sent,i=n.data(),t.next=6,b.b.collection("ad_listing").doc(e).update({ad_click:i.ad_click+1,ad_view:i.ad_view+1});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},O=function(e,t,a,n,i){return function(){var o=Object(s.a)(r.a.mark(function o(s){var c,l,u,m;return r.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b.b.collection("user").doc(t).get();case 2:(c=r.sent).exists?(u=c.data(),m={rating:a,review:n,profile_picture:null!==(l=null===u||void 0===u?void 0:u.profile_picture)&&void 0!==l?l:"",name:u.name,id_user:t,id_listing:e,date:Object(d.a)(),status:"1"},b.b.collection("reviews").doc().set(m).then(function(e){g.a.success("successfully your comment. Thank you!"),i.push("/")})):g.a.warning("Your account deleted!");case 4:case"end":return r.stop()}},o)}));return function(e){return o.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(s.a)(r.a.mark(function t(a){var n,i,o;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.b.collection("ad_listing").doc(e).get();case 3:n=t.sent,i="",n.exists&&(o=n.data(),i=o.picture.length>0?o.picture[0]:""),a({type:"SET_ACTIVITY_IMAGE",payload:i}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0.message,"comment questionnaire");case 12:case"end":return t.stop()}},t,null,[[0,9]])}));return function(e){return t.apply(this,arguments)}}()},I=function(){return function(){var e=Object(s.a)(r.a.mark(function e(t){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=[],e.next=4,b.b.collection("merchant_support").where("status","==","1").get();case 4:(n=e.sent).empty||(a=(a=n.docs.map(function(e){return e.data()})).sort(function(e,t){return e.timestamp.seconds-t.timestamp.seconds})),t({type:"SET_MERCHANT_INFO",payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}()},P=function(){var e=Object(s.a)(r.a.mark(function e(){var t,a,n,o,c,l,u=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:[],a=u.length>1&&void 0!==u[1]?u[1]:"USD",n=u.length>2&&void 0!==u[2]?u[2]:"USD",o=[],c=f()().unix(),l=!1,e.next=8,Promise.all(t.map(function(){var e=Object(s.a)(r.a.mark(function e(t){var s,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=f()(1e3*(t.end_date.seconds+t.end_date.nanoseconds/1e9)).format("YYYY-MM-DD HH:mm"),u=f()(s).unix(),c<u&&(l=!0),t.start_date=f()(1e3*t.start_date.seconds).format("MM/DD/YYYY HH:mm"),t.end_date=f()(1e3*t.end_date.seconds).format("MM/DD/YYYY HH:mm"),e.next=7,Object(p.b)(a,n,Number(t.price));case 7:t.displayPrice=e.sent,o=[].concat(Object(i.a)(o),[t]);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 8:return e.abrupt("return",{newSessions:o,dateOverflag:l});case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},632:function(e,t,a){"use strict";a.d(t,"c",function(){return u}),a.d(t,"b",function(){return d}),a.d(t,"a",function(){return m}),a.d(t,"d",function(){return f});var n=a(624),r=a.n(n),i=a(625),o=a(179),s=a(41),c=a(626),l=a.n(c),u=function(){return function(){var e=Object(i.a)(r.a.mark(function e(t){var a,n,c,u,d,m;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=[],n=[],e.next=5,o.b.collection("category").where("status","==",0).get();case 5:if((c=e.sent).empty){e.next=17;break}if(u=c.docs.map(function(e){return e.data()}),0!==(d=u.filter(function(e){return""!==e.category_webimage&&e.category_webimage})).length){e.next=15;break}return d=u.filter(function(e){return""!==e.category_image}),e.next=13,Promise.all(d.map(function(){var e=Object(i.a)(r.a.mark(function e(t,n){var i,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.collection("ad_listing").where("category_name","==",t.category_name).where("status","==","0").get();case 2:i=e.sent,s=i.size,c={id:n+1,category_id:t.id,category:t.category_name,list:s,img:t.category_image},a.push(c);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()));case 13:e.next=17;break;case 15:return e.next=17,Promise.all(d.map(function(){var e=Object(i.a)(r.a.mark(function e(t,n){var i,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.collection("ad_listing").where("category_name","==",t.category_name).where("status","==","0").get();case 2:i=e.sent,s=i.size,c={id:n+1,category_id:t.id,category:t.category_name,list:s,img:t.category_webimage},a.push(c);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()));case 17:return e.next=19,o.b.collection("camp_age_range").where("status","==","1").get();case 19:(m=e.sent).empty||(n=m.docs.map(function(e){return e.data()})),t({type:s.a,payload:{categories:a,groupData:n}}),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(0),l.a.warning(e.t0.message),console.log(e.t0);case 28:case"end":return e.stop()}},e,null,[[0,24]])}));return function(t){return e.apply(this,arguments)}}()},d=function(){var e=Object(i.a)(r.a.mark(function e(){var t,a,n,i=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"",a=i.length>1&&void 0!==i[1]?i[1]:console.log,n=i.length>2&&void 0!==i[2]?i[2]:console.log,e.prev=3,e.next=6,o.b.collection("banners").where("route","==",t).where("status","==","0").where("application","==","web").onSnapshot(function(e){if(e.empty)a(null);else{var n=e.docs.map(function(e){return e.data()});if("/homepage"===t){var r=[];n.forEach(function(e){r.push(e.image)}),a(r)}else a(n[0].image)}});case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0,"error"),n(e.t0);case 12:case"end":return e.stop()}},e,null,[[3,8]])}));return function(){return e.apply(this,arguments)}}(),m=function(e){return function(){var t=Object(i.a)(r.a.mark(function t(a){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o.b.collection("banners").where("route","==",e).where("status","==","0").where("application","==","web").onSnapshot(function(t){if(!t.empty){var n=t.docs.map(function(e){return e.data()});if("/homepage"===e){var r=[];n.forEach(function(e){r.push(e.image)}),a({type:"SET_HERO_IMAGE",payload:r})}else a({type:"SET_HERO_IMAGE",payload:n[0].image})}});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},f=function(){return function(){var e=Object(i.a)(r.a.mark(function e(t){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.b.collection("header_message").get();case 3:(a=e.sent).empty||(n=a.docs.map(function(e){return e.data()}),t({type:"SET_HEADER_MESSAGE",payload:n})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()}},633:function(e,t,a){"use strict";a.d(t,"p",function(){return b}),a.d(t,"o",function(){return y}),a.d(t,"j",function(){return A}),a.d(t,"d",function(){return w}),a.d(t,"e",function(){return E}),a.d(t,"q",function(){return N}),a.d(t,"l",function(){return x}),a.d(t,"a",function(){return U}),a.d(t,"h",function(){return O}),a.d(t,"i",function(){return k}),a.d(t,"c",function(){return I}),a.d(t,"m",function(){return P}),a.d(t,"b",function(){return S}),a.d(t,"g",function(){return j}),a.d(t,"s",function(){return C}),a.d(t,"r",function(){return D}),a.d(t,"n",function(){return F}),a.d(t,"t",function(){return M}),a.d(t,"k",function(){return Y}),a.d(t,"f",function(){return T});var n=a(182),r=a(624),i=a.n(r),o=a(2),s=a(625),c=a(134),l=a(637),u=a.n(l),d=a(180),m=a.n(d),f=a(645),p=a.n(f),v=a(626),g=a.n(v),h=a(179),_=a(627),b=function(e,t,a){return function(){var n=Object(s.a)(i.a.mark(function n(r){var s,l,u,d,m;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=JSON.parse(sessionStorage.getItem("user")),n.next=3,h.b.collection("chat").where("type","==","private").get();case 3:if(l=n.sent,u=l.docs.map(function(e){return Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id})}),0!==(d=u.filter(function(e){return e.users_occupants[0]===s.id&&a===e.activity_id})).length){n.next=13;break}return n.next=9,h.b.collection("chat").add({activity_id:e.listing_id,advertiser_id:a,advertise_title:e.title,advertiser_image_url:0===e.img.length?"":e.img[0],created_at:Object(c.a)().toISOString(),last_message:"",last_message_at:Object(c.a)().toISOString(),last_message_read_at:0,type:"private",user_name:s.name,user_image_url:s.profile_picture,users_occupants:[s.id]});case 9:m=n.sent,sessionStorage.setItem("chatRoomId",JSON.stringify(m.id)),n.next=14;break;case 13:sessionStorage.setItem("chatRoomId",JSON.stringify(d[0].id));case 14:t.push("/chat");case 15:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(s.a)(i.a.mark(function t(a){var n,r,s,c,l,u,d,f,v,g,_,b,y;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="",r=JSON.parse(sessionStorage.getItem("user")),s="91.218.96.148",t.next=5,p.a.v4();case 5:return c=t.sent,c.includes("188.43")||(s=c),t.next=10,h.b.collection("advertiser").doc(e.listingData.advertiser_id).get();case 10:if(l=t.sent,u=l.data(),d=12.9,f=m()().unix(),!u.booking_fees_id){t.next=20;break}if(!(u.booking_fees_limit_date.seconds>f)){t.next=20;break}return t.next=18,h.b.collection("booking_fees").doc(u.booking_fees_id).get();case 18:v=t.sent,d=v.data().fees;case 20:return g=void 0===u.insurance_file?"":u.insurance_file,_={ad_id:e.listingData.listing_id,address:e.address,price:e.price,fee:d,insurance_file:g,advertiser_id:e.listingData.advertiser_id,cancel_transaction_id:"",child_allergy:e.child_allergy,child_dob:m()(e.child_dob).format("MM/DD/YYYY"),child_gender:e.child_gender,child_medication:e.child_medication,child_name:e.child_name,coupon_code:"",ip:s,extra_session_id:"main"===e.extra_session_id?"":e.extra_session_id,extra_session_title:e.extra_session_title,emergency_contact_number_1:e.emergency_contact_number_1,emergency_contact_number_2:e.emergency_contact_number_2,option_field1_title:e.option_field1_title,option_field2_title:e.option_field2_title,guardians:e.guardians,qr_code:"",status:"1",child_image:n,surname:e.surname,timestamp:h.c.firestore.FieldValue.serverTimestamp(),transaction_id:"",user_id:r.id,date:m()().format("MM/DD/YYYY")},t.next=24,h.b.collection("booking").where("ad_id","==",e.listingData.listing_id).where("user_id","==",r.id).where("status","==","1").get();case 24:if(b=t.sent,!((y=b.docs.map(function(e){return Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id})})).length>0)){t.next=31;break}return t.next=29,h.b.collection("booking").doc(y[0].id).set(_);case 29:t.next=33;break;case 31:return t.next=33,h.b.collection("booking").add(_);case 33:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"USD";return function(){var t=Object(s.a)(i.a.mark(function t(a){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=JSON.parse(sessionStorage.getItem("user")),t.next=3,h.b.collection("booking").where("user_id","==",r.id).where("status","==","1").onSnapshot(function(){var t=Object(s.a)(i.a.mark(function t(r){var c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!((c=r.docs.map(function(e){return Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id})})).length>0)){t.next=4;break}return t.next=4,Promise.all(c.map(function(){var t=Object(s.a)(i.a.mark(function t(a,r){var s,l,u,d,f,p,v,g,b,y,A,w,E,N;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=0,t.next=3,h.b.collection("ad_listing").doc(a.ad_id).get();case 3:if(l=t.sent,s=l.data().price,!Boolean(null===a||void 0===a?void 0:a.extra_session_id)){t.next=10;break}return t.next=8,h.b.collection("ad_listing").doc(null===a||void 0===a?void 0:a.ad_id).collection("sessions").doc(null===a||void 0===a?void 0:a.extra_session_id).get();case 8:(u=t.sent).exists&&(s=u.data().price);case 10:return d=l.data(),t.next=13,h.b.collection("ad_listing").doc(a.ad_id).collection("sessions").get();case 13:if(f=t.sent,void 0!==d.address&&""!==d.address&&(d.address=d.address.street+", "+d.address.city+", "+d.address.state+", "+d.address.country),(p=f.docs.map(function(e){return Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id})})).length>0&&(p=p.map(function(e){return e.start_date=m()(1e3*e.start_date.seconds).format("MM/DD/YYYY"),e.end_date=m()(1e3*e.end_date.seconds).format("MM/DD/YYYY"),e})),v="",""===a.coupon_code){t.next=23;break}return t.next=21,h.b.collection("coupon").doc(a.coupon_code).get();case 21:g=t.sent,v=g.data().type_coupon;case 23:return t.next=25,h.b.collection("coupon").where("ad_listing_id","==",a.ad_id).where("type_coupon","==","advertiser").where("status","==","1").get();case 25:return b=t.sent,y=[],b.empty||b.docs.map(function(e){return Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id})}).forEach(function(e){e.limit_date.seconds>m()().unix()&&e.used!==e.availability&&(y=[].concat(Object(n.a)(y),[e]))}),t.next=30,Object(_.b)(null===d||void 0===d?void 0:d.price_currency,e,d.price);case 30:return A=t.sent,t.next=33,h.b.collection("advertiser").doc(d.advertiser_id).get();case 33:w=t.sent,E=w.data().name,N={category:d.category_name,img:d.picture,title:d.ad_title,price:d.price,advertiser_id:d.advertiser_id,author:E,location:d.address,couponList:y,couponType:v,listing_id:d.id,remaing_availability:d.remaing_availability,start_time:d.start_time,end_time:d.end_time,extraSessions:p,camp_type:d.camp_type,start_date:m()(1e3*d.start_date.seconds).format("MM/DD/YYYY"),end_date:m()(1e3*d.end_date.seconds).format("MM/DD/YYYY")},c[r].price=s,c[r].listingData=N,c[r].displayPrice=A,c[r].priceCurrency=((null===d||void 0===d?void 0:d.price_currency)||"USD").toLowerCase(),c[r].child_dob=m()(c[r].child_dob,"MM/DD/YYYY").format("YYYY-MM-DD");case 41:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()));case 4:a({type:"GET_CART_INFO",payload:c});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(s.a)(i.a.mark(function t(a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.b.collection("booking").doc(e).delete();case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(s.a)(i.a.mark(function t(a){var n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=JSON.parse(sessionStorage.getItem("role")),r=JSON.parse(sessionStorage.getItem("user")),t.next=5,h.b.collection("user"===n?"user_payment_method":"advertiser_payment_method").doc(e).delete();case 5:return g.a.success("Delete card successfully!"),t.next=8,u.a.post("/api/detachPaymentMethod",{pm:e,email:r.email}).then(function(e){}).catch(function(e){g.a.warning(e.message)});case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),g.a.warning(t.t0.message);case 13:case"end":return t.stop()}},t,null,[[0,10]])}));return function(e){return t.apply(this,arguments)}}()},N=function(e,t){return function(){var t=Object(s.a)(i.a.mark(function t(a){var n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=JSON.parse(sessionStorage.getItem("user")),r=JSON.parse(sessionStorage.getItem("role")),e.paymentMethod["user"===r?"user_id":"advertiser_id"]=n.id,t.next=6,u.a.post("/api/attachPaymentMethod",{email:n.email,pm:e.paymentMethod.id}).then(function(){var e=Object(s.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.collection("user"===r?"user":"advertiser").doc(n.id).update({stripe_id:t.data.customer});case 2:n.stripe_id=t.data.customer,sessionStorage.setItem("user",JSON.stringify(n));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){g.a.warning(e.message)});case 6:return t.next=8,h.b.collection("user"===r?"user_payment_method":"advertiser_payment_method").doc(e.paymentMethod.id).set(e.paymentMethod);case 8:g.a.success("The card has been successfully registered!"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),g.a.warning(t.t0.message);case 14:case"end":return t.stop()}},t,null,[[0,11]])}));return function(e){return t.apply(this,arguments)}}()},x=function(){return function(){var e=Object(s.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=JSON.parse(sessionStorage.getItem("user"))){e.next=3;break}return e.abrupt("return",!1);case 3:return n=JSON.parse(sessionStorage.getItem("role")),e.next=6,h.b.collection("user"===n?"user_payment_method":"advertiser_payment_method").onSnapshot(function(e){var r=e.docs.map(function(e){return e.data()});if("user"===n){var i=r.filter(function(e){return e.user_id===a.id});t({type:"GET_PAYMENT_METHOD",payload:i})}else{var o=r.filter(function(e){return e.advertiser_id===a.id});t({type:"GET_PAYMENT_METHOD",payload:o})}});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},U=function(e,t,a,r){return function(){var l=Object(s.a)(i.a.mark(function l(d){var f,p,v,_,b,y,A;return i.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,f=h.c.firestore.FieldValue.increment(-1),p=JSON.parse(sessionStorage.getItem("user")),l.next=5,u.a.post("/api/test",{id:e,bookingData:a,email:p.email,adminCouponList:r});case 5:if(200!==(v=l.sent).status){l.next=27;break}return console.log(v.data,"paymentInfo"),v=v.data.paymentIntent,l.next=11,Promise.all(v.map(function(){var e=Object(s.a)(i.a.mark(function e(t,n){var r,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.user_id=p.id,t.application_booking_fees=a[n].fee,t.advertiser_id=a[n].advertiser_id,t.camp_name=a[n].listingData.title,t.user_name=p.name,t.ad_listing_id=a[n].listingData.listing_id,t.transaction_date=Object(c.a)(),e.next=9,h.b.collection("user_payment_transaction").doc(t.id).set(t);case 9:if(""!==a[n].extra_session_id){e.next=14;break}return e.next=12,h.b.collection("ad_listing").doc(a[n].listingData.listing_id).update({remaing_availability:f});case 12:e.next=16;break;case 14:return e.next=16,h.b.collection("ad_listing").doc(a[n].listingData.listing_id).collection("sessions").doc(a[n].extra_session_id).update({remaing_availability:f});case 16:return e.next=18,h.b.collection("advertiser_notification").add({advertiser_id:a[n].advertiser_id,date:m()().format("MM/DD/YYYY"),icon:"Icons.notifications",booking_id:a[n].id,id:"",is_read:"0",message:"Congrats!, You've got more booking "+a[n].listingData.title});case 18:return r=e.sent,e.next=21,h.b.collection("advertiser_notification").doc(r.id).update({id:r.id});case 21:return e.next=23,h.b.collection("user_notification").add({user_id:p.id,date:m()().format("MM/DD/YYYY"),booking_id:a[n].id,icon:"Icons.notifications",id:"",is_read:"0",message:"Congrats!, Your seat is booked "+a[n].listingData.title});case 23:return o=e.sent,e.next=26,h.b.collection("user_notification").doc(o.id).update({id:o.id});case 26:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()));case 11:return l.next=13,h.b.collection("chat").where("type","==","group").get();case 13:return _=l.sent,b=_.docs.map(function(e){return Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id})}),l.next=17,h.b.collection("chat").where("type","==","private").get();case 17:return y=l.sent,A=y.docs.map(function(e){return Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id})}),l.next=21,Promise.all(a.map(function(){var e=Object(s.a)(i.a.mark(function e(t){var a,r,o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=b.filter(function(e){return e.activity_id===t.listingData.listing_id})).length>0)){e.next=10;break}if(r=a[0].users_occupants,0!==r.filter(function(e){return e===p.id}).length){e.next=8;break}return r=[].concat(Object(n.a)(r),[p.id]),e.next=8,h.b.collection("chat").doc(a[0].id).update({users_occupants:r});case 8:e.next=13;break;case 10:return o={activity_id:t.listingData.listing_id,advertise_title:t.listingData.title,advertiser_id:t.advertiser_id,advertiser_image_url:void 0!==t.listingData.img||t.listingData.img.length>0?t.listingData.img[0]:"",created_at:Object(c.a)().toISOString(),last_message:"",last_message_at:Object(c.a)().toISOString(),type:"group",user_image_url:p.profile_picture,user_name:"",users_occupants:[p.id]},e.next=13,h.b.collection("chat").add(o);case 13:if(0!==A.filter(function(e){return e.activity_id===t.listingData.listing_id&&e.users_occupants[0]===p.id}).length){e.next=18;break}return s={activity_id:t.listingData.listing_id,advertise_title:t.listingData.title,advertiser_id:t.advertiser_id,advertiser_image_url:void 0!==t.listingData.img||t.listingData.img.length>0?t.listingData.img[0]:"",created_at:Object(c.a)().toISOString(),last_message:"",last_message_at:Object(c.a)().toISOString(),type:"private",user_image_url:p.profile_picture,user_name:p.name,users_occupants:[p.id]},e.next=18,h.b.collection("chat").add(s);case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 21:sessionStorage.removeItem("bookingData"),sessionStorage.removeItem("cartCnt"),g.a.success("Booking was successful!"),t.push("/thankyou"),l.next=28;break;case 27:console.log(v);case 28:l.next=33;break;case 30:l.prev=30,l.t0=l.catch(0),g.a.warning(l.t0.message);case 33:case"end":return l.stop()}},l,null,[[0,30]])}));return function(e){return l.apply(this,arguments)}}()},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;return function(){var r=Object(s.a)(i.a.mark(function r(o){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,h.b.collection("booking").where("advertiser_id","==",e).where("status","==","0").where("ad_id","==",t).onSnapshot(function(){var r=Object(s.a)(i.a.mark(function r(l){var u,d;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(u=[],l.empty){r.next=5;break}return d=l.docs.map(function(e){return e.data()}),r.next=5,Promise.all(d.map(function(){var e=Object(s.a)(i.a.mark(function e(t){var r,o,s,l,d,m,f;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.collection("user_payment_transaction").doc(t.transaction_id).get();case 2:if(!(r=e.sent).exists){e.next=13;break}if("succeeded"!==(o=r.data()).status){e.next=13;break}return l="Paid-Card",d=Object(c.a)(1e3*o.created).toDateString(),e.next=10,Object(_.b)(o.currency,a,t.price);case 10:m=e.sent,f={amount:t.price,displayPrice:m,transactionStatus:l,date:d,camp_name:o.camp_name,userName:null!==(s=o.user_name)&&void 0!==s?s:t.child_name,transaction_id:o.id,ad_listingId:o.ad_listing_id,fee:Number(t.fee),status:"4"},u=[].concat(Object(n.a)(u),[f]);case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 5:return r.next=7,h.b.collection("advertiser_withdraw").where("advertiser_id","==",e).where("ad_listing_id","==",t).onSnapshot(function(e){var t=e.docs.map(function(e){return e.data()});o({type:"MY_BOOKING_LISTS",payload:{transactionLogs:u,withdrawLogs:t}})});case 7:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}());case 2:Object(_.d)(o,!1);case 3:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return function(){var a=Object(s.a)(i.a.mark(function a(r){var c,l,u,d;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.b.collection("ad_listing").doc(e).get();case 2:if(!(c=a.sent).exists){a.next=11;break}return l=c.data(),u=JSON.parse(sessionStorage.getItem("user")),d="12.9",""===u.fee_group&&""!==u.advertiser_fee_id&&(d="6.6"),"standard plan"===u.fee_group&&(d="9.9"),a.next=11,h.b.collection("booking").where("ad_id","==",e).where("status","==","0").onSnapshot(function(){var e=Object(s.a)(i.a.mark(function e(a){var c,u,f;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=a.docs.map(function(e){return Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id})}),u=[],f={picture:l.picture,category_name:l.category_name,title:l.ad_title},!(c.length>0)){e.next=6;break}return e.next=6,Promise.all(c.map(function(){var e=Object(s.a)(i.a.mark(function e(a){var r,o,s,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=m()(1e3*a.timestamp.seconds).format("ddd, MM/DD/YYYY hh:mm:ss A"),o=a.price,void 0!==a.used_coupon_id&&void 0!==a.discount&&(o=a.price-a.discount),e.next=5,Object(_.b)((null===a||void 0===a?void 0:a.price_currency)||"USD",t,o);case 5:s=e.sent,c={bookingId:a.id,picture:l.picture,title:l.ad_title,option1:l.option_field1_title,option2:l.option_field2_title,answer1:a.option_field1_title,answer2:a.option_field2_title,displayPrice:s,displayNetPrice:s*(100-d)/100,category_name:l.category_name,date:r,fee:d,userName:a.child_name+" "+a.surname,paid:o,netAmount:o*(100-d)/100,ad_id:a.ad_id,user_id:a.user_id},u=[].concat(Object(n.a)(u),[c]);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 6:r({type:"SET_ORDER_LIST",payload:{orderList:u,activityData:f}}),Object(_.e)(r,!1);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 11:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},I=function(e,t,a){return function(){var a=Object(s.a)(i.a.mark(function a(n){var r,o,c,l;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=JSON.parse(sessionStorage.getItem("user")),a.next=3,h.b.collection("user_payment_transaction").doc(t).get();case 3:return c=a.sent,l=c.data(),a.next=7,u.a.post("/api/cancel-user-booking-payment-from-user",{booking_id:e,user_id:o.id,amount:200}).then(function(){var t=Object(s.a)(i.a.mark(function t(a){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(a,"res"),200!==a.data.status){t.next=12;break}return t.next=5,h.b.collection("advertiser_notification").add({advertiser_id:l.advertiser_id,date:m()().format("MM/DD/YYYY"),icon:"Icons.notifications",id:"",booking_id:e,is_read:"0",message:o.name+" canceled your "+l.camp_name});case 5:return n=t.sent,t.next=8,h.b.collection("advertiser_notification").doc(n.id).update({id:n.id});case 8:g.a.success("Booking is canceled sucessfully"),r=!0,t.next=13;break;case 12:r=!1;case 13:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){r=!1,console.log(e,"cancel"),g.a.warning(e.message)});case 7:return a.abrupt("return",r);case 8:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},P=function(){return function(){var e=Object(s.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(sessionStorage.getItem("user")),e.next=3,h.b.collection("booking").where("user_id","==",a.id).onSnapshot(function(){var e=Object(s.a)(i.a.mark(function e(r){var l,u,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=r.docs.map(function(e){return Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id})}),u=l.filter(function(e){return"0"===e.status||"2"===e.status}),d=[],e.next=5,Promise.all(u.map(function(){var e=Object(s.a)(i.a.mark(function e(t,r){var o,s,l,u,f,p,v;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o="",e.next=3,h.b.collection("ad_listing").doc(t.ad_id).get();case 3:if(s=e.sent,l=s.data(),!Boolean(t.extra_session_id)){e.next=10;break}return e.next=8,h.b.collection("ad_listing").doc(t.ad_id).collection("sessions").doc(t.extra_session_id).get();case 8:(u=e.sent).exists&&(l.start_date=u.data().start_date,l.end_date=u.data().end_date);case 10:return e.next=12,h.b.collection("chat").where("activity_id","==",t.ad_id).where("type","==","private").get().then(function(e){e.forEach(function(e){e.data().users_occupants[0]===a.id&&(o=e.id)})});case 12:f=m()(1e3*l.start_date.seconds).format("YYYY-MM-DD")+" "+l.start_time,p=m()(1e3*l.end_date.seconds).format("YYYY-MM-DD")+" "+l.end_time,v={id:r+1,listingData:l,chatRoomId:o,bookingData:t,title:"2"===t.status?l.ad_title+" - Canceled":l.ad_title,start:Object(c.a)(f),end:Object(c.a)(p)},d=[].concat(Object(n.a)(d),[v]);case 16:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()));case 5:t({type:"SET_CALENDAR_DATA",payload:d});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(s.a)(i.a.mark(function t(a){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.post("https://us-central1-kidsapp-c8292.cloudfunctions.net/app/cancel-camp-user-booking-payment-from-advertiser",{ad_id:e}).then(function(e){g.a.success("Cancel is successfully!")});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},j=function(){return function(){var e=Object(s.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=JSON.parse(sessionStorage.getItem("user")),n=JSON.parse(sessionStorage.getItem("role")),!a){e.next=5;break}return e.next=5,h.b.collection("user"===n?"user_notification":"advertiser_notification").orderBy("date","asc").onSnapshot(function(e){var r=e.docs.map(function(e){return e.data()}),o=r.filter(function(e){return a.id===("user"===n?e.user_id:e.advertiser_id)});o.length>0&&o.map(function(){var e=Object(s.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.booking_id||""===t.booking_id){e.next=5;break}return e.next=3,h.b.collection("booking").doc(t.booking_id).get();case 3:(a=e.sent).exists&&"5"!==(n=a.data()).status&&(t.ad_id=n.ad_id);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());var c=r.filter(function(e){return a.id===("user"===n?e.user_id:e.advertiser_id)&&"0"===e.is_read&&void 0===e.booking_id});t({type:"ADVERTISER_NOTIFICATION",payload:{notificationCnt:o,msgCnt:c.length}})});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},C=function(){return function(){var e=Object(s.a)(i.a.mark(function e(t){var a,n,r,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=JSON.parse(sessionStorage.getItem("user")),n=JSON.parse(sessionStorage.getItem("role")),!a){e.next=11;break}return e.next=5,h.b.collection("user"===n?"user_notification":"advertiser_notification").get();case 5:if(r=e.sent,o=r.docs.map(function(e){return e.data()}),!((c=o.filter(function(e){return"0"===e.is_read&&("user"===n?e.user_id:e.advertiser_id)===a.id})).length>0)){e.next=11;break}return e.next=11,Promise.all(c.map(function(){var e=Object(s.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.collection("user"===n?"user_notification":"advertiser_notification").doc(t.id).update({is_read:"1"});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},D=function(){return function(){var e=Object(s.a)(i.a.mark(function e(t){var a,n,r,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=JSON.parse(sessionStorage.getItem("user")),n=JSON.parse(sessionStorage.getItem("role")),!a){e.next=11;break}return e.next=5,h.b.collection("user"===n?"user_notification":"advertiser_notification").get();case 5:if(r=e.sent,o=r.docs.map(function(e){return e.data()}),!((c=o.filter(function(e){return"0"===e.is_read&&("user"===n?e.user_id:e.advertiser_id)===a.id&&"0"===e.is_read&&void 0===e.booking_id})).length>0)){e.next=11;break}return e.next=11,Promise.all(c.map(function(){var e=Object(s.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.b.collection("user"===n?"user_notification":"advertiser_notification").doc(t.id).update({is_read:"1"});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},F=function(e,t,a,n){return function(){var r=Object(s.a)(i.a.mark(function r(o){var s,l,d,f,p,v,_,b,y;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,l=JSON.parse(sessionStorage.getItem("user")),d=m()().add(n.day,"days").format("YYYY-MM-DD HH:mm:ss"),r.next=5,u.a.post("/api/boostPaid",{email:l.email,pm:t,amount:n.fees});case 5:return f=r.sent,p=f.data,r.next=9,h.b.collection("ad_listing").doc(e).get();case 9:return v=r.sent,_=v.data(),r.next=13,h.b.collection("advertiser_boost_payments").add({ad_subscription_id:a,ad_subscription_plan_name:n.plan_name,advertiser_id:l.id,camp_id:e,camp_name:_.ad_title,price_paid:n.fees,timestamp:Object(c.a)(),upgrade_date_limit:Object(c.a)(d),transaction_id:p.id});case 13:return b=r.sent,r.next=16,h.b.collection("ad_listing").doc(e).update({boost_date_limit:Object(c.a)(d),transaction_id:p.id,ad_boost_payment_id:b.id});case 16:return r.next=18,h.b.collection("slider_images").add({camp_id:e,date_limit:Object(c.a)(d),id:"",image:_.picture.length>0?_.picture[0]:"",status:0});case 18:return y=r.sent,r.next=21,h.b.collection("slider_images").doc(y.id).update({id:y.id});case 21:return p.advertiser_id=l.id,r.next=24,h.b.collection("advertiser_payment_transaction").doc(p.id).set(p);case 24:g.a.success("Boost Ads successfully!"),s=!0,r.next=32;break;case 28:return r.prev=28,r.t0=r.catch(0),g.a.warning(r.t0.message),r.abrupt("return",!1);case 32:return r.abrupt("return",s);case 33:case"end":return r.stop()}},r,null,[[0,28]])}));return function(e){return r.apply(this,arguments)}}()},M=function(e,t){return function(){var a=Object(s.a)(i.a.mark(function a(n){var r,o,s,l,d,f,p;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=JSON.parse(sessionStorage.getItem("user")),o=m()().add(30,"days").format("YYYY-MM-DD HH:mm:ss"),a.next=5,u.a.post("/api/boostPaid",{email:r.email,pm:t,amount:e.fees});case 5:return s=a.sent,l=s.data,a.next=9,h.b.collection("advertiser_upgrade_payments").add({ad_subscription_id:e.id,ad_subscription_plan_name:e.plan_name,advertiser_id:r.id,price_paid:e.fees,upgrade_date_limit:Object(c.a)(o),timestamp:Object(c.a)(),transaction_id:l.id});case 9:return d=a.sent,a.next=12,h.b.collection("advertiser").doc(r.id).update({is_feature:"0",is_feature_day:e.day,is_feature_day_remaining:e.day,ad_subscription_id:e.id,ad_upgrade_payment_id:d.id,upgrade_date_limit:Object(c.a)(o),transaction_id:l.id});case 12:return a.next=14,h.b.collection("advertiser_payment_transaction").doc(l.id).set(l);case 14:return a.next=16,h.b.collection("advertiser").doc(r.id).get();case 16:f=a.sent,p=f.data(),sessionStorage.setItem("user",JSON.stringify(p)),g.a.success("Upgrade account successfully!"),a.next=25;break;case 22:a.prev=22,a.t0=a.catch(0),console.log(a.t0,"upgrade account");case 25:case"end":return a.stop()}},a,null,[[0,22]])}));return function(e){return a.apply(this,arguments)}}()},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"USD";return function(){var t=Object(s.a)(i.a.mark(function t(a){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=JSON.parse(sessionStorage.getItem("user")))){t.next=4;break}return t.next=4,h.b.collection("booking").where("status","==","0").where("user_id","==",n.id).onSnapshot(function(){var t=Object(s.a)(i.a.mark(function t(n){var r,c,l;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.docs.map(function(e){return Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id})}),c=r.filter(function(e){return""!==e.transaction_id}),l=[],!(c.length>0)){t.next=6;break}return t.next=6,Promise.all(c.map(function(){var t=Object(s.a)(i.a.mark(function t(a){var n,r,o,s,c,u,d,f,p,v,g,b,y;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={},t.next=3,h.b.collection("user_payment_transaction").doc(a.transaction_id).get();case 3:return r=t.sent,t.next=6,h.b.collection("ad_listing").doc(a.ad_id).get();case 6:if(o=t.sent,s=o.data(),!r.exists||!Boolean(s)){t.next=25;break}return c=r.data(),t.next=12,Object(_.b)(c.currency,e,c.amount/100,"order");case 12:if(u=t.sent,Boolean(a.extra_session_id)){t.next=19;break}d=m()(1e3*s.start_date.seconds).format("MM/DD/YYYY"),f=m()(1e3*s.end_date.seconds).format("MM/DD/YYYY"),n={startDate:d,endData:f,startTime:s.start_time,endTime:s.end_time},t.next=23;break;case 19:return t.next=21,h.b.collection("ad_listing").doc(a.ad_id).collection("sessions").doc(a.extra_session_id).get();case 21:(p=t.sent).exists&&(v=p.data(),g=m()(1e3*v.start_date.seconds).format("MM/DD/YYYY"),b=m()(1e3*v.end_date.seconds).format("MM/DD/YYYY"),n={startDate:g,endData:b,startTime:v.start_time,endTime:v.end_time});case 23:y={campTitle:s.ad_title,img:s.picture.length>0?s.picture[0]:"",displayPrice:u,session:n,transData:c,attendee:a.child_name+" "+a.surname,video:s.video,date:m()(1e3*a.timestamp.seconds).format("dd,MM/DD/YYYY")},l.push(y);case 25:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 6:a({type:"USER_ORDER_LIST",payload:l}),Object(_.e)(a,!1);case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},T=function(){return function(){var e=Object(s.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.b.collection("coupon").where("type_coupon","==","admin").onSnapshot(function(e){var a=e.docs.map(function(e){return e.data()});t({type:"SET_ADMIN_COUPON",payload:a})});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),g.a.warning(e.t0.message);case 8:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()}},634:function(e,t,a){e.exports=a.p+"static/media/app-store-badge-en-us.620bd2f5.svg"},635:function(e,t,a){e.exports=a.p+"static/media/google-play-badge-en-us.d462859f.svg"},636:function(e,t,a){"use strict";a.d(t,"a",function(){return v});var n=a(93),r=a(94),i=a(95),o=a(96),s=a(64),c=a(0),l=a.n(c),u=a(25),d=a(634),m=a.n(d),f=a(635),p=a.n(f),v=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement(c.Fragment,null,l.a.createElement("div",{className:"modal fade show",id:"modal-item-remove",tabIndex:"-1",role:"dialog",style:{display:"none",paddingRight:"17px"},"aria-modal":"true"},l.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-body text-center p-top-40 p-bottom-50"},l.a.createElement("span",{className:"la la-exclamation-circle color-warning"}),l.a.createElement("h1",{className:"display-3 m-bottom-10"},"Are you sure?"),l.a.createElement("p",{className:"m-bottom-30"},"Do you really want to delete this item?"),l.a.createElement("div",{className:"d-flex justify-content-center"},l.a.createElement("button",{type:"button",className:"btn btn-secondary m-right-15","data-dismiss":"modal"},"Cancel"),l.a.createElement("button",{type:"button",className:"btn btn-danger"},"Yes, Delete it!")))))),l.a.createElement("footer",{id:"footer",className:"footer-three footer-grey p-top-95 "},l.a.createElement("div",{className:"footer-top p-bottom-25"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-4 col-lg-4 col-sm-6"},l.a.createElement("div",{className:"widget widget_pages"},l.a.createElement("h2",{className:"widget-title"},l.a.createElement(s.b,{text:"explore"})),l.a.createElement("ul",{className:"list-unstyled"},l.a.createElement("li",{className:"page-item"},l.a.createElement(u.a,{to:"/about"},l.a.createElement(s.b,{text:"about_us"}))),l.a.createElement("li",{className:"page-item"},l.a.createElement(u.a,{to:"/faqs"},l.a.createElement(s.b,{text:"faq"}))),l.a.createElement("li",{className:"page-item"},l.a.createElement(u.a,{to:"/support"},l.a.createElement(s.b,{text:"support"}))),l.a.createElement("li",{className:"page-item"},l.a.createElement(u.a,{to:"/merchant-support"},l.a.createElement(s.b,{text:"provider_support"}))),l.a.createElement("li",{className:"page-item"},l.a.createElement(u.a,{to:"/new-providers-information"},l.a.createElement(s.b,{text:"provider_information"}))),l.a.createElement("li",{className:"page-item"},l.a.createElement(u.a,{to:"/privacy-policy"},l.a.createElement(s.b,{text:"privacy_policy"}))),l.a.createElement("li",{className:"page-item"},l.a.createElement(u.a,{to:"/terms-conditions"},l.a.createElement(s.b,{text:"terms_conditions"}))),l.a.createElement("li",{className:"page-item"},l.a.createElement(u.a,{to:"/provider-terms-conditions"},l.a.createElement(s.b,{text:"service_provider_terms"}))),l.a.createElement("li",{className:"page-item"},l.a.createElement(u.a,{to:"/all-listings-grid",onClick:function(e){return sessionStorage.removeItem("searchData")}},l.a.createElement(s.b,{text:"all_activities"}))),l.a.createElement("li",{className:"page-item"},l.a.createElement(u.a,{to:"/press"},l.a.createElement(s.b,{text:"press"})))))),l.a.createElement("div",{className:"col-md-4 col-lg-4 col-sm-6"},l.a.createElement("div",{className:"widget widget_social"},l.a.createElement("h2",{className:"widget-title"},"Connect with Us"),l.a.createElement("ul",{className:"list-unstyled social-list"},l.a.createElement("li",null,l.a.createElement("a",{href:"mailto:support@activities.app",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("span",{className:"mail"},l.a.createElement("i",{className:"la la-envelope"}))," ","Contact Support")),l.a.createElement("li",null,l.a.createElement("a",{href:"https://twitter.com/Activities_App",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("span",{className:"twitter"},l.a.createElement("i",{className:"fab fa-twitter"}))," ","Twitter")),l.a.createElement("li",null,l.a.createElement("a",{href:"https://www.facebook.com/Activities-App-103000531321891",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("span",{className:"facebook"},l.a.createElement("i",{className:"fab fa-facebook-f"}))," ","Facebook")),l.a.createElement("li",null,l.a.createElement("a",{href:"https://www.instagram.com/activities_app/",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("span",{className:"instagram"},l.a.createElement("i",{className:"fab fa-instagram"}))," ","Instagram"))))),l.a.createElement("div",{className:"col-md-4 col-lg-4 col-sm-6"},l.a.createElement("div",{className:"widget widget_text"},l.a.createElement("h2",{className:"widget-title"},l.a.createElement(s.b,{text:"activities_on_mobile"})),l.a.createElement("div",{className:"textwidget"},l.a.createElement("p",null,l.a.createElement(s.b,{text:"footer_download_app"})),l.a.createElement("ul",{className:"list-unstyled store-btns"},l.a.createElement("li",{className:"padding-5"},l.a.createElement("a",{target:"_blank",href:"https://apps.apple.com/app/id1501612336#?platform=iphone",rel:"noopener noreferrer"},l.a.createElement("img",{src:m.a,width:"150",alt:"",className:"applebtn"}))),l.a.createElement("li",{className:"padding-5"},l.a.createElement("a",{target:"_blank",href:"https://play.google.com/store/apps/details?id=app.activities.activities ",rel:"noopener noreferrer",style:{borderRadius:"30px"}},l.a.createElement("img",{src:p.a,alt:"",width:"145",className:"googlebtn"})))))))))),l.a.createElement("div",{className:"footer-bottom"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("div",{className:"footer-bottom--content"},l.a.createElement(u.a,{to:"/",className:"footer-logo"},l.a.createElement("img",{src:"./assets/img/logo.jpg",alt:""})),l.a.createElement("p",{className:"m-0 copy-text"}," ","\xa92021 ",l.a.createElement(s.b,{text:"activities"})),l.a.createElement("ul",{className:"list-unstyled lng-list"}))))))))}}]),a}(c.Component)},638:function(e,t,a){e.exports=a.p+"static/media/china.d1052ca5.svg"},639:function(e,t,a){e.exports=a.p+"static/media/france.3c59a185.svg"},640:function(e,t,a){e.exports=a.p+"static/media/german.702f527f.svg"},641:function(e,t,a){e.exports=a.p+"static/media/portugal.ec536776.svg"},642:function(e,t,a){e.exports=a.p+"static/media/spain.70c13cd0.svg"},643:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAmCAMAAABwIXKiAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAMNQTFRFAAAAseIAseIAseIAseIAseIAseIAseIAseIAseIAseIAseIAseIAseIAseIAsOIAseIAseIAseIAseIAseIAr+IAseIAseIAseIAseIAseIAseIAseIAseIAseIA6/jEseIAruEAseIAseIA////////////////////sOIA////////////////////////seIAseIA////////////////////////////seIA////////////////8vvaseIAseIA53ynIgAAAEF0Uk5TAAtEdJuuvLekiV4p6//LFMLyB+NOLd479x1Ze5AySQFvaNQPN5e/s202df/TEEfNglOKjdBMfNgYlT62rHEDqkF+GELmAAABgklEQVR4nIWU6WKCMBCEFzkEBQOKB1qstbUtxbP3qX3/pyqSTUhCtPMrs/nIMSQBEGU0TMt2mq7XasNpNVw/4OqY5AQVBrIir1unulZQVy9Wsf5AgxXyZGyopwrZ0mjyukaic4U0Il4NzWFikP7YrdgJ5xxODXktueBgiqVx/cujpizMAfWXbFY1BNLDjllpr9C1apkmuEi/dHNNAKhYmKmN7WsNB2E1xoQ2LdZ1s7i9u1eCjYofbdNmhj0P+VHLFdo5j2YuLBVgnVNt0G/5HmlKIdY3yOVr6neUMwEicbcrhuWPtIAHZAsw0nNPtJBxTp73WZm3Gk/exwtiS1A5Wz4UryX29l7jMOcPFu3n4uv7Zw81jv03Q/ffBA7wBh3+406fK5nbs6swPc9V5948z1X3yMnOcsK9dGYZ6RoJ0XKQBoJGvh9ElpaD30CVq+Ug7algouXAcBWuL3LisxV3RCyibyShbieFMD1UG2ehz8oU1LhIPLGandD2Ul5qNcPju/MHCO47tWLL7YAAAAAASUVORK5CYII="},644:function(e,t,a){"use strict";var n=a(181),r=a(1650),i=a(1649),o=a(1651),s=a(670),c=a.n(s),l=a(673),u=a.n(l),d=a(672),m=a.n(d),f=a(0),p=a.n(f),v=a(671),g=a(51),h=a(6),_=a(25),b=a(184),y=a(628),A=a.n(y),w=a(638),E=a.n(w),N=a(639),x=a.n(N),U=a(640),O=a.n(U),k=a(641),I=a.n(k),P=a(642),S=a.n(P),j=a(185),C=a.n(j),D=a(188),F=a.n(D),M=a(643),Y=a.n(M),T=a(630),G=a(631),H=a(633),R=a(1636),L=a(1648),B=a(571),W=a(611),Z=a(1647),z=a(569),V=a(613),Q=a(574),q=a(183),J=a.n(q),K=a(64),X=a(81),$=Object(z.a)(function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),textAlign:"center",flex:1,color:"#fff"},content:{display:"flex",flexDirection:"column"},mobileContent:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px"," > span":{fontSize:"16px"}}}}),ee=p.a.forwardRef(function(e,t){return p.a.createElement(Z.a,Object.assign({direction:"left",ref:t},e))});function te(e){var t=e.title,a=e.open,n=(e.icon,e.lists),r=e.onClose,i=e.onChange,o=e.selLanguage,s=e.selCurrency,c=Object(X.a)().i18n,l=$();return p.a.createElement(B.a,{fullScreen:!0,open:a,onClose:r,TransitionComponent:ee},p.a.createElement(L.a,{className:l.appBar},p.a.createElement(V.a,null,p.a.createElement(W.a,{edge:"start",color:"inherit",onClick:r,"aria-label":"close"},p.a.createElement(J.a,null)),p.a.createElement(Q.a,{variant:"h6",className:l.title},p.a.createElement(K.b,{text:"Select ".concat(t)})))),p.a.createElement("div",{className:l.content},n.map(function(e,a){var n;return p.a.createElement("div",{className:"mobile-item",key:a,onClick:function(){return function(e){var t,a;(null===e||void 0===e?void 0:e.currency)?i({title:e.title,currency:e.currency,value:e.value},"curr"):(c.changeLanguage(null!==(t=null===e||void 0===e?void 0:e.value)&&void 0!==t?t:"en"),sessionStorage.setItem("language",JSON.stringify({icon:e.icon,title:e.title,value:null!==(a=e.value)&&void 0!==a?a:"en"})),i({icon:e.icon,title:e.title},"lang"));r()}(e)}},p.a.createElement("div",{className:"content"},(null===e||void 0===e?void 0:e.icon)&&p.a.createElement("div",{className:"icon pr-2"},p.a.createElement(b.a,{src:null!==(n=e.icon)&&void 0!==n?n:C.a,alt:""})),p.a.createElement(K.b,{text:e.title}),(null===e||void 0===e?void 0:e.currency)&&p.a.createElement("span",{className:"pr-2"},(null===e||void 0===e?void 0:e.currency)&&p.a.createElement("span",null,"(",e.currency,")"))),p.a.createElement(R.a,{checked:"Currency"===t?e.currency===s.currency:e.title===o.title,name:"radio-button-demo",inputProps:{"aria-label":"C"}}))})))}var ae=a(648),ne=a(1661),re=a(652),ie=a.n(re),oe=["open","onOpenSide"],se=Object(z.a)({list:{width:250,position:"relative"},closebtn:{position:"absolute",top:0,right:0,margin:8,cursor:"pointer"},fullList:{width:"auto"}}),ce=function(e){var t=e.notificationCnt,a=e.msgCnt,n=JSON.parse(sessionStorage.getItem("role")),r=Object(g.c)();return p.a.createElement("div",{className:"p-3 sidebar-content"},p.a.createElement("ul",{className:"list-unstyled"},p.a.createElement("li",null,p.a.createElement(_.a,{to:"/edit-account"},p.a.createElement("i",{className:"la la-user pr-10"}),p.a.createElement(K.b,{text:"my_profile"}))),p.a.createElement("li",null,p.a.createElement("div",{style:{position:"relative"}},p.a.createElement(_.a,{to:"/notification-list"},p.a.createElement("span",{className:"la la-comment pr-10"}),p.a.createElement(K.b,{text:"notifications"}),p.a.createElement("div",{className:"note-alert left-alert",style:{marginLeft:"110px"}},t>0&&p.a.createElement("span",null,t))))),p.a.createElement("li",null,p.a.createElement("div",{style:{position:"relative"}},p.a.createElement(_.a,{to:"/chat"},p.a.createElement("span",{className:"la la-comment pr-10"}),p.a.createElement(K.b,{text:"chat"}),p.a.createElement("div",{className:"note-alert left-alert",style:{marginLeft:"64px"}},a>0&&p.a.createElement("span",null,a))))),"advertiser"===n&&p.a.createElement("div",null,p.a.createElement("li",null,p.a.createElement(_.a,{to:"/advertiser-dashboard"},p.a.createElement("span",{className:"la la-list dropdown-icon pr-10"}),p.a.createElement(K.b,{text:"dashboard"}))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/my-activities"},p.a.createElement("span",{className:"la la-list dropdown-icon pr-10"}),p.a.createElement(K.b,{text:"my_advertise"}))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/boost-ads"},p.a.createElement("span",{className:"la la-hand-o-right dropdown-icon pr-10"}),p.a.createElement(K.b,{text:"boost_ads"}))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/insurance-info"},p.a.createElement("span",{className:"la la-list dropdown-icon pr-10"}),p.a.createElement(K.b,{text:"insurance_info"}))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/manage-plan"},p.a.createElement("span",{className:"la la-empire dropdown-icon pr-10"}),p.a.createElement(K.b,{text:"manage_pricing_plan"})))),"user"===n&&p.a.createElement("div",null,p.a.createElement("li",null,p.a.createElement(_.a,{to:"/my-calendar"},p.a.createElement("span",{className:"la la-calendar dropdown-icon pr-10"}),p.a.createElement(K.b,{text:"my_calendar"}))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/my-favorite"},p.a.createElement("span",{className:"la la-heart-o dropdown-icon pr-10"}),p.a.createElement(K.b,{text:"my_favorite"}))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/my-orders"},p.a.createElement("span",{className:"la la-list dropdown-icon pr-10"}),p.a.createElement(K.b,{text:"orders"})))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/payment-information"},p.a.createElement("span",{className:"la la-credit-card dropdown-icon pr-10"}),p.a.createElement(K.b,{text:"payment_info"}))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/notification-setting"},p.a.createElement("span",{className:"la la-bell-o dropdown-icon pr-10"}),p.a.createElement(K.b,{text:"noticiation_settings"}))),"advertiser"===n&&p.a.createElement("div",null,p.a.createElement("li",null,p.a.createElement(_.a,{to:"/staff-management"},p.a.createElement("span",{className:"la la-users dropdown-icon pr-10"}),p.a.createElement(K.b,{text:"staff_management"}))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/business-profile"},p.a.createElement("span",{className:"la la-building dropdown-icon pr-10"}),p.a.createElement(K.b,{text:"business_profile"}))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/email-marketing"},p.a.createElement("span",{className:"la la-envelope dropdown-icon pr-10"}),p.a.createElement(K.b,{text:"email_marketing"}))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/accesskey-management"},p.a.createElement("span",{className:"la la-shirtsinbulk dropdown-icon pr-10"}),p.a.createElement(K.b,{text:"api_management"}))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"edit-account"},p.a.createElement("span",{className:"la la-user dropdown-icon pr-10"}),p.a.createElement(K.b,{text:"edit_account"}))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/guide-document"},p.a.createElement("span",{className:"la la-comment dropdown-icon pr-10"}),p.a.createElement(K.b,{text:"api_doc"}))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/support-home"},p.a.createElement("span",{className:"la la-user-secret dropdown-icon pr-10"}),p.a.createElement(K.b,{text:"support"})))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/",onClick:function(e){e.preventDefault(),r(Object(T.d)())}},p.a.createElement("i",{className:"la la-user pr-10"}),p.a.createElement(K.b,{text:"logout"})))))};function le(e){var t=e.title,a=e.lists,r=Object(f.useState)(!1),o=Object(n.a)(r,2),s=o[0],c=o[1];return p.a.createElement("div",{className:"login-sidebar"},p.a.createElement("div",{className:"toggle-title",onClick:function(){return c(!s)}},p.a.createElement(ie.a,null),p.a.createElement(K.b,{text:t})),p.a.createElement(i.a,{in:s},p.a.createElement("ul",{className:"list-unstyled"},a.map(function(e,t){return p.a.createElement("li",{key:t},p.a.createElement(_.a,{to:e.path},p.a.createElement("span",null,p.a.createElement(K.b,{text:e.title}))))}))))}function ue(e){var t,a=Object.assign({},e),r=se(),i=Object(h.g)(),o=Object(f.useState)(JSON.parse(sessionStorage.getItem("user"))),s=Object(n.a)(o,1)[0],c=JSON.parse(sessionStorage.getItem("role"));return p.a.createElement("div",{className:r.list},p.a.createElement("div",{className:r.closebtn},p.a.createElement(J.a,{onClick:a.onClose})),p.a.createElement("div",{className:"mobile-sidebar"},p.a.createElement("div",{className:"sidebar-header"},s?p.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center"},p.a.createElement("div",{className:"mobile-avatar"},p.a.createElement("img",{src:null!==(t=null===s||void 0===s?void 0:s.profile_picture)&&void 0!==t?t:A.a,alt:"",width:"50",height:"50"})),p.a.createElement("div",{className:"user-info"},p.a.createElement("h4",{className:"m-2"},null===s||void 0===s?void 0:s.name)),"advertiser"===c&&p.a.createElement("button",{onClick:function(){window.location.href="/add-activities"}},p.a.createElement("span",{className:"la la-plus"}),p.a.createElement(K.b,{text:"add_activity"}))):p.a.createElement(p.a.Fragment,null,p.a.createElement("h3",null,p.a.createElement(K.b,{text:"create_an_account"})),p.a.createElement("p",{className:"m-0"},p.a.createElement(K.b,{text:"check_your_bookins_and_stay"})),p.a.createElement("div",{className:"sidebar-signup-btn"},p.a.createElement("button",{onClick:function(){return i.push("/sign-up")}},p.a.createElement(K.b,{text:"sing_up"}))))),p.a.createElement("div",null,s?p.a.createElement(ce,a):p.a.createElement(p.a.Fragment,null,p.a.createElement(le,{title:"find_an_activity",lists:a.findActivityData}),p.a.createElement(le,{title:"list_an_activity",lists:a.listActivityData})))))}function de(e){var t=e.open,a=e.onOpenSide,n=Object(ae.a)(e,oe);return p.a.createElement(p.a.Fragment,null,p.a.createElement(ne.a,{anchor:"right",open:t,onClose:n.onClose,onOpen:a},p.a.createElement(ue,n)))}var me=a(627),fe=a(632);function pe(e){var t=e.lists,a=e.cols,o=e.icon,s=e.title,l=e.titleFontSize,u=e.currency,d=e.align,m=e.onChange,v=Object(X.a)().i18n,g=Object(f.useState)(!1),_=Object(n.a)(g,2),y=_[0],A=_[1],w=Object(h.g)();return p.a.createElement("div",{className:"select-dropdown"},p.a.createElement("div",{className:"select-dropdown-title",onClick:function(){A(function(e){return!e})}},p.a.createElement("button",null,"left"===d&&p.a.createElement(c.a,{style:{marginRight:10}}),p.a.createElement("div",null,o&&p.a.createElement(b.a,{src:o}),p.a.createElement("span",{className:"pr-2",style:{fontSize:l||16}},p.a.createElement(K.b,{text:s}),u&&p.a.createElement("span",null,"(",u,")"))),"left"!==d&&p.a.createElement(c.a,null))),y&&p.a.createElement(r.a,{onClickAway:function(){return A(!1)}},p.a.createElement(i.a,{in:y},p.a.createElement("div",{className:"select-dropdown-body cols-".concat(a),style:{left:"".concat("left"===d?"0":"")}},null===t||void 0===t?void 0:t.map(function(e,t){return p.a.createElement("div",{className:"drop-item",key:t,onClick:function(){return function(e){if(A(!1),null===e||void 0===e?void 0:e.path)w.push(e.path);else if(null===e||void 0===e?void 0:e.icon){var t,a;v.changeLanguage(null!==(t=null===e||void 0===e?void 0:e.value)&&void 0!==t?t:"en"),sessionStorage.setItem("language",JSON.stringify({icon:e.icon,title:e.title,value:null!==(a=e.value)&&void 0!==a?a:"en"})),m({icon:e.icon,title:e.title},"lang")}else m({title:e.title,currency:e.currency,value:e.value},"curr")}(e)}},p.a.createElement("div",{className:"drop-item-content"},e.icon&&p.a.createElement("div",{className:"icon"},p.a.createElement(b.a,{src:e.icon})),p.a.createElement("span",null,p.a.createElement(K.b,{text:e.title})),e.currency&&p.a.createElement("span",{className:"currency"},e.currency)))})))))}function ve(e){var t,a,r,i=Object(g.c)(),s=Object(g.d)(function(e){return e.widget.cartData}).length,l=Object(g.d)(function(e){return e.widget.adv_notification}),d=Object(g.d)(function(e){return e.widget.unreadMsg}),h=Object(g.d)(function(e){return e.list.metaData}),y=Object(g.d)(function(e){return e.app.currency}),w=Object(f.useState)(JSON.parse(sessionStorage.getItem("user"))),E=Object(n.a)(w,1)[0],N=Object(f.useState)(JSON.parse(sessionStorage.getItem("role"))),x=Object(n.a)(N,1)[0],U=Object(f.useState)(0),O=Object(n.a)(U,2),k=O[0],I=O[1],P=Object(f.useState)(0),S=Object(n.a)(P,2),j=S[0],D=S[1],M=Object(f.useState)(!1),R=Object(n.a)(M,2),L=R[0],B=R[1],W=Object(f.useState)(!1),Z=Object(n.a)(W,2),z=Z[0],V=Z[1],Q=Object(f.useState)(null!==(t=JSON.parse(sessionStorage.getItem("language")))&&void 0!==t?t:{icon:C.a,title:"English"}),q=Object(n.a)(Q,2),J=q[0],X=q[1],$=Object(f.useState)(""),ee=Object(n.a)($,2),ae=ee[0],ne=ee[1],re=Object(f.useState)([]),ie=Object(n.a)(re,2),oe=ie[0],se=ie[1],ce=function(e,t){ne(e),V(!0),se(t)},le=function(e,t){"lang"===t?X(e):Object(me.c)(i,e)},ue=function(e){e.preventDefault(),i(Object(T.d)())};return Object(f.useEffect)(function(){if(i(Object(T.c)()),i(Object(G.f)()),i(Object(fe.d)()),E)i(Object(H.g)());else{var e=JSON.parse(sessionStorage.getItem("cartCnt"));I(e)}},[]),Object(f.useEffect)(function(){if(E){var e=l.filter(function(e){return"0"===(null===e||void 0===e?void 0:e.is_read)}).length;D(e)}},[l]),Object(f.useEffect)(function(){I(s)},[s]),Object(f.useEffect)(function(){(null===y||void 0===y?void 0:y.title)&&i(Object(G.d)((null===y||void 0===y?void 0:y.value)||"USD")),E&&i(Object(H.j)((null===y||void 0===y?void 0:y.value)||"USD"))},[y]),p.a.createElement(p.a.Fragment,null,Object.entries(h).length>0&&p.a.createElement(v.MetaTags,null,p.a.createElement("meta",{name:"description",content:h.description}),p.a.createElement("meta",{property:"og:title",content:h.title}),p.a.createElement("meta",{property:"og:image",content:h.img}),p.a.createElement("meta",{property:"og:url",content:h.url}),p.a.createElement("meta",{property:"og:keywords",content:h.keywords})),p.a.createElement("div",{className:"header top-menu-area",style:{background:Boolean(null===e||void 0===e?void 0:e.background)?e.background:""}},p.a.createElement("div",{className:"header-content"},p.a.createElement("div",{className:"header-section"},p.a.createElement("div",{className:"header-logo-link"},"advertiser"!==x?p.a.createElement(_.a,{to:"/"},p.a.createElement("img",{src:F.a,alt:"logoImage",className:"img-fluid"})):p.a.createElement(_.a,{to:"#"},p.a.createElement("img",{src:F.a,alt:"logoImage",className:"img-fluid"})))),p.a.createElement("div",{className:"header-section"},p.a.createElement("div",{className:"header-menu-item",style:{marginRight:15}},p.a.createElement(pe,{title:"find_an_activity",lists:ge,cols:2,titleFontSize:20})),p.a.createElement("div",{className:"header-menu-item",style:{marginLeft:15}},p.a.createElement(pe,{title:"list_an_activity",cols:2,titleFontSize:20,lists:he}))),p.a.createElement("div",{className:"header-section"},p.a.createElement("div",{className:"menu-item"},p.a.createElement(pe,{title:(null===J||void 0===J?void 0:J.title)||"EN",icon:null!==(a=null===J||void 0===J?void 0:J.icon)&&void 0!==a?a:C.a,lists:_e,cols:1,onChange:function(e,t){return le(e,t)}})),p.a.createElement("div",{className:"menu-item"},p.a.createElement(pe,{title:(null===y||void 0===y?void 0:y.title)||"USD",currency:null!==(r=y.currency)&&void 0!==r?r:"$",cols:2,lists:be,onChange:function(e,t){return le(e,t)}})),p.a.createElement("div",{className:"menu-item pointer"},p.a.createElement(_.a,{to:"/cart"},k>0?p.a.createElement(o.a,{badgeContent:k,color:"error"},p.a.createElement(m.a,null)):p.a.createElement(m.a,null))),p.a.createElement("div",{className:"menu-item"},E?p.a.createElement("div",{className:"author-info"},p.a.createElement("div",{className:"note-alert"},j>0&&p.a.createElement("span",null,j)),p.a.createElement("div",{className:"author-avatar"},p.a.createElement("img",{src:(null===E||void 0===E?void 0:E.profile_picture)||A.a,alt:"",className:"rounded-circle header-avatar w-100 h-100"})),p.a.createElement("ul",{className:"list-unstyled"},"advertiser"===x&&p.a.createElement("li",null,p.a.createElement(_.a,{to:"/#",onClick:function(){return window.location.href="/add-activities"}},p.a.createElement("i",{className:"la la-plus pr-10"}),p.a.createElement(K.b,{text:"add_activity"}))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/edit-account"},p.a.createElement("i",{className:"la la-user pr-10"}),p.a.createElement(K.b,{text:"my_profile"}))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/notification-list"},p.a.createElement("span",{className:"la la-bell-o pr-10"}),p.a.createElement(K.b,{text:"notifications"}),p.a.createElement("div",{className:"note-alert left-alert"},j>0&&p.a.createElement("span",null,j)))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/chat"},p.a.createElement("span",{className:"la la-comment pr-10"}),p.a.createElement(K.b,{text:"chat"}),p.a.createElement("div",{className:"note-alert left-alert",style:{marginLeft:"84px"}},d>0&&p.a.createElement("span",null,d)))),p.a.createElement("li",null,p.a.createElement(_.a,{to:"/",onClick:ue},p.a.createElement("i",{className:"la la-user pr-10"}),p.a.createElement(K.b,{text:"logout"}))))):p.a.createElement(p.a.Fragment,null,p.a.createElement(_.a,{to:"/sign-in",style:{color:"white"}},p.a.createElement(K.b,{text:"login"})),p.a.createElement("span",{className:"p-1 text-white"},"or"),p.a.createElement(_.a,{to:"/sign-up",style:{color:"white"}},p.a.createElement(K.b,{text:"sing_up"})))))),p.a.createElement("div",{className:"header-mobile"},p.a.createElement("div",{className:"header-mobile-logo"},p.a.createElement("div",{className:"mobile-logo"},"advertiser"!==x?p.a.createElement(_.a,{to:"/"},p.a.createElement("img",{src:Y.a,alt:"logoImage"})):p.a.createElement(_.a,{to:"#"},p.a.createElement("img",{src:Y.a,alt:"logoImage"})))),p.a.createElement("div",{className:"header-mobile-nav"},p.a.createElement("div",{className:"mobile-nav-item",onClick:function(){return ce("Language",_e)}},p.a.createElement("div",{className:"pr-1"},p.a.createElement(b.a,{src:null===J||void 0===J?void 0:J.icon}),p.a.createElement("span",null,null===J||void 0===J?void 0:J.title)),p.a.createElement(c.a,null)),p.a.createElement("div",{className:"mobile-nav-item",onClick:function(){return ce("Currency",be)}},p.a.createElement("div",null,p.a.createElement("span",{className:"pr-1"},p.a.createElement(K.b,{text:null===y||void 0===y?void 0:y.title}),"(",p.a.createElement("strong",null,y.currency),")")),p.a.createElement(c.a,null)),p.a.createElement("div",{className:"mobile-nav-item pointer"},p.a.createElement("div",{className:"mobile-cart"},p.a.createElement(_.a,{to:"/cart"},k>0?p.a.createElement(o.a,{badgeContent:k,color:"error"},p.a.createElement(m.a,{style:{width:22,height:22}})):p.a.createElement(m.a,{style:{width:22,height:22}})))),p.a.createElement("div",{className:"mobile-nav-item"},p.a.createElement("div",{className:"mobile-user"},p.a.createElement(u.a,{style:{width:24,height:24},onClick:function(){return B(!0)}}),p.a.createElement(de,{open:L,onClose:function(){return B(!1)},onOpenSide:function(){return B(!0)},notificationCnt:j,msgCnt:d,findActivityData:ge,listActivityData:he}))))),p.a.createElement(te,{open:z,onClose:function(){return V(!1)},title:ae,lists:oe,selCurrency:y,selLanguage:J,selItem:"",onChange:function(e,t){return le(e,t)},onSignOut:function(){return ue()}})))}a.d(t,"a",function(){return ve});var ge=[{path:"/all-listings-grid/search/",title:"all_activities"},{path:"/all-listings-grid/search/activities?category=Personal-Trainer",title:"personal_trainer"},{path:"/all-listings-grid/search/activities?category=Swimming-Less",title:"summer_camps"},{path:"/all-listings-grid/search/activities?category=Sports-Clubs",title:"sports_and_recreation"},{path:"/all-listings-grid/search/activities?category=Music",title:"music_and_arts"},{path:"/blog-grid-list",title:"blog"},{path:"/sign-in",title:"get_my_ticket"},{path:"/support",title:"user_support"}],he=[{path:"/sign-up-advertiser",title:"sign_login"},{path:"/blog-details/It\u2019s-Free-to-List-Activities-on-Activities-App",title:"get_more_customers"},{path:"/blog-details/How-to-Turn-Your-Hobby-into-A-New-Business-with-Activities-App",title:"marketing_mad_easy"},{path:"/blog-details/Become-an-Activities-App-Premier-Partner",title:"business_analytics"},{path:"/blog-details/How-to-Set-Up-Your-Business-on-Activities-App",title:"staff_attendee features"},{path:"/blog-details/How-To-Use-Your-QR-Check-In-Tool",title:"mobile_ticketing"},{path:"/blog-grid-list",title:"blog"},{path:"/blog-details/Become-an-Activities-App-Premier-Partner",title:"upto_in_free_social_media"},{path:"/personaliezed-mobile-app",title:"brand_mobile_app"}],_e=[{icon:C.a,title:"English",value:"en"},{icon:I.a,title:"Portugu\xeas",value:"po"},{icon:S.a,title:"Espa\xf1ola",value:"sp"},{icon:O.a,title:"Deutsch",value:"de"},{icon:x.a,title:"Fran\xe7aise",value:"fr"},{icon:E.a,title:"\u666e\u901a\u8bdd",value:"ch"}],be=[{title:"russian_ruble",currency:"\u20bd",value:"RUB"},{title:"euro",currency:"\u20ac",value:"EUR"},{title:"us_dollar",currency:"$",value:"USD"},{title:"british_pound",currency:"\xa3",value:"GBP"},{title:"australian_dollor",currency:"A$",value:"AUD"},{title:"swss_franc",currency:"CHF",value:"CHF"},{title:"uae_dirham",currency:"\u062f.\u0625",value:"AED"},{title:"argentine_peso",currency:"AR$",value:"ARS"},{title:"bulgarian_lev",currency:"\u043b\u0432",value:"BGN"},{title:"canadian_dollor",currency:"C$",value:"CAD"},{title:"childean_peso",currency:"CL$",value:"CLP"},{title:"chiness_yuan",currency:"RMB\xa5",value:"CNY"},{title:"colombian_peso",currency:"COL$",value:"COP"},{title:"czech_koruna",currency:"K\u010d",value:"CZK"},{title:"danish_krone",currency:"DKK",value:"DKK"},{title:"egyptian_pound",currency:"E\xa3",value:"EGP"},{title:"hongkong_dollar",currency:"HK$",value:"HKD"},{title:"croatian_kuna",currency:"kn",value:"HRK"},{title:"hungarian_forint",currency:"Ft",value:"HUF"}]},647:function(e,t,a){"use strict";a.d(t,"b",function(){return c}),a.d(t,"a",function(){return l}),a.d(t,"c",function(){return u});a(2);var n=a(624),r=a.n(n),i=a(625),o=a(186),s=function(){var e=Object(i.a)(r.a.mark(function e(t,a,n){var i,o,s=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]?s[3]:"POST",e.next=3,fetch("".concat(t),{method:i,headers:new Headers(a),body:JSON.stringify(n)});case 3:if((o=e.sent).ok){e.next=8;break}throw Error(o);case 8:return o=o.json(),e.abrupt("return",o);case 10:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),c=function(e){var t=e.to,a=void 0===t?[]:t,n=e.replyTo,r=void 0===n?"support@activities.app":n,i=e.subject,c=void 0===i?"Activies App":i,l=e.htmlContent,u=void 0===l?"Here is <a href='".concat(o.b,"'>Activies App.</a>"):l,d=(e.attaches,e.textContent),m=void 0===d?"Here is Activies App.":d,f=e.onFinish,p=void 0===f?console.log:f,v=e.onError,g=void 0===v?console.log:v;s("".concat(o.d.baseUrl,"/smtp/email"),{Accept:"application/json","Content-Type":"application/json","api-key":o.d.emailAPIKey},{sender:{name:"Activies App",email:"support@activities.app"},to:a,replyTo:{email:r||"support@activities.app"},subject:c,textContent:m||"Visit Us!",htmlContent:u}).then(function(e){p(e)}).catch(function(e){g(e)})},l=function(){var e,t,a,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log;s("".concat(o.d.baseUrl,"/contacts"),{Accept:"application/json","Content-Type":"application/json","api-key":o.d.emailAPIKey},{email:null!==(e=null===i||void 0===i?void 0:i.email)&&void 0!==e?e:"",attributes:{FNAME:null===(t=String(null!==(a=null===i||void 0===i?void 0:i.name)&&void 0!==a?a:"").split(" "))||void 0===t?void 0:t[0],LNAME:null===(n=String(null!==(r=null===i||void 0===i?void 0:i.name)&&void 0!==r?r:"").split(" "))||void 0===n?void 0:n[1]},listIds:[5]}).then(function(e){c(e)}).catch(function(e){c(e)})},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";c({to:[{email:"jwquaid@activities.app",name:"James"}],subject:"Activities App: New Provider",htmlContent:"\n      <h1>Activies App - New Provider</h1>\n      <p>\n        Hi James, This is Activities App.\n      </p>\n      <p>\n        A New Provider is registered.\n      </p>\n      <h3>email: ".concat(e,"<h3>\n      <h3>name: ").concat(t,'<h3>\n      <p>\n        <a href="https://d2qkgxa95zeei2.cloudfront.net/advertiser-list.php?pg=advertiser&spg=advertiserlist">Check it now</a>\n      </p>\n    ')})}},655:function(e,t){},656:function(e,t){},657:function(e,t){},658:function(e,t){},659:function(e,t){},660:function(e,t){},661:function(e,t){},662:function(e,t){},663:function(e,t){},664:function(e,t){},665:function(e,t){},666:function(e,t){},667:function(e,t){},668:function(e,t){},669:function(e,t){},677:function(e,t,a){"use strict";a.d(t,"d",function(){return E}),a.d(t,"c",function(){return N}),a.d(t,"a",function(){return x}),a.d(t,"b",function(){return U});var n=a(624),r=a.n(n),i=a(625),o=a(93),s=a(94),c=a(95),l=a(96),u=a(134),d=a(0),m=a.n(d),f=a(626),p=a.n(f),v=a(701),g=a(678),h=a.n(g),_=a(679),b=a.n(_),y=(a(680),a(179)),A=a(64),w=function(e){return e.preventDefault()},E=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"breadcrumb-wrapper content_above"},m.a.createElement("div",{className:"container"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-lg-12 text-center"},m.a.createElement("h1",{className:"page-title"},this.props.title))))))}}]),a}(d.Component),N=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).setFavourite=Object(i.a)(r.a.mark(function e(){var t,a,i,o,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=JSON.parse(sessionStorage.getItem("user"))){e.next=4;break}return p.a.info("Please sign in!"),e.abrupt("return",!1);case 4:return a={date:Object(u.a)().toLocaleDateString().slice(0,10),status:0,user_id:t.id,id:"",ad_id:n.props.filter.listing_id},e.next=7,y.b.collection("favourites_ad").get();case 7:if(i=e.sent,o=i.docs.map(function(e){return e.data()}),0!==o.filter(function(e){return e.user_id===t.id&&e.ad_id===n.props.filter.listing_id}).length){e.next=17;break}return e.next=13,y.b.collection("favourites_ad").add(a);case 13:s=e.sent,y.b.collection("favourites_ad").doc(s.id).update({id:s.id}).then(function(){p.a.success("Successfully adding in your favorite list!")}).catch(function(e){p.a.warning(e.message)}),e.next=18;break;case 17:p.a.info("This acitivity is saved for you");case 18:case"end":return e.stop()}},e)})),n.state={reviews:[]},n}return Object(s.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e,t,a,n=this;Boolean(null!==(e=null===(t=this.props)||void 0===t?void 0:null===(a=t.filter)||void 0===a?void 0:a.listing_id)&&void 0!==e?e:"")&&y.b.collection("reviews").where("id_listing","==",this.props.filter.listing_id).get().then(function(e){var t=e.docs.map(function(e){return e.data()});n.setState({reviews:t})})}},{key:"render",value:function(){var e,t=this.props.filter,a=t.category,n=t.badge,r=t.title,i=t.displayPrice;return m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"col-lg-8 col-md-7"},m.a.createElement("ul",{className:"list-unstyled listing-info--badges"},m.a.createElement("li",null,m.a.createElement("span",{className:"atbd_badge atbd_badge_"+n},n))),m.a.createElement("h1",null,r),m.a.createElement("ul",{className:"list-unstyled listing-info--meta"},m.a.createElement("li",null,m.a.createElement("div",{className:"average-ratings"},0!==this.state.reviews.length?m.a.createElement("span",null,m.a.createElement("strong",null,this.state.reviews.length),m.a.createElement(A.b,{text:"reviews"})):m.a.createElement("span",null,m.a.createElement("strong",null,m.a.createElement(A.b,{text:"no_reviews_yet"}))))),m.a.createElement("li",null,m.a.createElement("div",{className:"atbd_listing_category"},a)),!Boolean(null===(e=this.props)||void 0===e?void 0:e.activityType)&&m.a.createElement("li",null,m.a.createElement("div",{className:"detail-price"},Boolean(i)?"".concat(this.props.currency," ").concat(i):"free")))),m.a.createElement("div",{className:"col-lg-4 col-md-5 d-flex align-items-end justify-content-start justify-content-md-end"},m.a.createElement("div",{className:"atbd_listing_action_area"},m.a.createElement("div",{className:"atbd_action atbd_save"},m.a.createElement("div",{className:"action_button"},m.a.createElement("div",{onClick:this.setFavourite,className:"atbdp-favourites"},m.a.createElement("span",{className:"la la-heart-o"}),m.a.createElement(A.b,{text:"save"})))),m.a.createElement("div",{className:"atbd_action atbd_share dropdown"},m.a.createElement("span",{className:"dropdown-toggle",id:"social-links","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",role:"menu"},m.a.createElement("span",{className:"la la-share"}),"Share"),m.a.createElement("div",{className:"atbd_director_social_wrap dropdown-menu","aria-labelledby":"social-links"},m.a.createElement("ul",{className:"list-unstyled"},m.a.createElement("li",null,m.a.createElement("a",{onClick:w,href:" ",target:"_blank"},m.a.createElement("span",{className:"fab fa-facebook-f color-facebook"}),"Facebook")),m.a.createElement("li",null,m.a.createElement("a",{onClick:w,href:" ",target:"_blank"},m.a.createElement("span",{className:"fab fa-twitter color-twitter"}),"Twitter")),m.a.createElement("li",null,m.a.createElement("a",{onClick:w,href:" ",target:"_blank"},m.a.createElement("span",{className:"fab fa-pinterest-p color-pinterest"}),"Pinterest")),m.a.createElement("li",null,m.a.createElement("a",{onClick:w,href:" ",target:"_blank"},m.a.createElement("span",{className:"fab fa-google-plus-g color-gplus"}),"Google Plus")),m.a.createElement("li",null,m.a.createElement("a",{onClick:w,href:" ",target:"_blank"},m.a.createElement("span",{className:"fab fa-linkedin-in color-linkedin"}),"LinkedIn")),m.a.createElement("li",null,m.a.createElement("a",{onClick:w,href:" ",target:"_blank"},m.a.createElement("span",{className:"fab fa-tumblr color-tumblr"}),"Tumblr")),m.a.createElement("li",null,m.a.createElement("a",{onClick:w,href:" ",target:"_blank"},m.a.createElement("span",{className:"fab fa-vk color-vk"}),"VKontakte"))))))))}}]),a}(d.Component),x=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"about-intro content_above"},m.a.createElement("div",{className:"container"},m.a.createElement("div",{className:"row align-items-center"},m.a.createElement("div",{className:"col-lg-5 col-md-6"}),m.a.createElement("div",{className:"col-lg-6 offset-lg-1 col-md-6 offset-md-0 col-sm-8 offset-sm-2"},m.a.createElement("img",{src:h.a,alt:""}))))))}}]),a}(d.Component),U=function(e){Object(c.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return m.a.createElement("div",{className:"about-intro content_above"},m.a.createElement("div",{className:"container"},m.a.createElement("div",{className:"row align-items-center justify-content-center d-flex"},m.a.createElement("div",{className:"col-lg-6 col-md-8 col-sm-8 d-flex justify-content-center mb-3 react-video-section"},m.a.createElement(v.Player,{playIsline:!1,src:a(681),fluid:!1,height:303,width:"100%",poster:b.a})))))}}]),n}(d.Component)},678:function(e,t,a){e.exports=a.p+"static/media/about-us-top.855006b6.png"},679:function(e,t,a){e.exports=a.p+"static/media/video_Player.49876b5b.png"},680:function(e,t,a){},681:function(e,t,a){e.exports=a.p+"static/media/activities_presentation.628f1579.mp4"},751:function(e,t,a){"use strict";a.d(t,"a",function(){return v});var n=a(98),r=a.n(n),i=a(195),o=a.n(i),s=a(702),c=a.n(s),l=a(0),u=a.n(l),d=a(81),m=a(67);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach(function(t){r()(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){function n(n){var r=n.forwardedRef,i=c()(n,["forwardedRef"]),s=Object(d.a)(e,i),l=o()(s,3),m=l[0],f=l[1],v=l[2],g=p(p({},i),{},{t:m,i18n:f,tReady:v});return t.withRef&&r?g.ref=r:!t.withRef&&r&&(g.forwardedRef=r),u.a.createElement(a,g)}n.displayName="withI18nextTranslation(".concat(Object(m.a)(a),")"),n.WrappedComponent=a;return t.withRef?u.a.forwardRef(function(e,t){return u.a.createElement(n,Object.assign({},e,{forwardedRef:t}))}):n}}},812:function(e,t,a){"use strict";a.d(t,"a",function(){return g}),a.d(t,"b",function(){return h});var n=a(2),r=a(624),i=a.n(r),o=a(182),s=a(625),c=a(649),l=a.n(c),u=a(134),d=a(180),m=a.n(d),f=a(626),p=a.n(f),v=a(179),g=function(e,t){return function(){var a=Object(s.a)(i.a.mark(function a(r){var c,d,f,g,h,_,b,y,A,w,E;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,f=[],g=e.age_group_list.filter(function(t){return t.name===e.group_name}),h=[],e.sessions.length>0&&e.sessions.forEach(function(e){e.start_date=Object(u.a)(m()(e.start_date).format("YYYY-MM-DD")+" "+e.start_time),e.end_date=Object(u.a)(m()(e.end_date).format("YYYY-MM-DD")+" "+e.start_time),e.remaing_availability=Number(e.remaing_availability),e.price=Number(e.price),e.availability=Number(e.availability),h.push(e)}),"2"===e.camp_type&&delete e.covid_precautions,delete e.term_flag,delete e.sessions,delete e.category_list,delete e.age_group_list,delete e.group_name,(_=JSON.parse(sessionStorage.getItem("user")))&&(e.advertiser_id=_.id),b=v.f.ref(),a.next=16,Promise.all((null===e||void 0===e?void 0:e.picture.length)>0&&e.picture.map(function(){var e=Object(s.a)(i.a.mark(function e(t){var a,n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof t){e.next=11;break}return a="ad_"+Object(u.a)().toISOString().slice(0,9)+"_"+t.name,e.next=4,b.child("ad_images/".concat(a)).put(t);case 4:return n=e.sent,e.next=7,n.ref.getDownloadURL();case 7:r=e.sent,f=[].concat(Object(o.a)(f),[r]),e.next=12;break;case 11:f=[].concat(Object(o.a)(f),[t]);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 16:if("string"===typeof e.address&&(e.address=e.prevAddress),e.picture=f,e.start_date=Object(u.a)(m()(e.start_date).format("YYYY-MM-DD")+" "+e.start_time),e.end_date=Object(u.a)(m()(e.end_date).format("YYYY-MM-DD")+" "+e.end_time),e.age_group=g[0],e.status="6"===(null===e||void 0===e?void 0:e.status)?"1":e.status,e.price=Number(e.price),e.availability=Number(e.availability),e.remaing_availability=Number(e.remaing_availability),e.timestamp=Object(u.a)(),e.date=m()().format("MM/DD/YYYY"),e.price_currency=(null===(c=JSON.parse(localStorage.getItem("store")))||void 0===c?void 0:null===(d=c.currency)||void 0===d?void 0:d.value)||"USD",e.rating=0,delete e.prevAddress,!(y=JSON.parse(sessionStorage.getItem("editId")))){a.next=44;break}return e.id=y,a.next=35,v.b.collection("ad_listing").doc(y).set(Object(n.a)({},e),{merge:!0});case 35:return a.next=37,v.b.collection("ad_listing/".concat(y,"/sessions")).get();case 37:A=a.sent,(w=A.docs.map(function(e){return Object(n.a)(Object(n.a)({},e.data()),{},{id:e.id})})).length>0&&w.map(function(){var e=Object(s.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.b.collection("ad_listing").doc(y).collection("sessions").doc(t.id).delete();case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),h.length>0&&h.map(function(){var e=Object(s.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.b.collection("ad_listing").doc(y).collection("sessions").add(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),sessionStorage.removeItem("editId"),a.next=50;break;case 44:return a.next=46,v.b.collection("ad_listing").add(e);case 46:return E=a.sent,a.next=49,v.b.collection("ad_listing").doc(E.id).update({id:E.id});case 49:h.length>0&&h.map(function(){var e=Object(s.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.b.collection("ad_listing").doc(E.id).collection("sessions").add(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 50:p.a.success("Successfully adding your activity!"),l()("#normal-submit").removeClass("hidden"),l()("#uploading").addClass("hidden"),setTimeout(function(){t.push("/my-activities")},1500),a.next=59;break;case 56:a.prev=56,a.t0=a.catch(0),p.a.warning(a.t0.message);case 59:case"end":return a.stop()}},a,null,[[0,56]])}));return function(e){return a.apply(this,arguments)}}()},h=function(){var e=Object(s.a)(i.a.mark(function e(t){var a,n,r,o,s,c,l,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,n=void 0===a?"":a,r=t.data,o=void 0===r?"":r,s=t.contentType,c=void 0===s?"image/jpg":s,l=v.f.ref(),e.next=4,l.child("email_images/"+n).putString(o,"base64",{contentType:c});case 4:return u=e.sent,e.next=7,u.ref.getDownloadURL();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},848:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getListFiles=t.getImage=t.getBase64=t.getAcceptTypeString=t.openFileDialog=void 0,t.openFileDialog=function(e){e.current&&e.current.click()},t.getAcceptTypeString=function(e){return e&&e.length>0?e.map(function(e){return"."+e}).join(", "):"image/*"},t.getBase64=function(e){var t=new FileReader;return new Promise(function(a){t.addEventListener("load",function(){return a(String(t.result))}),t.readAsDataURL(e)})},t.getImage=function(e){var t=new Image;return new Promise(function(a){t.addEventListener("load",function(){return a(t)}),t.src=URL.createObjectURL(e)})},t.getListFiles=function(e,a){for(var n=[],r=0;r<e.length;r++)n.push(t.getBase64(e[r]));return Promise.all(n).then(function(t){return t.map(function(t,n){var r;return(r={})[a]=t,r.file=e[n],r})})}},849:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_DATA_URL_KEY=t.INIT_MAX_NUMBER=t.DEFAULT_NULL_INDEX=void 0,t.DEFAULT_NULL_INDEX=-1,t.INIT_MAX_NUMBER=1e3,t.DEFAULT_DATA_URL_KEY="dataURL"},964:function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return r(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(r,i){function o(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a(function(e){e(t)})).then(o,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var a,n,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],n=0}finally{a=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},c=this&&this.__spreadArrays||function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<a;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,r++)n[r]=i[o];return n};Object.defineProperty(t,"__esModule",{value:!0});var l=i(a(0)),u=a(848),d=a(965),m=a(849);t.default=function(e){var t=e.value,a=void 0===t?[]:t,n=e.onChange,r=e.onError,i=e.children,f=e.dataURLKey,p=void 0===f?m.DEFAULT_DATA_URL_KEY:f,v=e.multiple,g=void 0!==v&&v,h=e.maxNumber,_=void 0===h?m.INIT_MAX_NUMBER:h,b=e.acceptType,y=e.maxFileSize,A=e.resolutionWidth,w=e.resolutionHeight,E=e.resolutionType,N=a||[],x=l.useRef(null),U=l.useState(m.DEFAULT_NULL_INDEX),O=U[0],k=U[1],I=l.useState(null),P=I[0],S=I[1],j=l.useState(!1),C=j[0],D=j[1],F=l.useCallback(function(){return u.openFileDialog(x)},[x]),M=l.useCallback(function(){k(m.DEFAULT_NULL_INDEX),F()},[F]),Y=l.useCallback(function(){n&&n([])},[n]),T=function(e){return o(void 0,void 0,void 0,function(){var t;return s(this,function(a){switch(a.label){case 0:return[4,d.getErrorValidation({fileList:e,maxFileSize:y,maxNumber:_,acceptType:b,keyUpdate:O,resolutionType:E,resolutionWidth:A,resolutionHeight:w,value:N})];case 1:return(t=a.sent())?(S(t),r&&r(t,e),[2,!1]):(P&&S(null),[2,!0])}})})},G=function(e){return o(void 0,void 0,void 0,function(){var t,a,r,i;return s(this,function(o){switch(o.label){case 0:return e?[4,u.getListFiles(e,p)]:[2];case 1:return(t=o.sent()).length?[4,T(t)]:[2];case 2:if(!o.sent())return[2];if(r=[],O>m.DEFAULT_NULL_INDEX)(a=c(N))[O]=t[0],r.push(O);else if(g)for(a=c(N,t),i=N.length;i<a.length;i++)r.push(i);else a=[t[0]],r.push(0);return n&&n(a,r),[2]}})})},H=l.useMemo(function(){return u.getAcceptTypeString(b)},[b]);return l.default.createElement(l.default.Fragment,null,l.default.createElement("input",{type:"file",accept:H,ref:x,multiple:g&&O===m.DEFAULT_NULL_INDEX,onChange:function(e){return o(void 0,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,G(e.target.files)];case 1:return t.sent(),O>m.DEFAULT_NULL_INDEX&&k(m.DEFAULT_NULL_INDEX),x.current&&(x.current.value=""),[2]}})})},style:{display:"none"}}),i&&i({imageList:N,onImageUpload:M,onImageRemoveAll:Y,onImageUpdate:function(e){k(e),F()},onImageRemove:function(e){var t=c(N);Array.isArray(e)?e.forEach(function(e){t.splice(e,1)}):t.splice(e,1),n&&n(t)},errors:P,dragProps:{onDrop:function(e){e.preventDefault(),e.stopPropagation(),D(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(G(e.dataTransfer.files),e.dataTransfer.clearData())},onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.items&&e.dataTransfer.items.length>0&&D(!0)},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),D(!1)},onDragOver:function(e){e.preventDefault(),e.stopPropagation()}},isDragging:C}))}},965:function(e,t,a){"use strict";var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))(function(r,i){function o(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a(function(e){e(t)})).then(o,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var a,n,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],n=0}finally{a=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorValidation=t.isMaxNumberValid=t.isAcceptTypeValid=t.isMaxFileSizeValid=t.isImageValid=t.isResolutionValid=void 0;var i=a(849),o=a(848);t.isResolutionValid=function(e,t,a,n){if(void 0===a&&(a=0),void 0===n&&(n=1),!a||!n||!e.width||!e.height)return!0;switch(t){case"absolute":if(e.width===a&&e.height===n)return!0;break;case"ratio":var r=a/n;if(e.width/e.height===r)return!0;break;case"less":if(e.width<=a&&e.height<=n)return!0;break;case"more":if(e.width>=a&&e.height>=n)return!0}return!1},t.isImageValid=function(e){return!!e.includes("image")},t.isMaxFileSizeValid=function(e,t){return!t||e<=t},t.isAcceptTypeValid=function(e,t){if(e&&e.length>0){var a=t.split(".").pop()||"";if(e.findIndex(function(e){return e.toLowerCase()===a.toLowerCase()})<0)return!1}return!0},t.isMaxNumberValid=function(e,t,a){if(0!==t&&!t)return!0;if(a===i.DEFAULT_NULL_INDEX){if(e<=t)return!0}else if(e<=t+1)return!0;return!1},t.getErrorValidation=function(e){var a=e.fileList,i=e.value,s=e.maxNumber,c=e.keyUpdate,l=e.acceptType,u=e.maxFileSize,d=e.resolutionType,m=e.resolutionWidth,f=e.resolutionHeight;return n(void 0,void 0,void 0,function(){var e,n,p,v;return r(this,function(r){switch(r.label){case 0:return e={},t.isMaxNumberValid(a.length+i.length,s,c)?[3,1]:(e.maxNumber=!0,[3,5]);case 1:n=0,r.label=2;case 2:return n<a.length?(p=a[n].file)?t.isImageValid(p.type)&&t.isAcceptTypeValid(l,p.name)?t.isMaxFileSizeValid(p.size,u)?d?[4,o.getImage(p)]:[3,4]:(e.maxFileSize=!0,[3,5]):(e.acceptType=!0,[3,5]):[3,4]:[3,5];case 3:if(v=r.sent(),!t.isResolutionValid(v,d,m,f))return e.resolution=!0,[3,5];r.label=4;case 4:return n++,[3,2];case 5:return Object.values(e).find(Boolean)?[2,e]:[2,null]}})})}},966:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return a}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function createCommonjsModule(e){var t={exports:{}};return e(t,t.exports),t.exports}var UZIP_1=createCommonjsModule(function(e){var t,a,n={};e.exports=n,n.parse=function(e,t){for(var a=n.bin.readUshort,r=n.bin.readUint,i=0,o={},s=new Uint8Array(e),c=s.length-4;101010256!=r(s,c);)c--;i=c,i+=4;var l=a(s,i+=4),u=(a(s,i+=2),r(s,i+=2)),d=r(s,i+=4);i+=4,i=d;for(var m=0;m<l;m++){r(s,i),i+=4,i+=4,i+=4,r(s,i+=4),u=r(s,i+=4);var f=r(s,i+=4),p=a(s,i+=4),v=a(s,i+2),g=a(s,i+4);i+=6;var h=r(s,i+=8);i+=4,i+=p+v+g,n._readLocal(s,h,o,u,f,t)}return o},n._readLocal=function(e,t,a,r,i,o){var s=n.bin.readUshort,c=n.bin.readUint,l=(c(e,t),s(e,t+=4),s(e,t+=2),s(e,t+=2));c(e,t+=2),c(e,t+=4),t+=4;var u=s(e,t+=8),d=s(e,t+=2);t+=2;var m=n.bin.readUTF8(e,t,u);if(t+=u,t+=d,o)a[m]={size:i,csize:r};else{var f=new Uint8Array(e.buffer,t);if(0==l)a[m]=new Uint8Array(f.buffer.slice(t,t+r));else{if(8!=l)throw"unknown compression method: "+l;var p=new Uint8Array(i);n.inflateRaw(f,p),a[m]=p}}},n.inflateRaw=function(e,t){return n.F.inflate(e,t)},n.inflate=function(e,t){return e[0],e[1],n.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},n.deflate=function(e,t){null==t&&(t={level:6});var a=0,r=new Uint8Array(50+Math.floor(1.1*e.length));r[a]=120,r[a+1]=156,a+=2,a=n.F.deflateRaw(e,r,a,t.level);var i=n.adler(e,0,e.length);return r[a+0]=i>>>24&255,r[a+1]=i>>>16&255,r[a+2]=i>>>8&255,r[a+3]=i>>>0&255,new Uint8Array(r.buffer,0,a+4)},n.deflateRaw=function(e,t){null==t&&(t={level:6});var a=new Uint8Array(50+Math.floor(1.1*e.length)),r=n.F.deflateRaw(e,a,r,t.level);return new Uint8Array(a.buffer,0,r)},n.encode=function(e,t){null==t&&(t=!1);var a=0,r=n.bin.writeUint,i=n.bin.writeUshort,o={};for(var s in e){var c=!n._noNeed(s)&&!t,l=e[s],u=n.crc.crc(l,0,l.length);o[s]={cpr:c,usize:l.length,crc:u,file:c?n.deflateRaw(l):l}}for(var s in o)a+=o[s].file.length+30+46+2*n.bin.sizeUTF8(s);a+=22;var d=new Uint8Array(a),m=0,f=[];for(var s in o){var p=o[s];f.push(m),m=n._writeHeader(d,m,s,p,0)}var v=0,g=m;for(var s in o)p=o[s],f.push(m),m=n._writeHeader(d,m,s,p,1,f[v++]);var h=m-g;return r(d,m,101010256),m+=4,i(d,m+=4,v),i(d,m+=2,v),r(d,m+=2,h),r(d,m+=4,g),m+=4,m+=2,d.buffer},n._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return-1!="png,jpg,jpeg,zip".indexOf(t)},n._writeHeader=function(e,t,a,r,i,o){var s=n.bin.writeUint,c=n.bin.writeUshort,l=r.file;return s(e,t,0==i?67324752:33639248),t+=4,1==i&&(t+=2),c(e,t,20),c(e,t+=2,0),c(e,t+=2,r.cpr?8:0),s(e,t+=2,0),s(e,t+=4,r.crc),s(e,t+=4,l.length),s(e,t+=4,r.usize),c(e,t+=4,n.bin.sizeUTF8(a)),c(e,t+=2,0),t+=2,1==i&&(t+=2,t+=2,s(e,t+=6,o),t+=4),t+=n.bin.writeUTF8(e,t,a),0==i&&(e.set(l,t),t+=l.length),t},n.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var a=t,n=0;n<8;n++)1&a?a=3988292384^a>>>1:a>>>=1;e[t]=a}return e}(),update:function(e,t,a,r){for(var i=0;i<r;i++)e=n.crc.table[255&(e^t[a+i])]^e>>>8;return e},crc:function(e,t,a){return 4294967295^n.crc.update(4294967295,e,t,a)}},n.adler=function(e,t,a){for(var n=1,r=0,i=t,o=t+a;i<o;){for(var s=Math.min(i+5552,o);i<s;)r+=n+=e[i++];n%=65521,r%=65521}return r<<16|n},n.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,a){e[t]=255&a,e[t+1]=a>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,a){e[t]=255&a,e[t+1]=a>>8&255,e[t+2]=a>>16&255,e[t+3]=a>>24&255},readASCII:function(e,t,a){for(var n="",r=0;r<a;r++)n+=String.fromCharCode(e[t+r]);return n},writeASCII:function(e,t,a){for(var n=0;n<a.length;n++)e[t+n]=a.charCodeAt(n)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,a){for(var r,i="",o=0;o<a;o++)i+="%"+n.bin.pad(e[t+o].toString(16));try{r=decodeURIComponent(i)}catch(r){return n.bin.readASCII(e,t,a)}return r},writeUTF8:function(e,t,a){for(var n=a.length,r=0,i=0;i<n;i++){var o=a.charCodeAt(i);if(0==(4294967168&o))e[t+r]=o,r++;else if(0==(4294965248&o))e[t+r]=192|o>>6,e[t+r+1]=128|o>>0&63,r+=2;else if(0==(4294901760&o))e[t+r]=224|o>>12,e[t+r+1]=128|o>>6&63,e[t+r+2]=128|o>>0&63,r+=3;else{if(0!=(4292870144&o))throw"e";e[t+r]=240|o>>18,e[t+r+1]=128|o>>12&63,e[t+r+2]=128|o>>6&63,e[t+r+3]=128|o>>0&63,r+=4}}return r},sizeUTF8:function(e){for(var t=e.length,a=0,n=0;n<t;n++){var r=e.charCodeAt(n);if(0==(4294967168&r))a++;else if(0==(4294965248&r))a+=2;else if(0==(4294901760&r))a+=3;else{if(0!=(4292870144&r))throw"e";a+=4}}return a}},n.F={},n.F.deflateRaw=function(e,t,a,r){var i=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][r],o=n.F.U,s=n.F._goodIndex,c=(n.F._hash,n.F._putsE),l=0,u=a<<3,d=0,m=e.length;if(0==r){for(;l<m;)c(t,u,l+(N=Math.min(65535,m-l))==m?1:0),u=n.F._copyExact(e,l,N,t,u+8),l+=N;return u>>>3}var f=o.lits,p=o.strt,v=o.prev,g=0,h=0,_=0,b=0,y=0,A=0;for(m>2&&(p[A=n.F._hash(e,0)]=0),l=0;l<m;l++){if(y=A,l+1<m-2){A=n.F._hash(e,l+1);var w=l+1&32767;v[w]=p[A],p[A]=w}if(d<=l){(g>14e3||h>26697)&&m-l>100&&(d<l&&(f[g]=l-d,g+=2,d=l),u=n.F._writeBlock(l==m-1||d==m?1:0,f,g,b,e,_,l-_,t,u),g=h=b=0,_=l);var E=0;l<m-2&&(E=n.F._bestMatch(e,l,v,y,Math.min(i[2],m-l),i[3]));var N=E>>>16,x=65535&E;if(0!=E){x=65535&E;var U=s(N=E>>>16,o.of0);o.lhst[257+U]++;var O=s(x,o.df0);o.dhst[O]++,b+=o.exb[U]+o.dxb[O],f[g]=N<<23|l-d,f[g+1]=x<<16|U<<8|O,g+=2,d=l+N}else o.lhst[e[l]]++;h++}}for(_==l&&0!=e.length||(d<l&&(f[g]=l-d,g+=2,d=l),u=n.F._writeBlock(1,f,g,b,e,_,l-_,t,u),g=0,h=0,g=h=b=0,_=l);0!=(7&u);)u++;return u>>>3},n.F._bestMatch=function(e,t,a,r,i,o){var s=32767&t,c=a[s],l=s-c+32768&32767;if(c==s||r!=n.F._hash(e,t-l))return 0;for(var u=0,d=0,m=Math.min(32767,t);l<=m&&0!=--o&&c!=s;){if(0==u||e[t+u]==e[t+u-l]){var f=n.F._howLong(e,t,l);if(f>u){if(d=l,(u=f)>=i)break;l+2<f&&(f=l+2);for(var p=0,v=0;v<f-2;v++){var g=t-l+v+32768&32767,h=g-a[g]+32768&32767;h>p&&(p=h,c=g)}}}l+=(s=c)-(c=a[s])+32768&32767}return u<<16|d},n.F._howLong=function(e,t,a){if(e[t]!=e[t-a]||e[t+1]!=e[t+1-a]||e[t+2]!=e[t+2-a])return 0;var n=t,r=Math.min(e.length,t+258);for(t+=3;t<r&&e[t]==e[t-a];)t++;return t-n},n.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(e,t,a,r,i,o,s,c,l){var u,d,m,f,p,v,g,h,_,b=n.F.U,y=n.F._putsF,A=n.F._putsE;b.lhst[256]++,d=(u=n.F.getTrees())[0],m=u[1],f=u[2],p=u[3],v=u[4],g=u[5],h=u[6],_=u[7];var w=32+(0==(l+3&7)?0:8-(l+3&7))+(s<<3),E=r+n.F.contSize(b.fltree,b.lhst)+n.F.contSize(b.fdtree,b.dhst),N=r+n.F.contSize(b.ltree,b.lhst)+n.F.contSize(b.dtree,b.dhst);N+=14+3*g+n.F.contSize(b.itree,b.ihst)+(2*b.ihst[16]+3*b.ihst[17]+7*b.ihst[18]);for(var x=0;x<286;x++)b.lhst[x]=0;for(x=0;x<30;x++)b.dhst[x]=0;for(x=0;x<19;x++)b.ihst[x]=0;var U=w<E&&w<N?0:E<N?1:2;if(y(c,l,e),y(c,l+1,U),l+=3,0==U){for(;0!=(7&l);)l++;l=n.F._copyExact(i,o,s,c,l)}else{var O,k;if(1==U&&(O=b.fltree,k=b.fdtree),2==U){n.F.makeCodes(b.ltree,d),n.F.revCodes(b.ltree,d),n.F.makeCodes(b.dtree,m),n.F.revCodes(b.dtree,m),n.F.makeCodes(b.itree,f),n.F.revCodes(b.itree,f),O=b.ltree,k=b.dtree,A(c,l,p-257),A(c,l+=5,v-1),A(c,l+=5,g-4),l+=4;for(var I=0;I<g;I++)A(c,l+3*I,b.itree[1+(b.ordr[I]<<1)]);l+=3*g,l=n.F._codeTiny(h,b.itree,c,l),l=n.F._codeTiny(_,b.itree,c,l)}for(var P=o,S=0;S<a;S+=2){for(var j=t[S],C=j>>>23,D=P+(8388607&j);P<D;)l=n.F._writeLit(i[P++],O,c,l);if(0!=C){var F=t[S+1],M=F>>16,Y=F>>8&255,T=255&F;A(c,l=n.F._writeLit(257+Y,O,c,l),C-b.of0[Y]),l+=b.exb[Y],y(c,l=n.F._writeLit(T,k,c,l),M-b.df0[T]),l+=b.dxb[T],P+=C}}l=n.F._writeLit(256,O,c,l)}return l},n.F._copyExact=function(e,t,a,n,r){var i=r>>>3;return n[i]=a,n[i+1]=a>>>8,n[i+2]=255-n[i],n[i+3]=255-n[i+1],i+=4,n.set(new Uint8Array(e.buffer,t,a),i),r+(a+4<<3)},n.F.getTrees=function(){for(var e=n.F.U,t=n.F._hufTree(e.lhst,e.ltree,15),a=n.F._hufTree(e.dhst,e.dtree,15),r=[],i=n.F._lenCodes(e.ltree,r),o=[],s=n.F._lenCodes(e.dtree,o),c=0;c<r.length;c+=2)e.ihst[r[c]]++;for(c=0;c<o.length;c+=2)e.ihst[o[c]]++;for(var l=n.F._hufTree(e.ihst,e.itree,7),u=19;u>4&&0==e.itree[1+(e.ordr[u-1]<<1)];)u--;return[t,a,l,i,s,u,r,o]},n.F.getSecond=function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(e[a+1]);return t},n.F.nonZero=function(e){for(var t="",a=0;a<e.length;a+=2)0!=e[a+1]&&(t+=(a>>1)+",");return t},n.F.contSize=function(e,t){for(var a=0,n=0;n<t.length;n++)a+=t[n]*e[1+(n<<1)];return a},n.F._codeTiny=function(e,t,a,r){for(var i=0;i<e.length;i+=2){var o=e[i],s=e[i+1];r=n.F._writeLit(o,t,a,r);var c=16==o?2:17==o?3:7;o>15&&(n.F._putsE(a,r,s,c),r+=c)}return r},n.F._lenCodes=function(e,t){for(var a=e.length;2!=a&&0==e[a-1];)a-=2;for(var n=0;n<a;n+=2){var r=e[n+1],i=n+3<a?e[n+3]:-1,o=n+5<a?e[n+5]:-1,s=0==n?-1:e[n-1];if(0==r&&i==r&&o==r){for(var c=n+5;c+2<a&&e[c+2]==r;)c+=2;(l=Math.min(c+1-n>>>1,138))<11?t.push(17,l-3):t.push(18,l-11),n+=2*l-2}else if(r==s&&i==r&&o==r){for(c=n+5;c+2<a&&e[c+2]==r;)c+=2;var l=Math.min(c+1-n>>>1,6);t.push(16,l-3),n+=2*l-2}else t.push(r,0)}return a>>>1},n.F._hufTree=function(e,t,a){var r=[],i=e.length,o=t.length,s=0;for(s=0;s<o;s+=2)t[s]=0,t[s+1]=0;for(s=0;s<i;s++)0!=e[s]&&r.push({lit:s,f:e[s]});var c=r.length,l=r.slice(0);if(0==c)return 0;if(1==c){var u=r[0].lit;return l=0==u?1:0,t[1+(u<<1)]=1,t[1+(l<<1)]=1,1}r.sort(function(e,t){return e.f-t.f});var d=r[0],m=r[1],f=0,p=1,v=2;for(r[0]={lit:-1,f:d.f+m.f,l:d,r:m,d:0};p!=c-1;)d=f!=p&&(v==c||r[f].f<r[v].f)?r[f++]:r[v++],m=f!=p&&(v==c||r[f].f<r[v].f)?r[f++]:r[v++],r[p++]={lit:-1,f:d.f+m.f,l:d,r:m};var g=n.F.setDepth(r[p-1],0);for(g>a&&(n.F.restrictDepth(l,a,g),g=a),s=0;s<c;s++)t[1+(l[s].lit<<1)]=l[s].d;return g},n.F.setDepth=function(e,t){return-1!=e.lit?(e.d=t,t):Math.max(n.F.setDepth(e.l,t+1),n.F.setDepth(e.r,t+1))},n.F.restrictDepth=function(e,t,a){var n=0,r=1<<a-t,i=0;for(e.sort(function(e,t){return t.d==e.d?e.f-t.f:t.d-e.d}),n=0;n<e.length&&e[n].d>t;n++){var o=e[n].d;e[n].d=t,i+=r-(1<<a-o)}for(i>>>=a-t;i>0;)(o=e[n].d)<t?(e[n].d++,i-=1<<t-o-1):n++;for(;n>=0;n--)e[n].d==t&&i<0&&(e[n].d--,i++);0!=i&&console.log("debt left")},n.F._goodIndex=function(e,t){var a=0;return t[16|a]<=e&&(a|=16),t[8|a]<=e&&(a|=8),t[4|a]<=e&&(a|=4),t[2|a]<=e&&(a|=2),t[1|a]<=e&&(a|=1),a},n.F._writeLit=function(e,t,a,r){return n.F._putsF(a,r,t[e<<1]),r+t[1+(e<<1)]},n.F.inflate=function(e,t){var a=Uint8Array;if(3==e[0]&&0==e[1])return t||new a(0);var r=n.F,i=r._bitsF,o=r._bitsE,s=r._decodeTiny,c=r.makeCodes,l=r.codes2map,u=r._get17,d=r.U,m=null==t;m&&(t=new a(e.length>>>2<<3));for(var f,p,v=0,g=0,h=0,_=0,b=0,y=0,A=0,w=0,E=0;0==v;)if(v=i(e,E,1),g=i(e,E+1,2),E+=3,0!=g){if(m&&(t=n.F._check(t,w+(1<<17))),1==g&&(f=d.flmap,p=d.fdmap,y=511,A=31),2==g){h=o(e,E,5)+257,_=o(e,E+5,5)+1,b=o(e,E+10,4)+4,E+=14;for(var N=0;N<38;N+=2)d.itree[N]=0,d.itree[N+1]=0;var x=1;for(N=0;N<b;N++){var U=o(e,E+3*N,3);d.itree[1+(d.ordr[N]<<1)]=U,U>x&&(x=U)}E+=3*b,c(d.itree,x),l(d.itree,x,d.imap),f=d.lmap,p=d.dmap,E=s(d.imap,(1<<x)-1,h+_,e,E,d.ttree);var O=r._copyOut(d.ttree,0,h,d.ltree);y=(1<<O)-1;var k=r._copyOut(d.ttree,h,_,d.dtree);A=(1<<k)-1,c(d.ltree,O),l(d.ltree,O,f),c(d.dtree,k),l(d.dtree,k,p)}for(;;){var I=f[u(e,E)&y];E+=15&I;var P=I>>>4;if(P>>>8==0)t[w++]=P;else{if(256==P)break;var S=w+P-254;if(P>264){var j=d.ldef[P-257];S=w+(j>>>3)+o(e,E,7&j),E+=7&j}var C=p[u(e,E)&A];E+=15&C;var D=C>>>4,F=d.ddef[D],M=(F>>>4)+i(e,E,15&F);for(E+=15&F,m&&(t=n.F._check(t,w+(1<<17)));w<S;)t[w]=t[w++-M],t[w]=t[w++-M],t[w]=t[w++-M],t[w]=t[w++-M];w=S}}}else{0!=(7&E)&&(E+=8-(7&E));var Y=4+(E>>>3),T=e[Y-4]|e[Y-3]<<8;m&&(t=n.F._check(t,w+T)),t.set(new a(e.buffer,e.byteOffset+Y,T),w),E=Y+T<<3,w+=T}return t.length==w?t:t.slice(0,w)},n.F._check=function(e,t){var a=e.length;if(t<=a)return e;var n=new Uint8Array(Math.max(a<<1,t));return n.set(e,0),n},n.F._decodeTiny=function(e,t,a,r,i,o){for(var s=n.F._bitsE,c=n.F._get17,l=0;l<a;){var u=e[c(r,i)&t];i+=15&u;var d=u>>>4;if(d<=15)o[l]=d,l++;else{var m=0,f=0;16==d?(f=3+s(r,i,2),i+=2,m=o[l-1]):17==d?(f=3+s(r,i,3),i+=3):18==d&&(f=11+s(r,i,7),i+=7);for(var p=l+f;l<p;)o[l]=m,l++}}return i},n.F._copyOut=function(e,t,a,n){for(var r=0,i=0,o=n.length>>>1;i<a;){var s=e[i+t];n[i<<1]=0,n[1+(i<<1)]=s,s>r&&(r=s),i++}for(;i<o;)n[i<<1]=0,n[1+(i<<1)]=0,i++;return r},n.F.makeCodes=function(e,t){for(var a,r,i,o,s=n.F.U,c=e.length,l=s.bl_count,u=0;u<=t;u++)l[u]=0;for(u=1;u<c;u+=2)l[e[u]]++;var d=s.next_code;for(a=0,l[0]=0,r=1;r<=t;r++)a=a+l[r-1]<<1,d[r]=a;for(i=0;i<c;i+=2)0!=(o=e[i+1])&&(e[i]=d[o],d[o]++)},n.F.codes2map=function(e,t,a){for(var r=e.length,i=n.F.U.rev15,o=0;o<r;o+=2)if(0!=e[o+1])for(var s=o>>1,c=e[o+1],l=s<<4|c,u=t-c,d=e[o]<<u,m=d+(1<<u);d!=m;)a[i[d]>>>15-t]=l,d++},n.F.revCodes=function(e,t){for(var a=n.F.U.rev15,r=15-t,i=0;i<e.length;i+=2){var o=e[i]<<t-e[i+1];e[i]=a[o]>>>r}},n.F._putsE=function(e,t,a){a<<=7&t;var n=t>>>3;e[n]|=a,e[n+1]|=a>>>8},n.F._putsF=function(e,t,a){a<<=7&t;var n=t>>>3;e[n]|=a,e[n+1]|=a>>>8,e[n+2]|=a>>>16},n.F._bitsE=function(e,t,a){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<a)-1},n.F._bitsF=function(e,t,a){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<a)-1},n.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},n.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},n.F.U=(t=Uint16Array,a=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new a(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new a(286),dhst:new a(30),ihst:new a(19),lits:new a(15e3),strt:new t(65536),prev:new t(32768)}),function(){for(var e=n.F.U,t=0;t<32768;t++){var a=t;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,e.rev15[t]=(a>>>16|a<<16)>>>17}function r(e,t,a){for(;0!=t--;)e.push(0,a)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];r(e.fltree,144,8),r(e.fltree,112,9),r(e.fltree,24,7),r(e.fltree,8,8),n.F.makeCodes(e.fltree,9),n.F.codes2map(e.fltree,9,e.flmap),n.F.revCodes(e.fltree,9),r(e.fdtree,32,5),n.F.makeCodes(e.fdtree,5),n.F.codes2map(e.fdtree,5,e.fdmap),n.F.revCodes(e.fdtree,5),r(e.itree,19,0),r(e.ltree,286,0),r(e.dtree,30,0),r(e.ttree,320,0)}()}),UZIP=Object.freeze(Object.assign(Object.create(null),UZIP_1,{default:UZIP_1})),UPNG={},N,W,H;UPNG.toRGBA8=function(e){var t=e.width,a=e.height;if(null==e.tabs.acTL)return[UPNG.toRGBA8.decodeImage(e.data,t,a,e).buffer];var n=[];null==e.frames[0].data&&(e.frames[0].data=e.data);for(var r=t*a*4,i=new Uint8Array(r),o=new Uint8Array(r),s=new Uint8Array(r),c=0;c<e.frames.length;c++){var l=e.frames[c],u=l.rect.x,d=l.rect.y,m=l.rect.width,f=l.rect.height,p=UPNG.toRGBA8.decodeImage(l.data,m,f,e);if(0!=c)for(var v=0;v<r;v++)s[v]=i[v];if(0==l.blend?UPNG._copyTile(p,m,f,i,t,a,u,d,0):1==l.blend&&UPNG._copyTile(p,m,f,i,t,a,u,d,1),n.push(i.buffer.slice(0)),0==l.dispose);else if(1==l.dispose)UPNG._copyTile(o,m,f,i,t,a,u,d,0);else if(2==l.dispose)for(v=0;v<r;v++)i[v]=s[v]}return n},UPNG.toRGBA8.decodeImage=function(e,t,a,n){var r=t*a,i=UPNG.decode._getBPP(n),o=Math.ceil(t*i/8),s=new Uint8Array(4*r),c=new Uint32Array(s.buffer),l=n.ctype,u=n.depth,d=UPNG._bin.readUshort;if(6==l){var m=r<<2;if(8==u)for(var f=0;f<m;f+=4)s[f]=e[f],s[f+1]=e[f+1],s[f+2]=e[f+2],s[f+3]=e[f+3];if(16==u)for(f=0;f<m;f++)s[f]=e[f<<1]}else if(2==l){var p=n.tabs.tRNS;if(null==p){if(8==u)for(f=0;f<r;f++){var v=3*f;c[f]=255<<24|e[v+2]<<16|e[v+1]<<8|e[v]}if(16==u)for(f=0;f<r;f++)v=6*f,c[f]=255<<24|e[v+4]<<16|e[v+2]<<8|e[v]}else{var g=p[0],h=p[1],_=p[2];if(8==u)for(f=0;f<r;f++){var b=f<<2;v=3*f,c[f]=255<<24|e[v+2]<<16|e[v+1]<<8|e[v],e[v]==g&&e[v+1]==h&&e[v+2]==_&&(s[b+3]=0)}if(16==u)for(f=0;f<r;f++)b=f<<2,v=6*f,c[f]=255<<24|e[v+4]<<16|e[v+2]<<8|e[v],d(e,v)==g&&d(e,v+2)==h&&d(e,v+4)==_&&(s[b+3]=0)}}else if(3==l){var y=n.tabs.PLTE,A=n.tabs.tRNS,w=A?A.length:0;if(1==u)for(var E=0;E<a;E++){var N=E*o,x=E*t;for(f=0;f<t;f++){b=x+f<<2;var U=3*(O=e[N+(f>>3)]>>7-((7&f)<<0)&1);s[b]=y[U],s[b+1]=y[U+1],s[b+2]=y[U+2],s[b+3]=O<w?A[O]:255}}if(2==u)for(E=0;E<a;E++)for(N=E*o,x=E*t,f=0;f<t;f++)b=x+f<<2,U=3*(O=e[N+(f>>2)]>>6-((3&f)<<1)&3),s[b]=y[U],s[b+1]=y[U+1],s[b+2]=y[U+2],s[b+3]=O<w?A[O]:255;if(4==u)for(E=0;E<a;E++)for(N=E*o,x=E*t,f=0;f<t;f++)b=x+f<<2,U=3*(O=e[N+(f>>1)]>>4-((1&f)<<2)&15),s[b]=y[U],s[b+1]=y[U+1],s[b+2]=y[U+2],s[b+3]=O<w?A[O]:255;if(8==u)for(f=0;f<r;f++){var O;b=f<<2,U=3*(O=e[f]),s[b]=y[U],s[b+1]=y[U+1],s[b+2]=y[U+2],s[b+3]=O<w?A[O]:255}}else if(4==l){if(8==u)for(f=0;f<r;f++){b=f<<2;var k=e[I=f<<1];s[b]=k,s[b+1]=k,s[b+2]=k,s[b+3]=e[I+1]}if(16==u)for(f=0;f<r;f++){var I;b=f<<2,k=e[I=f<<2],s[b]=k,s[b+1]=k,s[b+2]=k,s[b+3]=e[I+2]}}else if(0==l)for(g=n.tabs.tRNS?n.tabs.tRNS:-1,E=0;E<a;E++){var P=E*o,S=E*t;if(1==u)for(var j=0;j<t;j++){var C=(k=255*(e[P+(j>>>3)]>>>7-(7&j)&1))==255*g?0:255;c[S+j]=C<<24|k<<16|k<<8|k}else if(2==u)for(j=0;j<t;j++)C=(k=85*(e[P+(j>>>2)]>>>6-((3&j)<<1)&3))==85*g?0:255,c[S+j]=C<<24|k<<16|k<<8|k;else if(4==u)for(j=0;j<t;j++)C=(k=17*(e[P+(j>>>1)]>>>4-((1&j)<<2)&15))==17*g?0:255,c[S+j]=C<<24|k<<16|k<<8|k;else if(8==u)for(j=0;j<t;j++)C=(k=e[P+j])==g?0:255,c[S+j]=C<<24|k<<16|k<<8|k;else if(16==u)for(j=0;j<t;j++)k=e[P+(j<<1)],C=d(e,P+(j<<f))==g?0:255,c[S+j]=C<<24|k<<16|k<<8|k}return s},UPNG.decode=function(e){for(var t,a=new Uint8Array(e),n=8,r=UPNG._bin,i=r.readUshort,o=r.readUint,s={tabs:{},frames:[]},c=new Uint8Array(a.length),l=0,u=0,d=[137,80,78,71,13,10,26,10],m=0;m<8;m++)if(a[m]!=d[m])throw"The input is not a PNG file!";for(;n<a.length;){var f=r.readUint(a,n);n+=4;var p=r.readASCII(a,n,4);if(n+=4,"IHDR"==p)UPNG.decode._IHDR(a,n,s);else if("CgBI"==p)s.tabs[p]=a.slice(n,n+4);else if("IDAT"==p){for(m=0;m<f;m++)c[l+m]=a[n+m];l+=f}else if("acTL"==p)s.tabs[p]={num_frames:o(a,n),num_plays:o(a,n+4)},t=new Uint8Array(a.length);else if("fcTL"==p){var v;0!=u&&((v=s.frames[s.frames.length-1]).data=UPNG.decode._decompress(s,t.slice(0,u),v.rect.width,v.rect.height),u=0);var g={x:o(a,n+12),y:o(a,n+16),width:o(a,n+4),height:o(a,n+8)},h=i(a,n+22);h=i(a,n+20)/(0==h?100:h);var _={rect:g,delay:Math.round(1e3*h),dispose:a[n+24],blend:a[n+25]};s.frames.push(_)}else if("fdAT"==p){for(m=0;m<f-4;m++)t[u+m]=a[n+m+4];u+=f-4}else if("pHYs"==p)s.tabs[p]=[r.readUint(a,n),r.readUint(a,n+4),a[n+8]];else if("cHRM"==p)for(s.tabs[p]=[],m=0;m<8;m++)s.tabs[p].push(r.readUint(a,n+4*m));else if("tEXt"==p||"zTXt"==p){null==s.tabs[p]&&(s.tabs[p]={});var b=r.nextZero(a,n),y=r.readASCII(a,n,b-n),A=n+f-b-1;if("tEXt"==p)N=r.readASCII(a,b+1,A);else{var w=UPNG.decode._inflate(a.slice(b+2,b+2+A));N=r.readUTF8(w,0,w.length)}s.tabs[p][y]=N}else if("iTXt"==p){null==s.tabs[p]&&(s.tabs[p]={}),b=0;var E=n;b=r.nextZero(a,E),y=r.readASCII(a,E,b-E);var N,x=a[E=b+1];E+=2,b=r.nextZero(a,E),r.readASCII(a,E,b-E),E=b+1,b=r.nextZero(a,E),r.readUTF8(a,E,b-E),A=f-((E=b+1)-n),0==x?N=r.readUTF8(a,E,A):(w=UPNG.decode._inflate(a.slice(E,E+A)),N=r.readUTF8(w,0,w.length)),s.tabs[p][y]=N}else if("PLTE"==p)s.tabs[p]=r.readBytes(a,n,f);else if("hIST"==p){var U=s.tabs.PLTE.length/3;for(s.tabs[p]=[],m=0;m<U;m++)s.tabs[p].push(i(a,n+2*m))}else if("tRNS"==p)3==s.ctype?s.tabs[p]=r.readBytes(a,n,f):0==s.ctype?s.tabs[p]=i(a,n):2==s.ctype&&(s.tabs[p]=[i(a,n),i(a,n+2),i(a,n+4)]);else if("gAMA"==p)s.tabs[p]=r.readUint(a,n)/1e5;else if("sRGB"==p)s.tabs[p]=a[n];else if("bKGD"==p)0==s.ctype||4==s.ctype?s.tabs[p]=[i(a,n)]:2==s.ctype||6==s.ctype?s.tabs[p]=[i(a,n),i(a,n+2),i(a,n+4)]:3==s.ctype&&(s.tabs[p]=a[n]);else if("IEND"==p)break;n+=f,r.readUint(a,n),n+=4}return 0!=u&&((v=s.frames[s.frames.length-1]).data=UPNG.decode._decompress(s,t.slice(0,u),v.rect.width,v.rect.height),u=0),s.data=UPNG.decode._decompress(s,c,s.width,s.height),delete s.compress,delete s.interlace,delete s.filter,s},UPNG.decode._decompress=function(e,t,a,n){var r=UPNG.decode._getBPP(e),i=Math.ceil(a*r/8),o=new Uint8Array((i+1+e.interlace)*n);return t=e.tabs.CgBI?UPNG.inflateRaw(t,o):UPNG.decode._inflate(t,o),0==e.interlace?t=UPNG.decode._filterZero(t,e,0,a,n):1==e.interlace&&(t=UPNG.decode._readInterlace(t,e)),t},UPNG.decode._inflate=function(e,t){return UPNG.inflateRaw(new Uint8Array(e.buffer,2,e.length-6),t)},UPNG.inflateRaw=(H={},H.H={},H.H.N=function(e,t){var a,n,r=Uint8Array,i=0,o=0,s=0,c=0,l=0,u=0,d=0,m=0,f=0;if(3==e[0]&&0==e[1])return t||new r(0);var p=H.H,v=p.b,g=p.e,h=p.R,_=p.n,b=p.A,y=p.Z,A=p.m,w=null==t;for(w&&(t=new r(e.length>>>2<<5));0==i;)if(i=v(e,f,1),o=v(e,f+1,2),f+=3,0!=o){if(w&&(t=H.H.W(t,m+(1<<17))),1==o&&(a=A.J,n=A.h,u=511,d=31),2==o){s=g(e,f,5)+257,c=g(e,f+5,5)+1,l=g(e,f+10,4)+4,f+=14;for(var E=1,N=0;N<38;N+=2)A.Q[N]=0,A.Q[N+1]=0;for(N=0;N<l;N++){var x=g(e,f+3*N,3);A.Q[1+(A.X[N]<<1)]=x,x>E&&(E=x)}f+=3*l,_(A.Q,E),b(A.Q,E,A.u),a=A.w,n=A.d,f=h(A.u,(1<<E)-1,s+c,e,f,A.v);var U=p.V(A.v,0,s,A.C);u=(1<<U)-1;var O=p.V(A.v,s,c,A.D);d=(1<<O)-1,_(A.C,U),b(A.C,U,a),_(A.D,O),b(A.D,O,n)}for(;;){var k=a[y(e,f)&u];f+=15&k;var I=k>>>4;if(I>>>8==0)t[m++]=I;else{if(256==I)break;var P=m+I-254;if(I>264){var S=A.q[I-257];P=m+(S>>>3)+g(e,f,7&S),f+=7&S}var j=n[y(e,f)&d];f+=15&j;var C=j>>>4,D=A.c[C],F=(D>>>4)+v(e,f,15&D);for(f+=15&D;m<P;)t[m]=t[m++-F],t[m]=t[m++-F],t[m]=t[m++-F],t[m]=t[m++-F];m=P}}}else{0!=(7&f)&&(f+=8-(7&f));var M=4+(f>>>3),Y=e[M-4]|e[M-3]<<8;w&&(t=H.H.W(t,m+Y)),t.set(new r(e.buffer,e.byteOffset+M,Y),m),f=M+Y<<3,m+=Y}return t.length==m?t:t.slice(0,m)},H.H.W=function(e,t){var a=e.length;if(t<=a)return e;var n=new Uint8Array(a<<1);return n.set(e,0),n},H.H.R=function(e,t,a,n,r,i){for(var o=H.H.e,s=H.H.Z,c=0;c<a;){var l=e[s(n,r)&t];r+=15&l;var u=l>>>4;if(u<=15)i[c]=u,c++;else{var d=0,m=0;16==u?(m=3+o(n,r,2),r+=2,d=i[c-1]):17==u?(m=3+o(n,r,3),r+=3):18==u&&(m=11+o(n,r,7),r+=7);for(var f=c+m;c<f;)i[c]=d,c++}}return r},H.H.V=function(e,t,a,n){for(var r=0,i=0,o=n.length>>>1;i<a;){var s=e[i+t];n[i<<1]=0,n[1+(i<<1)]=s,s>r&&(r=s),i++}for(;i<o;)n[i<<1]=0,n[1+(i<<1)]=0,i++;return r},H.H.n=function(e,t){for(var a,n,r,i,o=H.H.m,s=e.length,c=o.j,l=0;l<=t;l++)c[l]=0;for(l=1;l<s;l+=2)c[e[l]]++;var u=o.K;for(a=0,c[0]=0,n=1;n<=t;n++)a=a+c[n-1]<<1,u[n]=a;for(r=0;r<s;r+=2)0!=(i=e[r+1])&&(e[r]=u[i],u[i]++)},H.H.A=function(e,t,a){for(var n=e.length,r=H.H.m.r,i=0;i<n;i+=2)if(0!=e[i+1])for(var o=i>>1,s=e[i+1],c=o<<4|s,l=t-s,u=e[i]<<l,d=u+(1<<l);u!=d;)a[r[u]>>>15-t]=c,u++},H.H.l=function(e,t){for(var a=H.H.m.r,n=15-t,r=0;r<e.length;r+=2){var i=e[r]<<t-e[r+1];e[r]=a[i]>>>n}},H.H.M=function(e,t,a){a<<=7&t;var n=t>>>3;e[n]|=a,e[n+1]|=a>>>8},H.H.I=function(e,t,a){a<<=7&t;var n=t>>>3;e[n]|=a,e[n+1]|=a>>>8,e[n+2]|=a>>>16},H.H.e=function(e,t,a){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<a)-1},H.H.b=function(e,t,a){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<a)-1},H.H.Z=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},H.H.i=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},H.H.m=(N=Uint16Array,W=Uint32Array,{K:new N(16),j:new N(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new N(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new W(32),J:new N(512),_:[],h:new N(32),$:[],w:new N(32768),C:[],v:[],d:new N(32768),D:[],u:new N(512),Q:[],r:new N(32768),s:new W(286),Y:new W(30),a:new W(19),t:new W(15e3),k:new N(65536),g:new N(32768)}),function(){for(var e=H.H.m,t=0;t<32768;t++){var a=t;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,e.r[t]=(a>>>16|a<<16)>>>17}function n(e,t,a){for(;0!=t--;)e.push(0,a)}for(t=0;t<32;t++)e.q[t]=e.S[t]<<3|e.T[t],e.c[t]=e.p[t]<<4|e.z[t];n(e._,144,8),n(e._,112,9),n(e._,24,7),n(e._,8,8),H.H.n(e._,9),H.H.A(e._,9,e.J),H.H.l(e._,9),n(e.$,32,5),H.H.n(e.$,5),H.H.A(e.$,5,e.h),H.H.l(e.$,5),n(e.Q,19,0),n(e.C,286,0),n(e.D,30,0),n(e.v,320,0)}(),H.H.N),UPNG.decode._readInterlace=function(e,t){for(var a=t.width,n=t.height,r=UPNG.decode._getBPP(t),i=r>>3,o=Math.ceil(a*r/8),s=new Uint8Array(n*o),c=0,l=[0,0,4,0,2,0,1],u=[0,4,0,2,0,1,0],d=[8,8,8,4,4,2,2],m=[8,8,4,4,2,2,1],f=0;f<7;){for(var p=d[f],v=m[f],g=0,h=0,_=l[f];_<n;)_+=p,h++;for(var b=u[f];b<a;)b+=v,g++;var y=Math.ceil(g*r/8);UPNG.decode._filterZero(e,t,c,g,h);for(var A=0,w=l[f];w<n;){for(var E=u[f],N=c+A*y<<3;E<a;){var x;if(1==r&&(x=(x=e[N>>3])>>7-(7&N)&1,s[w*o+(E>>3)]|=x<<7-((7&E)<<0)),2==r&&(x=(x=e[N>>3])>>6-(7&N)&3,s[w*o+(E>>2)]|=x<<6-((3&E)<<1)),4==r&&(x=(x=e[N>>3])>>4-(7&N)&15,s[w*o+(E>>1)]|=x<<4-((1&E)<<2)),r>=8)for(var U=w*o+E*i,O=0;O<i;O++)s[U+O]=e[(N>>3)+O];N+=r,E+=v}A++,w+=p}g*h!=0&&(c+=h*(1+y)),f+=1}return s},UPNG.decode._getBPP=function(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth},UPNG.decode._filterZero=function(e,t,a,n,r){var i=UPNG.decode._getBPP(t),o=Math.ceil(n*i/8),s=UPNG.decode._paeth;i=Math.ceil(i/8);var c=0,l=1,u=e[a],d=0;if(u>1&&(e[a]=[0,0,1][u-2]),3==u)for(d=i;d<o;d++)e[d+1]=e[d+1]+(e[d+1-i]>>>1)&255;for(var m=0;m<r;m++)if(d=0,0==(u=e[(l=(c=a+m*o)+m+1)-1]))for(;d<o;d++)e[c+d]=e[l+d];else if(1==u){for(;d<i;d++)e[c+d]=e[l+d];for(;d<o;d++)e[c+d]=e[l+d]+e[c+d-i]}else if(2==u)for(;d<o;d++)e[c+d]=e[l+d]+e[c+d-o];else if(3==u){for(;d<i;d++)e[c+d]=e[l+d]+(e[c+d-o]>>>1);for(;d<o;d++)e[c+d]=e[l+d]+(e[c+d-o]+e[c+d-i]>>>1)}else{for(;d<i;d++)e[c+d]=e[l+d]+s(0,e[c+d-o],0);for(;d<o;d++)e[c+d]=e[l+d]+s(e[c+d-i],e[c+d-o],e[c+d-i-o])}return e},UPNG.decode._paeth=function(e,t,a){var n=e+t-a,r=n-e,i=n-t,o=n-a;return r*r<=i*i&&r*r<=o*o?e:i*i<=o*o?t:a},UPNG.decode._IHDR=function(e,t,a){var n=UPNG._bin;a.width=n.readUint(e,t),t+=4,a.height=n.readUint(e,t),t+=4,a.depth=e[t],t++,a.ctype=e[t],t++,a.compress=e[t],t++,a.filter=e[t],t++,a.interlace=e[t],t++},UPNG._bin={nextZero:function(e,t){for(;0!=e[t];)t++;return t},readUshort:function(e,t){return e[t]<<8|e[t+1]},writeUshort:function(e,t,a){e[t]=a>>8&255,e[t+1]=255&a},readUint:function(e,t){return 16777216*e[t]+(e[t+1]<<16|e[t+2]<<8|e[t+3])},writeUint:function(e,t,a){e[t]=a>>24&255,e[t+1]=a>>16&255,e[t+2]=a>>8&255,e[t+3]=255&a},readASCII:function(e,t,a){for(var n="",r=0;r<a;r++)n+=String.fromCharCode(e[t+r]);return n},writeASCII:function(e,t,a){for(var n=0;n<a.length;n++)e[t+n]=a.charCodeAt(n)},readBytes:function(e,t,a){for(var n=[],r=0;r<a;r++)n.push(e[t+r]);return n},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,a){for(var n,r="",i=0;i<a;i++)r+="%"+UPNG._bin.pad(e[t+i].toString(16));try{n=decodeURIComponent(r)}catch(n){return UPNG._bin.readASCII(e,t,a)}return n}},UPNG._copyTile=function(e,t,a,n,r,i,o,s,c){for(var l=Math.min(t,r),u=Math.min(a,i),d=0,m=0,f=0;f<u;f++)for(var p=0;p<l;p++)if(o>=0&&s>=0?(d=f*t+p<<2,m=(s+f)*r+o+p<<2):(d=(-s+f)*t-o+p<<2,m=f*r+p<<2),0==c)n[m]=e[d],n[m+1]=e[d+1],n[m+2]=e[d+2],n[m+3]=e[d+3];else if(1==c){var v=e[d+3]*(1/255),g=e[d]*v,h=e[d+1]*v,_=e[d+2]*v,b=n[m+3]*(1/255),y=n[m]*b,A=n[m+1]*b,w=n[m+2]*b,E=1-v,N=v+b*E,x=0==N?0:1/N;n[m+3]=255*N,n[m+0]=(g+y*E)*x,n[m+1]=(h+A*E)*x,n[m+2]=(_+w*E)*x}else if(2==c)v=e[d+3],g=e[d],h=e[d+1],_=e[d+2],b=n[m+3],y=n[m],A=n[m+1],w=n[m+2],v==b&&g==y&&h==A&&_==w?(n[m]=0,n[m+1]=0,n[m+2]=0,n[m+3]=0):(n[m]=g,n[m+1]=h,n[m+2]=_,n[m+3]=v);else if(3==c){if(v=e[d+3],g=e[d],h=e[d+1],_=e[d+2],b=n[m+3],y=n[m],A=n[m+1],w=n[m+2],v==b&&g==y&&h==A&&_==w)continue;if(v<220&&b>20)return!1}return!0},UPNG.encode=function(e,t,a,n,r,i,o){null==n&&(n=0),null==o&&(o=!1);var s=UPNG.encode.compress(e,t,a,n,[!1,!1,!1,0,o]);return UPNG.encode.compressPNG(s,-1),UPNG.encode._main(s,t,a,r,i)},UPNG.encodeLL=function(e,t,a,n,r,i,o,s){for(var c={ctype:0+(1==n?0:2)+(0==r?0:4),depth:i,frames:[]},l=(n+r)*i,u=l*t,d=0;d<e.length;d++)c.frames.push({rect:{x:0,y:0,width:t,height:a},img:new Uint8Array(e[d]),blend:0,dispose:1,bpp:Math.ceil(l/8),bpl:Math.ceil(u/8)});return UPNG.encode.compressPNG(c,0,!0),UPNG.encode._main(c,t,a,o,s)},UPNG.encode._main=function(e,t,a,n,r){null==r&&(r={});var i=UPNG.crc.crc,o=UPNG._bin.writeUint,s=UPNG._bin.writeUshort,c=UPNG._bin.writeASCII,l=8,u=e.frames.length>1,d=!1,m=33+(u?20:0);if(null!=r.sRGB&&(m+=13),null!=r.pHYs&&(m+=21),3==e.ctype){for(var f=e.plte.length,p=0;p<f;p++)e.plte[p]>>>24!=255&&(d=!0);m+=8+3*f+4+(d?8+1*f+4:0)}for(var v=0;v<e.frames.length;v++)u&&(m+=38),m+=(N=e.frames[v]).cimg.length+12,0!=v&&(m+=4);m+=12;var g=new Uint8Array(m),h=[137,80,78,71,13,10,26,10];for(p=0;p<8;p++)g[p]=h[p];if(o(g,l,13),c(g,l+=4,"IHDR"),o(g,l+=4,t),o(g,l+=4,a),g[l+=4]=e.depth,g[++l]=e.ctype,g[++l]=0,g[++l]=0,g[++l]=0,o(g,++l,i(g,l-17,17)),l+=4,null!=r.sRGB&&(o(g,l,1),c(g,l+=4,"sRGB"),g[l+=4]=r.sRGB,o(g,++l,i(g,l-5,5)),l+=4),null!=r.pHYs&&(o(g,l,9),c(g,l+=4,"pHYs"),o(g,l+=4,r.pHYs[0]),o(g,l+=4,r.pHYs[1]),g[l+=4]=r.pHYs[2],o(g,++l,i(g,l-13,13)),l+=4),u&&(o(g,l,8),c(g,l+=4,"acTL"),o(g,l+=4,e.frames.length),o(g,l+=4,null!=r.loop?r.loop:0),o(g,l+=4,i(g,l-12,12)),l+=4),3==e.ctype){for(o(g,l,3*(f=e.plte.length)),c(g,l+=4,"PLTE"),l+=4,p=0;p<f;p++){var _=3*p,b=e.plte[p],y=255&b,A=b>>>8&255,w=b>>>16&255;g[l+_+0]=y,g[l+_+1]=A,g[l+_+2]=w}if(o(g,l+=3*f,i(g,l-3*f-4,3*f+4)),l+=4,d){for(o(g,l,f),c(g,l+=4,"tRNS"),l+=4,p=0;p<f;p++)g[l+p]=e.plte[p]>>>24&255;o(g,l+=f,i(g,l-f-4,f+4)),l+=4}}var E=0;for(v=0;v<e.frames.length;v++){var N=e.frames[v];u&&(o(g,l,26),c(g,l+=4,"fcTL"),o(g,l+=4,E++),o(g,l+=4,N.rect.width),o(g,l+=4,N.rect.height),o(g,l+=4,N.rect.x),o(g,l+=4,N.rect.y),s(g,l+=4,n[v]),s(g,l+=2,1e3),g[l+=2]=N.dispose,g[++l]=N.blend,o(g,++l,i(g,l-30,30)),l+=4);var x=N.cimg;o(g,l,(f=x.length)+(0==v?0:4));var U=l+=4;c(g,l,0==v?"IDAT":"fdAT"),l+=4,0!=v&&(o(g,l,E++),l+=4),g.set(x,l),o(g,l+=f,i(g,U,l-U)),l+=4}return o(g,l,0),c(g,l+=4,"IEND"),o(g,l+=4,i(g,l-4,4)),l+=4,g.buffer},UPNG.encode.compressPNG=function(e,t,a){for(var n=0;n<e.frames.length;n++){var r=e.frames[n],i=(r.rect.width,r.rect.height),o=new Uint8Array(i*r.bpl+i);r.cimg=UPNG.encode._filterZero(r.img,i,r.bpp,r.bpl,o,t,a)}},UPNG.encode.compress=function(e,t,a,n,r){for(var i=r[0],o=r[1],s=r[2],c=r[3],l=r[4],u=6,d=8,m=255,f=0;f<e.length;f++)for(var p=new Uint8Array(e[f]),v=p.length,g=0;g<v;g+=4)m&=p[g+3];var h=255!=m,_=UPNG.encode.framize(e,t,a,i,o,s),b={},y=[],A=[];if(0!=n){var w=[];for(g=0;g<_.length;g++)w.push(_[g].img.buffer);var E=UPNG.encode.concatRGBA(w),N=UPNG.quantize(E,n),x=0,U=new Uint8Array(N.abuf);for(g=0;g<_.length;g++){var O=(Z=_[g].img).length;for(A.push(new Uint8Array(N.inds.buffer,x>>2,O>>2)),f=0;f<O;f+=4)Z[f]=U[x+f],Z[f+1]=U[x+f+1],Z[f+2]=U[x+f+2],Z[f+3]=U[x+f+3];x+=O}for(g=0;g<N.plte.length;g++)y.push(N.plte[g].est.rgba)}else for(f=0;f<_.length;f++){var k=_[f],I=new Uint32Array(k.img.buffer),P=k.rect.width,S=(v=I.length,new Uint8Array(v));for(A.push(S),g=0;g<v;g++){var j=I[g];if(0!=g&&j==I[g-1])S[g]=S[g-1];else if(g>P&&j==I[g-P])S[g]=S[g-P];else{var C=b[j];if(null==C&&(b[j]=C=y.length,y.push(j),y.length>=300))break;S[g]=C}}}var D=y.length;for(D<=256&&0==l&&(d=D<=2?1:D<=4?2:D<=16?4:8,d=Math.max(d,c)),f=0;f<_.length;f++){(k=_[f]).rect.x,k.rect.y,P=k.rect.width;var F=k.rect.height,M=k.img,Y=(new Uint32Array(M.buffer),4*P),T=4;if(D<=256&&0==l){Y=Math.ceil(d*P/8);for(var G=new Uint8Array(Y*F),H=A[f],R=0;R<F;R++){g=R*Y;var L=R*P;if(8==d)for(var B=0;B<P;B++)G[g+B]=H[L+B];else if(4==d)for(B=0;B<P;B++)G[g+(B>>1)]|=H[L+B]<<4-4*(1&B);else if(2==d)for(B=0;B<P;B++)G[g+(B>>2)]|=H[L+B]<<6-2*(3&B);else if(1==d)for(B=0;B<P;B++)G[g+(B>>3)]|=H[L+B]<<7-1*(7&B)}M=G,u=3,T=1}else if(0==h&&1==_.length){G=new Uint8Array(P*F*3);var W=P*F;for(g=0;g<W;g++){var Z,z=4*g;G[Z=3*g]=M[z],G[Z+1]=M[z+1],G[Z+2]=M[z+2]}M=G,u=2,T=3,Y=3*P}k.img=M,k.bpl=Y,k.bpp=T}return{ctype:u,depth:d,plte:y,frames:_}},UPNG.encode.framize=function(e,t,a,n,r,i){for(var o=[],s=0;s<e.length;s++){var c,l=new Uint8Array(e[s]),u=new Uint32Array(l.buffer),d=0,m=0,f=t,p=a,v=n?1:0;if(0!=s){for(var g=i||n||1==s||0!=o[s-2].dispose?1:2,h=0,_=1e9,b=0;b<g;b++){for(var y=new Uint8Array(e[s-1-b]),A=new Uint32Array(e[s-1-b]),w=t,E=a,N=-1,x=-1,U=0;U<a;U++)for(var O=0;O<t;O++)u[D=U*t+O]!=A[D]&&(O<w&&(w=O),O>N&&(N=O),U<E&&(E=U),U>x&&(x=U));-1==N&&(w=E=N=x=0),r&&(1==(1&w)&&w--,1==(1&E)&&E--);var k=(N-w+1)*(x-E+1);k<_&&(_=k,h=b,d=w,m=E,f=N-w+1,p=x-E+1)}y=new Uint8Array(e[s-1-h]),1==h&&(o[s-1].dispose=2),c=new Uint8Array(f*p*4),UPNG._copyTile(y,t,a,c,f,p,-d,-m,0),1==(v=UPNG._copyTile(l,t,a,c,f,p,-d,-m,3)?1:0)?UPNG.encode._prepareDiff(l,t,a,c,{x:d,y:m,width:f,height:p}):UPNG._copyTile(l,t,a,c,f,p,-d,-m,0)}else c=l.slice(0);o.push({rect:{x:d,y:m,width:f,height:p},img:c,blend:v,dispose:0})}if(n)for(s=0;s<o.length;s++)if(1!=(F=o[s]).blend){var I=F.rect,P=o[s-1].rect,S=Math.min(I.x,P.x),j=Math.min(I.y,P.y),C={x:S,y:j,width:Math.max(I.x+I.width,P.x+P.width)-S,height:Math.max(I.y+I.height,P.y+P.height)-j};o[s-1].dispose=1,s-1!=0&&UPNG.encode._updateFrame(e,t,a,o,s-1,C,r),UPNG.encode._updateFrame(e,t,a,o,s,C,r)}if(1!=e.length)for(var D=0;D<o.length;D++){var F;(F=o[D]).rect.width,F.rect.height}return o},UPNG.encode._updateFrame=function(e,t,a,n,r,i,o){for(var s=Uint8Array,c=Uint32Array,l=new s(e[r-1]),u=new c(e[r-1]),d=r+1<e.length?new s(e[r+1]):null,m=new s(e[r]),f=new c(m.buffer),p=t,v=a,g=-1,h=-1,_=0;_<i.height;_++)for(var b=0;b<i.width;b++){var y=i.x+b,A=i.y+_,w=A*t+y,E=f[w];0==E||0==n[r-1].dispose&&u[w]==E&&(null==d||0!=d[4*w+3])||(y<p&&(p=y),y>g&&(g=y),A<v&&(v=A),A>h&&(h=A))}-1==g&&(p=v=g=h=0),o&&(1==(1&p)&&p--,1==(1&v)&&v--),i={x:p,y:v,width:g-p+1,height:h-v+1};var N=n[r];N.rect=i,N.blend=1,N.img=new Uint8Array(i.width*i.height*4),0==n[r-1].dispose?(UPNG._copyTile(l,t,a,N.img,i.width,i.height,-i.x,-i.y,0),UPNG.encode._prepareDiff(m,t,a,N.img,i)):UPNG._copyTile(m,t,a,N.img,i.width,i.height,-i.x,-i.y,0)},UPNG.encode._prepareDiff=function(e,t,a,n,r){UPNG._copyTile(e,t,a,n,r.width,r.height,-r.x,-r.y,2)},UPNG.encode._filterZero=function(e,t,a,n,r,i,o){var s,c=[],l=[0,1,2,3,4];-1!=i?l=[i]:(t*n>5e5||1==a)&&(l=[0]),o&&(s={level:0});for(var u=UZIP,d=0;d<l.length;d++){for(var m=0;m<t;m++)UPNG.encode._filterLine(r,e,m,n,a,l[d]);c.push(u.deflate(r,s))}var f,p=1e9;for(d=0;d<c.length;d++)c[d].length<p&&(f=d,p=c[d].length);return c[f]},UPNG.encode._filterLine=function(e,t,a,n,r,i){var o=a*n,s=o+a,c=UPNG.decode._paeth;if(e[s]=i,s++,0==i)if(n<500)for(var l=0;l<n;l++)e[s+l]=t[o+l];else e.set(new Uint8Array(t.buffer,o,n),s);else if(1==i){for(l=0;l<r;l++)e[s+l]=t[o+l];for(l=r;l<n;l++)e[s+l]=t[o+l]-t[o+l-r]+256&255}else if(0==a){for(l=0;l<r;l++)e[s+l]=t[o+l];if(2==i)for(l=r;l<n;l++)e[s+l]=t[o+l];if(3==i)for(l=r;l<n;l++)e[s+l]=t[o+l]-(t[o+l-r]>>1)+256&255;if(4==i)for(l=r;l<n;l++)e[s+l]=t[o+l]-c(t[o+l-r],0,0)+256&255}else{if(2==i)for(l=0;l<n;l++)e[s+l]=t[o+l]+256-t[o+l-n]&255;if(3==i){for(l=0;l<r;l++)e[s+l]=t[o+l]+256-(t[o+l-n]>>1)&255;for(l=r;l<n;l++)e[s+l]=t[o+l]+256-(t[o+l-n]+t[o+l-r]>>1)&255}if(4==i){for(l=0;l<r;l++)e[s+l]=t[o+l]+256-c(0,t[o+l-n],0)&255;for(l=r;l<n;l++)e[s+l]=t[o+l]+256-c(t[o+l-r],t[o+l-n],t[o+l-r-n])&255}}},UPNG.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var a=t,n=0;n<8;n++)1&a?a=3988292384^a>>>1:a>>>=1;e[t]=a}return e}(),update:function(e,t,a,n){for(var r=0;r<n;r++)e=UPNG.crc.table[255&(e^t[a+r])]^e>>>8;return e},crc:function(e,t,a){return 4294967295^UPNG.crc.update(4294967295,e,t,a)}},UPNG.quantize=function(e,t){var a,n=new Uint8Array(e),r=n.slice(0),i=new Uint32Array(r.buffer),o=UPNG.quantize.getKDtree(r,t),s=o[0],c=o[1],l=UPNG.quantize.planeDst,u=n,d=i,m=u.length,f=new Uint8Array(n.length>>2);if(n.length<2e7)for(var p=0;p<m;p+=4){var v=u[p]*(1/255),g=u[p+1]*(1/255),h=u[p+2]*(1/255),_=u[p+3]*(1/255);a=UPNG.quantize.getNearest(s,v,g,h,_),f[p>>2]=a.ind,d[p>>2]=a.est.rgba}else for(p=0;p<m;p+=4){for(v=u[p]*(1/255),g=u[p+1]*(1/255),h=u[p+2]*(1/255),_=u[p+3]*(1/255),a=s;a.left;)a=l(a.est,v,g,h,_)<=0?a.left:a.right;f[p>>2]=a.ind,d[p>>2]=a.est.rgba}return{abuf:r.buffer,inds:f,plte:c}},UPNG.quantize.getKDtree=function(e,t,a){null==a&&(a=1e-4);var n=new Uint32Array(e.buffer),r={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};r.bst=UPNG.quantize.stats(e,r.i0,r.i1),r.est=UPNG.quantize.estats(r.bst);for(var i=[r];i.length<t;){for(var o=0,s=0,c=0;c<i.length;c++)i[c].est.L>o&&(o=i[c].est.L,s=c);if(o<a)break;var l=i[s],u=UPNG.quantize.splitPixels(e,n,l.i0,l.i1,l.est.e,l.est.eMq255);if(l.i0>=u||l.i1<=u)l.est.L=0;else{var d={i0:l.i0,i1:u,bst:null,est:null,tdst:0,left:null,right:null};d.bst=UPNG.quantize.stats(e,d.i0,d.i1),d.est=UPNG.quantize.estats(d.bst);var m={i0:u,i1:l.i1,bst:null,est:null,tdst:0,left:null,right:null};for(m.bst={R:[],m:[],N:l.bst.N-d.bst.N},c=0;c<16;c++)m.bst.R[c]=l.bst.R[c]-d.bst.R[c];for(c=0;c<4;c++)m.bst.m[c]=l.bst.m[c]-d.bst.m[c];m.est=UPNG.quantize.estats(m.bst),l.left=d,l.right=m,i[s]=d,i.push(m)}}for(i.sort(function(e,t){return t.bst.N-e.bst.N}),c=0;c<i.length;c++)i[c].ind=c;return[r,i]},UPNG.quantize.getNearest=function(e,t,a,n,r){if(null==e.left)return e.tdst=UPNG.quantize.dist(e.est.q,t,a,n,r),e;var i=UPNG.quantize.planeDst(e.est,t,a,n,r),o=e.left,s=e.right;i>0&&(o=e.right,s=e.left);var c=UPNG.quantize.getNearest(o,t,a,n,r);if(c.tdst<=i*i)return c;var l=UPNG.quantize.getNearest(s,t,a,n,r);return l.tdst<c.tdst?l:c},UPNG.quantize.planeDst=function(e,t,a,n,r){var i=e.e;return i[0]*t+i[1]*a+i[2]*n+i[3]*r-e.eMq},UPNG.quantize.dist=function(e,t,a,n,r){var i=t-e[0],o=a-e[1],s=n-e[2],c=r-e[3];return i*i+o*o+s*s+c*c},UPNG.quantize.splitPixels=function(e,t,a,n,r,i){var o=UPNG.quantize.vecDot;for(n-=4;a<n;){for(;o(e,a,r)<=i;)a+=4;for(;o(e,n,r)>i;)n-=4;if(a>=n)break;var s=t[a>>2];t[a>>2]=t[n>>2],t[n>>2]=s,a+=4,n-=4}for(;o(e,a,r)>i;)a-=4;return a+4},UPNG.quantize.vecDot=function(e,t,a){return e[t]*a[0]+e[t+1]*a[1]+e[t+2]*a[2]+e[t+3]*a[3]},UPNG.quantize.stats=function(e,t,a){for(var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=[0,0,0,0],i=a-t>>2,o=t;o<a;o+=4){var s=e[o]*(1/255),c=e[o+1]*(1/255),l=e[o+2]*(1/255),u=e[o+3]*(1/255);r[0]+=s,r[1]+=c,r[2]+=l,r[3]+=u,n[0]+=s*s,n[1]+=s*c,n[2]+=s*l,n[3]+=s*u,n[5]+=c*c,n[6]+=c*l,n[7]+=c*u,n[10]+=l*l,n[11]+=l*u,n[15]+=u*u}return n[4]=n[1],n[8]=n[2],n[9]=n[6],n[12]=n[3],n[13]=n[7],n[14]=n[11],{R:n,m:r,N:i}},UPNG.quantize.estats=function(e){var t=e.R,a=e.m,n=e.N,r=a[0],i=a[1],o=a[2],s=a[3],c=0==n?0:1/n,l=[t[0]-r*r*c,t[1]-r*i*c,t[2]-r*o*c,t[3]-r*s*c,t[4]-i*r*c,t[5]-i*i*c,t[6]-i*o*c,t[7]-i*s*c,t[8]-o*r*c,t[9]-o*i*c,t[10]-o*o*c,t[11]-o*s*c,t[12]-s*r*c,t[13]-s*i*c,t[14]-s*o*c,t[15]-s*s*c],u=l,d=UPNG.M4,m=[Math.random(),Math.random(),Math.random(),Math.random()],f=0,p=0;if(0!=n)for(var v=0;v<16&&(m=d.multVec(u,m),p=Math.sqrt(d.dot(m,m)),m=d.sml(1/p,m),!(0!=v&&Math.abs(p-f)<1e-9));v++)f=p;var g=[r*c,i*c,o*c,s*c];return{Cov:l,q:g,e:m,L:f,eMq255:d.dot(d.sml(255,g),m),eMq:d.dot(m,g),rgba:(Math.round(255*g[3])<<24|Math.round(255*g[2])<<16|Math.round(255*g[1])<<8|Math.round(255*g[0])<<0)>>>0}},UPNG.M4={multVec:function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],e[4]*t[0]+e[5]*t[1]+e[6]*t[2]+e[7]*t[3],e[8]*t[0]+e[9]*t[1]+e[10]*t[2]+e[11]*t[3],e[12]*t[0]+e[13]*t[1]+e[14]*t[2]+e[15]*t[3]]},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},sml:function(e,t){return[e*t[0],e*t[1],e*t[2],e*t[3]]}},UPNG.encode.concatRGBA=function(e){for(var t=0,a=0;a<e.length;a++)t+=e[a].byteLength;var n=new Uint8Array(t),r=0;for(a=0;a<e.length;a++){for(var i=new Uint8Array(e[a]),o=i.length,s=0;s<o;s+=4){var c=i[s],l=i[s+1],u=i[s+2],d=i[s+3];0==d&&(c=l=u=0),n[r+s]=c,n[r+s+1]=l,n[r+s+2]=u,n[r+s+3]=d}r+=o}return n.buffer};var isBrowser="undefined"!=typeof window,moduleMapper=isBrowser&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),CustomFile=isBrowser&&(moduleMapper&&moduleMapper.getOriginalSymbol(window,"File")||File),CustomFileReader=isBrowser&&(moduleMapper&&moduleMapper.getOriginalSymbol(window,"FileReader")||FileReader);function isAutoOrientationInBrowser(){return new Promise(function(e,t){var a,n,r,i;return void 0!==isAutoOrientationInBrowser.result?e(isAutoOrientationInBrowser.result):getFilefromDataUrl("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return drawFileInCanvas(a=o).then(function(o){try{return canvasToFile(n=o[1],a.type,a.name,a.lastModified).then(function(a){try{return r=a,cleanupCanvasMemory(n),drawFileInCanvas(r).then(function(a){try{return i=a[0],isAutoOrientationInBrowser.result=1===i.width&&2===i.height,e(isAutoOrientationInBrowser.result)}catch(e){return t(e)}},t)}catch(e){return t(e)}},t)}catch(e){return t(e)}},t)}catch(e){return t(e)}},t)})}function getDataUrlFromFile(e){return new Promise(function(t,a){var n=new CustomFileReader;n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)},n.readAsDataURL(e)})}function getFilefromDataUrl(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return new Promise(function(n){for(var r=e.split(","),i=r[0].match(/:(.*?);/)[1],o=globalThis.atob(r[1]),s=o.length,c=new Uint8Array(s);s--;)c[s]=o.charCodeAt(s);var l=new Blob([c],{type:i});l.name=t,l.lastModified=a,n(l)})}function loadImage(e){return new Promise(function(t,a){var n=new Image;n.onload=function(){return t(n)},n.onerror=function(e){return a(e)},n.src=e})}function drawImageInCanvas(e){var t=_slicedToArray(getNewCanvasAndCtx(e.width,e.height),2),a=t[0];return t[1].drawImage(e,0,0,a.width,a.height),a}function drawFileInCanvas(e){return new Promise(function(t,a){var n,r,i=function(){try{return r=drawImageInCanvas(n),t([n,r])}catch(e){return a(e)}},o=function(t){try{return getDataUrlFromFile(e).then(function(e){try{return loadImage(e).then(function(e){try{return n=e,i()}catch(e){return a(e)}},a)}catch(e){return a(e)}},a)}catch(e){return a(e)}};try{return createImageBitmap(e).then(function(e){try{return n=e,i()}catch(e){return o()}},o)}catch(e){o()}})}function canvasToFile(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return new Promise(function(i,o){var s,c,l;if("image/png"===t)return c=e.getContext("2d").getImageData(0,0,e.width,e.height).data,l=UPNG.encode([c],e.width,e.height,256*r),(s=new Blob([l],{type:t})).name=a,s.lastModified=n,d.call(this);var u=function(){return d.call(this)};return"function"==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?e.convertToBlob({type:t,quality:r}).then(function(e){try{return(s=e).name=a,s.lastModified=n,u.call(this)}catch(e){return o(e)}}.bind(this),o):getFilefromDataUrl(e.toDataURL(t,r),a,n).then(function(e){try{return s=e,u.call(this)}catch(e){return o(e)}}.bind(this),o);function d(){return i(s)}})}function getExifOrientation(e){return new Promise(function(t,a){var n=new CustomFileReader;n.onload=function(e){var a=new DataView(e.target.result);if(65496!=a.getUint16(0,!1))return t(-2);for(var n=a.byteLength,r=2;r<n;){if(a.getUint16(r+2,!1)<=8)return t(-1);var i=a.getUint16(r,!1);if(r+=2,65505==i){if(1165519206!=a.getUint32(r+=2,!1))return t(-1);var o=18761==a.getUint16(r+=6,!1);r+=a.getUint32(r+4,o);var s=a.getUint16(r,o);r+=2;for(var c=0;c<s;c++)if(274==a.getUint16(r+12*c,o))return t(a.getUint16(r+12*c+8,o))}else{if(65280!=(65280&i))break;r+=a.getUint16(r,!1)}}return t(-1)},n.onerror=function(e){return a(e)},n.readAsArrayBuffer(e)})}function handleMaxWidthOrHeight(e,t){var a,n=e.width,r=e.height,i=t.maxWidthOrHeight,o=e;if(isFinite(i)&&(n>i||r>i)){var s=_slicedToArray(getNewCanvasAndCtx(n,r),2);o=s[0],a=s[1],n>r?(o.width=i,o.height=r/n*i):(o.width=n/r*i,o.height=i),a.drawImage(e,0,0,o.width,o.height),cleanupCanvasMemory(e)}return o}function followExifOrientation(e,t){var a=e.width,n=e.height,r=_slicedToArray(getNewCanvasAndCtx(a,n),2),i=r[0],o=r[1];switch(4<t&&t<9?(i.width=n,i.height=a):(i.width=a,i.height=n),t){case 2:o.transform(-1,0,0,1,a,0);break;case 3:o.transform(-1,0,0,-1,a,n);break;case 4:o.transform(1,0,0,-1,0,n);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,n,0);break;case 7:o.transform(0,-1,-1,0,n,a);break;case 8:o.transform(0,-1,1,0,0,a)}return o.drawImage(e,0,0,a,n),cleanupCanvasMemory(e),i}function getNewCanvasAndCtx(e,t){var a,n;try{if(null===(n=(a=new OffscreenCanvas(e,t)).getContext("2d")))throw new Error("getContext of OffscreenCanvas returns null")}catch(e){n=(a=document.createElement("canvas")).getContext("2d")}return a.width=e,a.height=t,[a,n]}function cleanupCanvasMemory(e){e.width=0,e.height=0}function compress(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise(function(n,r){var i,o,s,c,l,u,d,m,f,p,v,g,h,_,b,y,A,w;function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;i+=e,t.onProgress(Math.min(i,100))}function N(e){i=Math.min(Math.max(e,i),100),t.onProgress(i)}return i=a,o=t.maxIteration||10,s=1024*t.maxSizeMB*1024,E(),drawFileInCanvas(e).then(function(a){try{var i=_slicedToArray(a,2);return i[0],c=i[1],E(),l=handleMaxWidthOrHeight(c,t),E(),new Promise(function(a,n){var r;if(!(r=t.exifOrientation))return getExifOrientation(e).then(function(e){try{return r=e,i.call(this)}catch(e){return n(e)}}.bind(this),n);function i(){return a(r)}return i.call(this)}).then(function(a){try{return u=a,E(),isAutoOrientationInBrowser().then(function(a){try{return d=a?l:followExifOrientation(l,u),E(),m=t.initialQuality||1,f=t.fileType||e.type,canvasToFile(d,f,e.name,e.lastModified,m).then(function(t){try{var a,i=function t(){if(o--&&(b>s||b>h)){var a,n,i=_slicedToArray(getNewCanvasAndCtx(a=v?.95*w.width:w.width,n=v?.95*w.height:w.height),2);return A=i[0],i[1].drawImage(w,0,0,a,n),m*=.95,canvasToFile(A,f,e.name,e.lastModified,m).then(function(e){try{return y=e,cleanupCanvasMemory(w),w=A,b=y.size,N(Math.min(99,Math.floor((_-b)/(_-s)*100))),t}catch(e){return r(e)}},r)}return[1]},u=function(){return cleanupCanvasMemory(w),cleanupCanvasMemory(A),cleanupCanvasMemory(l),cleanupCanvasMemory(d),cleanupCanvasMemory(c),N(100),n(y)};return p=t,E(),v=p.size>s,g=p.size>e.size,v||g?(h=e.size,_=p.size,b=_,w=d,(a=function(e){for(;e;){if(e.then)return void e.then(a,r);try{if(e.pop){if(e.length)return e.pop()?u.call(this):e;e=i}else e=e.call(this)}catch(e){return r(e)}}}.bind(this))(i)):(N(100),n(p))}catch(e){return r(e)}}.bind(this),r)}catch(e){return r(e)}}.bind(this),r)}catch(e){return r(e)}}.bind(this),r)}catch(e){return r(e)}}.bind(this),r)})}isBrowser&&(Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e});var cnt=0,imageCompressionLibUrl,worker;function createWorker(e){return"function"==typeof e&&(e="(".concat(f,")()")),new Worker(URL.createObjectURL(new Blob([e])))}function createSourceObject(e){return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}function stringify(e){return JSON.stringify(e,function(e,t){return"function"==typeof t?"BIC_FN:::(() => ".concat(t.toString(),")()"):t})}function parse(o){if("string"==typeof o)return o;var result={};return Object.entries(o).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];if("string"==typeof value&&value.startsWith("BIC_FN:::"))try{result[key]=eval(value.replace(/^BIC_FN:::/,""))}catch(e){throw console.log(key,e),e}else result[key]=parse(value)}),result}function generateLib(){return createSourceObject("\n    // reconstruct library\n    function imageCompression (){return (".concat(imageCompression,").apply(null, arguments)}\n\n    imageCompression.getDataUrlFromFile = ").concat(imageCompression.getDataUrlFromFile,"\n    imageCompression.getFilefromDataUrl = ").concat(imageCompression.getFilefromDataUrl,"\n    imageCompression.loadImage = ").concat(imageCompression.loadImage,"\n    imageCompression.drawImageInCanvas = ").concat(imageCompression.drawImageInCanvas,"\n    imageCompression.drawFileInCanvas = ").concat(imageCompression.drawFileInCanvas,"\n    imageCompression.canvasToFile = ").concat(imageCompression.canvasToFile,"\n    imageCompression.getExifOrientation = ").concat(imageCompression.getExifOrientation,"\n    imageCompression.handleMaxWidthOrHeight = ").concat(imageCompression.handleMaxWidthOrHeight,"\n    imageCompression.followExifOrientation = ").concat(imageCompression.followExifOrientation,"\n    imageCompression.cleanupCanvasMemory = ").concat(imageCompression.cleanupCanvasMemory,"\n    imageCompression.isAutoOrientationInBrowser = ").concat(imageCompression.isAutoOrientationInBrowser,"\n\n    // functions / objects\n    getDataUrlFromFile = imageCompression.getDataUrlFromFile\n    getFilefromDataUrl = imageCompression.getFilefromDataUrl\n    loadImage = imageCompression.loadImage\n    drawImageInCanvas = imageCompression.drawImageInCanvas\n    drawFileInCanvas = imageCompression.drawFileInCanvas\n    canvasToFile = imageCompression.canvasToFile\n    getExifOrientation = imageCompression.getExifOrientation\n    handleMaxWidthOrHeight = imageCompression.handleMaxWidthOrHeight\n    followExifOrientation = imageCompression.followExifOrientation\n    cleanupCanvasMemory = imageCompression.cleanupCanvasMemory\n    isAutoOrientationInBrowser = imageCompression.isAutoOrientationInBrowser\n    \n    getNewCanvasAndCtx = ").concat(getNewCanvasAndCtx,"\n    CustomFileReader = FileReader\n    CustomFile = File\n    function _slicedToArray(arr, n) { return arr }\n    function _typeof(a) { return typeof a }\n    function compress (){return (").concat(compress,").apply(null, arguments)}\n\n    // Libraries\n    const parse = ").concat(parse,"\n    const UPNG = {}\n    UPNG.toRGBA8 = ").concat(UPNG.toRGBA8,"\n    UPNG.toRGBA8.decodeImage = ").concat(UPNG.toRGBA8.decodeImage,"\n    UPNG.decode = ").concat(UPNG.decode,"\n    UPNG.decode._decompress = ").concat(UPNG.decode._decompress,"\n    UPNG.decode._inflate = ").concat(UPNG.decode._inflate,"\n    UPNG.decode._readInterlace = ").concat(UPNG.decode._readInterlace,"\n    UPNG.decode._getBPP = ").concat(UPNG.decode._getBPP," \n    UPNG.decode._filterZero = ").concat(UPNG.decode._filterZero,"\n    UPNG.decode._paeth = ").concat(UPNG.decode._paeth,"\n    UPNG.decode._IHDR = ").concat(UPNG.decode._IHDR,"\n    UPNG._bin = parse(").concat(stringify(UPNG._bin),")\n    UPNG._copyTile = ").concat(UPNG._copyTile,"\n    UPNG.encode = ").concat(UPNG.encode,"\n    UPNG.encodeLL = ").concat(UPNG.encodeLL," \n    UPNG.encode._main = ").concat(UPNG.encode._main,"\n    UPNG.encode.compressPNG = ").concat(UPNG.encode.compressPNG," \n    UPNG.encode.compress = ").concat(UPNG.encode.compress,"\n    UPNG.encode.framize = ").concat(UPNG.encode.framize," \n    UPNG.encode._updateFrame = ").concat(UPNG.encode._updateFrame," \n    UPNG.encode._prepareDiff = ").concat(UPNG.encode._prepareDiff," \n    UPNG.encode._filterZero = ").concat(UPNG.encode._filterZero," \n    UPNG.encode._filterLine = ").concat(UPNG.encode._filterLine,"\n    UPNG.encode.concatRGBA = ").concat(UPNG.encode.concatRGBA,"\n    UPNG.crc = parse(").concat(stringify(UPNG.crc),")\n    UPNG.crc.table = ( function() {\n    var tab = new Uint32Array(256);\n    for (var n=0; n<256; n++) {\n      var c = n;\n      for (var k=0; k<8; k++) {\n        if (c & 1)  c = 0xedb88320 ^ (c >>> 1);\n        else        c = c >>> 1;\n      }\n      tab[n] = c;  }\n    return tab;  })()\n    UPNG.quantize = ").concat(UPNG.quantize," \n    UPNG.quantize.getKDtree = ").concat(UPNG.quantize.getKDtree," \n    UPNG.quantize.getNearest = ").concat(UPNG.quantize.getNearest," \n    UPNG.quantize.planeDst = ").concat(UPNG.quantize.planeDst," \n    UPNG.quantize.dist = ").concat(UPNG.quantize.dist,"     \n    UPNG.quantize.splitPixels = ").concat(UPNG.quantize.splitPixels," \n    UPNG.quantize.vecDot = ").concat(UPNG.quantize.vecDot," \n    UPNG.quantize.stats = ").concat(UPNG.quantize.stats," \n    UPNG.quantize.estats = ").concat(UPNG.quantize.estats,"\n    UPNG.M4 = parse(").concat(stringify(UPNG.M4),")\n    UPNG.encode.concatRGBA = ").concat(UPNG.encode.concatRGBA,'\n    UPNG.inflateRaw=function(){\n    var H={};H.H={};H.H.N=function(N,W){var R=Uint8Array,i=0,m=0,J=0,h=0,Q=0,X=0,u=0,w=0,d=0,v,C;\n      if(N[0]==3&&N[1]==0)return W?W:new R(0);var V=H.H,n=V.b,A=V.e,l=V.R,M=V.n,I=V.A,e=V.Z,b=V.m,Z=W==null;\n      if(Z)W=new R(N.length>>>2<<5);while(i==0){i=n(N,d,1);m=n(N,d+1,2);d+=3;if(m==0){if((d&7)!=0)d+=8-(d&7);\n        var D=(d>>>3)+4,q=N[D-4]|N[D-3]<<8;if(Z)W=H.H.W(W,w+q);W.set(new R(N.buffer,N.byteOffset+D,q),w);d=D+q<<3;\n        w+=q;continue}if(Z)W=H.H.W(W,w+(1<<17));if(m==1){v=b.J;C=b.h;X=(1<<9)-1;u=(1<<5)-1}if(m==2){J=A(N,d,5)+257;\n        h=A(N,d+5,5)+1;Q=A(N,d+10,4)+4;d+=14;var E=d,j=1;for(var c=0;c<38;c+=2){b.Q[c]=0;b.Q[c+1]=0}for(var c=0;\n                                                                                                        c<Q;c++){var K=A(N,d+c*3,3);b.Q[(b.X[c]<<1)+1]=K;if(K>j)j=K}d+=3*Q;M(b.Q,j);I(b.Q,j,b.u);v=b.w;C=b.d;\n        d=l(b.u,(1<<j)-1,J+h,N,d,b.v);var r=V.V(b.v,0,J,b.C);X=(1<<r)-1;var S=V.V(b.v,J,h,b.D);u=(1<<S)-1;M(b.C,r);\n        I(b.C,r,v);M(b.D,S);I(b.D,S,C)}while(!0){var T=v[e(N,d)&X];d+=T&15;var p=T>>>4;if(p>>>8==0){W[w++]=p}else if(p==256){break}else{var z=w+p-254;\n        if(p>264){var _=b.q[p-257];z=w+(_>>>3)+A(N,d,_&7);d+=_&7}var $=C[e(N,d)&u];d+=$&15;var s=$>>>4,Y=b.c[s],a=(Y>>>4)+n(N,d,Y&15);\n        d+=Y&15;while(w<z){W[w]=W[w++-a];W[w]=W[w++-a];W[w]=W[w++-a];W[w]=W[w++-a]}w=z}}}return W.length==w?W:W.slice(0,w)};\n      H.H.W=function(N,W){var R=N.length;if(W<=R)return N;var V=new Uint8Array(R<<1);V.set(N,0);return V};\n      H.H.R=function(N,W,R,V,n,A){var l=H.H.e,M=H.H.Z,I=0;while(I<R){var e=N[M(V,n)&W];n+=e&15;var b=e>>>4;\n        if(b<=15){A[I]=b;I++}else{var Z=0,m=0;if(b==16){m=3+l(V,n,2);n+=2;Z=A[I-1]}else if(b==17){m=3+l(V,n,3);\n          n+=3}else if(b==18){m=11+l(V,n,7);n+=7}var J=I+m;while(I<J){A[I]=Z;I++}}}return n};H.H.V=function(N,W,R,V){var n=0,A=0,l=V.length>>>1;\n        while(A<R){var M=N[A+W];V[A<<1]=0;V[(A<<1)+1]=M;if(M>n)n=M;A++}while(A<l){V[A<<1]=0;V[(A<<1)+1]=0;A++}return n};\n      H.H.n=function(N,W){var R=H.H.m,V=N.length,n,A,l,M,I,e=R.j;for(var M=0;M<=W;M++)e[M]=0;for(M=1;M<V;M+=2)e[N[M]]++;\n        var b=R.K;n=0;e[0]=0;for(A=1;A<=W;A++){n=n+e[A-1]<<1;b[A]=n}for(l=0;l<V;l+=2){I=N[l+1];if(I!=0){N[l]=b[I];\n          b[I]++}}};H.H.A=function(N,W,R){var V=N.length,n=H.H.m,A=n.r;for(var l=0;l<V;l+=2)if(N[l+1]!=0){var M=l>>1,I=N[l+1],e=M<<4|I,b=W-I,Z=N[l]<<b,m=Z+(1<<b);\n        while(Z!=m){var J=A[Z]>>>15-W;R[J]=e;Z++}}};H.H.l=function(N,W){var R=H.H.m.r,V=15-W;for(var n=0;n<N.length;\n                                                                                                 n+=2){var A=N[n]<<W-N[n+1];N[n]=R[A]>>>V}};H.H.M=function(N,W,R){R=R<<(W&7);var V=W>>>3;N[V]|=R;N[V+1]|=R>>>8};\n      H.H.I=function(N,W,R){R=R<<(W&7);var V=W>>>3;N[V]|=R;N[V+1]|=R>>>8;N[V+2]|=R>>>16};H.H.e=function(N,W,R){return(N[W>>>3]|N[(W>>>3)+1]<<8)>>>(W&7)&(1<<R)-1};\n      H.H.b=function(N,W,R){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16)>>>(W&7)&(1<<R)-1};H.H.Z=function(N,W){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16)>>>(W&7)};\n      H.H.i=function(N,W){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16|N[(W>>>3)+3]<<24)>>>(W&7)};H.H.m=function(){var N=Uint16Array,W=Uint32Array;\n        return{K:new N(16),j:new N(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new N(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new W(32),J:new N(512),_:[],h:new N(32),$:[],w:new N(32768),C:[],v:[],d:new N(32768),D:[],u:new N(512),Q:[],r:new N(1<<15),s:new W(286),Y:new W(30),a:new W(19),t:new W(15e3),k:new N(1<<16),g:new N(1<<15)}}();\n      (function(){var N=H.H.m,W=1<<15;for(var R=0;R<W;R++){var V=R;V=(V&2863311530)>>>1|(V&1431655765)<<1;\n        V=(V&3435973836)>>>2|(V&858993459)<<2;V=(V&4042322160)>>>4|(V&252645135)<<4;V=(V&4278255360)>>>8|(V&16711935)<<8;\n        N.r[R]=(V>>>16|V<<16)>>>17}function n(A,l,M){while(l--!=0)A.push(0,M)}for(var R=0;R<32;R++){N.q[R]=N.S[R]<<3|N.T[R];\n        N.c[R]=N.p[R]<<4|N.z[R]}n(N._,144,8);n(N._,255-143,9);n(N._,279-255,7);n(N._,287-279,8);H.H.n(N._,9);\n        H.H.A(N._,9,N.J);H.H.l(N._,9);n(N.$,32,5);H.H.n(N.$,5);H.H.A(N.$,5,N.h);H.H.l(N.$,5);n(N.Q,19,0);n(N.C,286,0);\n        n(N.D,30,0);n(N.v,320,0)}());return H.H.N}()\n    \n    const UZIP = {}\n    UZIP["parse"] = ').concat(UZIP_1.parse,"\n    UZIP._readLocal = ").concat(UZIP_1._readLocal,"\n    UZIP.inflateRaw = ").concat(UZIP_1.inflateRaw,"\n    UZIP.inflate = ").concat(UZIP_1.inflate,"\n    UZIP.deflate = ").concat(UZIP_1.deflate,"\n    UZIP.deflateRaw = ").concat(UZIP_1.deflateRaw,"\n    UZIP.encode = ").concat(UZIP_1.encode,"\n    UZIP._noNeed = ").concat(UZIP_1._noNeed,"\n    UZIP._writeHeader = ").concat(UZIP_1._writeHeader,"\n    UZIP.crc = parse(").concat(stringify(UZIP_1.crc),")\n    UZIP.crc.table = ( function() {\n      var tab = new Uint32Array(256);\n      for (var n=0; n<256; n++) {\n        var c = n;\n        for (var k=0; k<8; k++) {\n          if (c & 1)  c = 0xedb88320 ^ (c >>> 1);\n          else        c = c >>> 1;\n        }\n        tab[n] = c;  }\n      return tab;  })()\n    \n    UZIP.adler = ").concat(UZIP_1.adler,"\n    UZIP.bin = parse(").concat(stringify(UZIP_1.bin),")\n    UZIP.F = {}\n    UZIP.F.deflateRaw = ").concat(UZIP_1.F.deflateRaw,"\n    UZIP.F._bestMatch = ").concat(UZIP_1.F._bestMatch,"\n    UZIP.F._howLong = ").concat(UZIP_1.F._howLong,"\n    UZIP.F._hash = ").concat(UZIP_1.F._hash,"\n    UZIP.saved = ").concat(UZIP_1.saved,"\n    UZIP.F._writeBlock = ").concat(UZIP_1.F._writeBlock,"\n    UZIP.F._copyExact = ").concat(UZIP_1.F._copyExact,"\n    UZIP.F.getTrees = ").concat(UZIP_1.F.getTrees,"\n    UZIP.F.getSecond = ").concat(UZIP_1.F.getSecond,"\n    UZIP.F.nonZero = ").concat(UZIP_1.F.nonZero,"\n    UZIP.F.contSize = ").concat(UZIP_1.F.contSize,"\n    UZIP.F._codeTiny = ").concat(UZIP_1.F._codeTiny," \n    UZIP.F._lenCodes = ").concat(UZIP_1.F._lenCodes," \n    UZIP.F._hufTree = ").concat(UZIP_1.F._hufTree," \n    UZIP.F.setDepth = ").concat(UZIP_1.F.setDepth," \n    UZIP.F.restrictDepth = ").concat(UZIP_1.F.restrictDepth,"\n    UZIP.F._goodIndex = ").concat(UZIP_1.F._goodIndex," \n    UZIP.F._writeLit = ").concat(UZIP_1.F._writeLit," \n    UZIP.F.inflate = ").concat(UZIP_1.F.inflate," \n    UZIP.F._check = ").concat(UZIP_1.F._check," \n    UZIP.F._decodeTiny = ").concat(UZIP_1.F._decodeTiny," \n    UZIP.F._copyOut = ").concat(UZIP_1.F._copyOut," \n    UZIP.F.makeCodes = ").concat(UZIP_1.F.makeCodes," \n    UZIP.F.codes2map = ").concat(UZIP_1.F.codes2map," \n    UZIP.F.revCodes = ").concat(UZIP_1.F.revCodes," \n\n    // used only in deflate\n    UZIP.F._putsE = ").concat(UZIP_1.F._putsE,"\n    UZIP.F._putsF = ").concat(UZIP_1.F._putsF,"\n  \n    UZIP.F._bitsE = ").concat(UZIP_1.F._bitsE,"\n    UZIP.F._bitsF = ").concat(UZIP_1.F._bitsF,"\n\n    UZIP.F._get17 = ").concat(UZIP_1.F._get17,"\n    UZIP.F._get25 = ").concat(UZIP_1.F._get25,"\n    UZIP.F.U = function(){\n      var u16=Uint16Array, u32=Uint32Array;\n      return {\n        next_code : new u16(16),\n        bl_count  : new u16(16),\n        ordr : [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ],\n        of0  : [3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],\n        exb  : [0,0,0,0,0,0,0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4,  4,  5,  5,  5,  5,  0,  0,  0,  0],\n        ldef : new u16(32),\n        df0  : [1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577, 65535, 65535],\n        dxb  : [0,0,0,0,1,1,2, 2, 3, 3, 4, 4, 5, 5,  6,  6,  7,  7,  8,  8,   9,   9,  10,  10,  11,  11,  12,   12,   13,   13,     0,     0],\n        ddef : new u32(32),\n        flmap: new u16(  512),  fltree: [],\n        fdmap: new u16(   32),  fdtree: [],\n        lmap : new u16(32768),  ltree : [],  ttree:[],\n        dmap : new u16(32768),  dtree : [],\n        imap : new u16(  512),  itree : [],\n        //rev9 : new u16(  512)\n        rev15: new u16(1<<15),\n        lhst : new u32(286), dhst : new u32( 30), ihst : new u32(19),\n        lits : new u32(15000),\n        strt : new u16(1<<16),\n        prev : new u16(1<<15)\n      };\n    } ();\n\n    (function(){\n      var U = UZIP.F.U;\n      var len = 1<<15;\n      for(var i=0; i<len; i++) {\n        var x = i;\n        x = (((x & 0xaaaaaaaa) >>> 1) | ((x & 0x55555555) << 1));\n        x = (((x & 0xcccccccc) >>> 2) | ((x & 0x33333333) << 2));\n        x = (((x & 0xf0f0f0f0) >>> 4) | ((x & 0x0f0f0f0f) << 4));\n        x = (((x & 0xff00ff00) >>> 8) | ((x & 0x00ff00ff) << 8));\n        U.rev15[i] = (((x >>> 16) | (x << 16)))>>>17;\n      }\n  \n      function pushV(tgt, n, sv) {  while(n--!=0) tgt.push(0,sv);  }\n  \n      for(var i=0; i<32; i++) {  U.ldef[i]=(U.of0[i]<<3)|U.exb[i];  U.ddef[i]=(U.df0[i]<<4)|U.dxb[i];  }\n  \n      pushV(U.fltree, 144, 8);  pushV(U.fltree, 255-143, 9);  pushV(U.fltree, 279-255, 7);  pushV(U.fltree,287-279,8);\n      /*\n        var i = 0;\n        for(; i<=143; i++) U.fltree.push(0,8);\n        for(; i<=255; i++) U.fltree.push(0,9);\n        for(; i<=279; i++) U.fltree.push(0,7);\n        for(; i<=287; i++) U.fltree.push(0,8);\n        */\n      UZIP.F.makeCodes(U.fltree, 9);\n      UZIP.F.codes2map(U.fltree, 9, U.flmap);\n      UZIP.F.revCodes (U.fltree, 9)\n  \n      pushV(U.fdtree,32,5);\n      //for(i=0;i<32; i++) U.fdtree.push(0,5);\n      UZIP.F.makeCodes(U.fdtree, 5);\n      UZIP.F.codes2map(U.fdtree, 5, U.fdmap);\n      UZIP.F.revCodes (U.fdtree, 5)\n  \n      pushV(U.itree,19,0);  pushV(U.ltree,286,0);  pushV(U.dtree,30,0);  pushV(U.ttree,320,0);\n      /*\n        for(var i=0; i< 19; i++) U.itree.push(0,0);\n        for(var i=0; i<286; i++) U.ltree.push(0,0);\n        for(var i=0; i< 30; i++) U.dtree.push(0,0);\n        for(var i=0; i<320; i++) U.ttree.push(0,0);\n        */\n    })()\n    "))}function generateWorkerScript(){return createWorker("\n    let scriptImported = false\n    self.addEventListener('message', async (e) => {\n      const { file, id, imageCompressionLibUrl, options } = e.data\n      options.onProgress = (progress) => self.postMessage({ progress, id })\n      try {\n        if (!scriptImported) {\n          // console.log('[worker] importScripts', imageCompressionLibUrl)\n          self.importScripts(imageCompressionLibUrl)\n          scriptImported = true\n        }\n        // console.log('[worker] self', self)\n        const compressedFile = await imageCompression(file, options)\n        self.postMessage({ file: compressedFile, id })\n      } catch (e) {\n        // console.error('[worker] error', e)\n        self.postMessage({ error: e.message + '\\n' + e.stack, id })\n      }\n    })\n  ")}function compressOnWebWorker(e,t){return new Promise(function(a,n){return new Promise(function(r,i){var o=cnt++;return imageCompressionLibUrl||(imageCompressionLibUrl=generateLib()),worker||(worker=generateWorkerScript()),worker.addEventListener("message",function e(r){if(r.data.id===o){if(void 0!==r.data.progress)return void t.onProgress(r.data.progress);worker.removeEventListener("message",e),r.data.error&&n(new Error(r.data.error)),a(r.data.file)}}),worker.addEventListener("error",n),worker.postMessage({file:e,id:o,imageCompressionLibUrl:imageCompressionLibUrl,options:_objectSpread2(_objectSpread2({},t),{},{onProgress:void 0})}),r()})})}function imageCompression(e,t){return new Promise(function(a,n){var r,i,o,s,c;if(i=0,t.maxSizeMB=t.maxSizeMB||Number.POSITIVE_INFINITY,s="boolean"!=typeof t.useWebWorker||t.useWebWorker,delete t.useWebWorker,o=t.onProgress,t.onProgress=function(e){i=e,"function"==typeof o&&o(i)},!(e instanceof Blob||e instanceof CustomFile))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return n(new Error("The file given is not an image"));if(c="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!s||"function"!=typeof Worker||c)return compress(e,t).then(function(e){try{return r=e,d.call(this)}catch(e){return n(e)}}.bind(this),n);var l=function(){try{return d.call(this)}catch(e){return n(e)}}.bind(this),u=function(a){try{return compress(e,t).then(function(e){try{return r=e,l()}catch(e){return n(e)}},n)}catch(e){return n(e)}};try{return compressOnWebWorker(e,t).then(function(e){try{return r=e,l()}catch(e){return u()}},u)}catch(e){u()}function d(){try{r.name=e.name,r.lastModified=e.lastModified}catch(e){}return a(r)}})}imageCompression.getDataUrlFromFile=getDataUrlFromFile,imageCompression.getFilefromDataUrl=getFilefromDataUrl,imageCompression.loadImage=loadImage,imageCompression.drawImageInCanvas=drawImageInCanvas,imageCompression.drawFileInCanvas=drawFileInCanvas,imageCompression.canvasToFile=canvasToFile,imageCompression.getExifOrientation=getExifOrientation,imageCompression.handleMaxWidthOrHeight=handleMaxWidthOrHeight,imageCompression.followExifOrientation=followExifOrientation,imageCompression.cleanupCanvasMemory=cleanupCanvasMemory,imageCompression.isAutoOrientationInBrowser=isAutoOrientationInBrowser,imageCompression.version="1.0.14",__webpack_exports__.a=imageCompression}}]);